/*! Storymaps-MapJournal - v0.0.1 - 2014-09-19, 04:46:24 PM - This application is released under the Apache License V2.0 by Esri http://www.esri.com/ - https://github.com/Esri/map-journal-storytelling-template-js */function FastClick(e){var t,n=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e;if(!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)};if(FastClick.notNeeded(e))return;this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;t==="click"?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;t==="click"?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),typeof e.onclick=="function"&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null)}define("lib-build/css",[],function(){if(typeof window=="undefined")return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,r=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?r=!1:t[4]&&(n=parseInt(t[4])<18);var i={};i.pluginBuilder="./css-builder";var s,o=function(){s=document.createElement("style"),e.appendChild(s)},u=function(e,t){o();var n=s.styleSheet||s.sheet;if(n&&n.addImport)n.addImport(e),s.onload=t;else{s.textContent='@import "'+e+'";';var r=setInterval(function(){try{s.sheet.cssRules,clearInterval(r),t()}catch(e){}},10)}},a=function(t,n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet";if(r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var s=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==i.href)return clearInterval(s),n()}},10);i.href=t,e.appendChild(i)};return i.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)},i.load=function(e,t,r,i){(n?u:a)(t.toUrl(e+".css"),r)},i}),define("lib-build/css!lib-app/bootstrap/css/bootstrap.min",[],function(){}),define("lib-build/css!storymaps/common/Core",[],function(){}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function y(e){var t=e.length,n=p.type(e);return"function"===n||p.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,n){if(p.isFunction(t))return p.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return p.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(S.test(t))return p.filter(t,e,n);t=p.filter(t,e)}return p.grep(e,function(e){return p.inArray(e,t)>=0!==n})}function O(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function D(e){var t=_[e]={};return p.each(e.match(M)||[],function(e,n){t[n]=!0}),t}function H(){N.addEventListener?(N.removeEventListener("DOMContentLoaded",B,!1),e.removeEventListener("load",B,!1)):(N.detachEvent("onreadystatechange",B),e.detachEvent("onload",B))}function B(){(N.addEventListener||"load"===event.type||"complete"===N.readyState)&&(H(),p.ready())}function R(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(q,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:I.test(n)?p.parseJSON(n):n}catch(i){}p.data(e,t,n)}else n=void 0}return n}function U(e){var t;for(t in e)if(("data"!==t||!p.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function z(e,t,r,i){if(p.acceptData(e)){var s,o,u=p.expando,a=e.nodeType,f=a?p.cache:e,l=a?e[u]:e[u]&&u;if(l&&f[l]&&(i||f[l].data)||void 0!==r||"string"!=typeof t)return l||(l=a?e[u]=n.pop()||p.guid++:u),f[l]||(f[l]=a?{}:{toJSON:p.noop}),("object"==typeof t||"function"==typeof t)&&(i?f[l]=p.extend(f[l],t):f[l].data=p.extend(f[l].data,t)),o=f[l],i||(o.data||(o.data={}),o=o.data),void 0!==r&&(o[p.camelCase(t)]=r),"string"==typeof t?(s=o[t],null==s&&(s=o[p.camelCase(t)])):s=o,s}}function W(e,t,n){if(p.acceptData(e)){var r,i,s=e.nodeType,o=s?p.cache:e,u=s?e[p.expando]:p.expando;if(o[u]){if(t&&(r=n?o[u]:o[u].data)){p.isArray(t)?t=t.concat(p.map(t,p.camelCase)):t in r?t=[t]:(t=p.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!U(r):!p.isEmptyObject(r))return}(n||(delete o[u].data,U(o[u])))&&(s?p.cleanData([e],!0):c.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function tt(){return!0}function nt(){return!1}function rt(){try{return N.activeElement}catch(e){}}function it(e){var t=st.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Et(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!==j?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==j?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||p.nodeName(r,t)?s.push(r):p.merge(s,Et(r,t));return void 0===t||t&&p.nodeName(e,t)?p.merge([e],s):s}function St(e){K.test(e.type)&&(e.defaultChecked=e.checked)}function xt(e,t){return p.nodeName(e,"table")&&p.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Tt(e){return e.type=(null!==p.find.attr(e,"type"))+"/"+e.type,e}function Nt(e){var t=mt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ct(e,t){for(var n,r=0;null!=(n=e[r]);r++)p._data(n,"globalEval",!t||p._data(t[r],"globalEval"))}function kt(e,t){if(1===t.nodeType&&p.hasData(e)){var n,r,i,s=p._data(e),o=p._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)p.event.add(t,n,u[n][r])}o.data&&(o.data=p.extend({},o.data))}}function Lt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!c.noCloneEvent&&t[p.expando]){i=p._data(t);for(r in i.events)p.removeEvent(t,r,i.handle);t.removeAttribute(p.expando)}"script"===n&&t.text!==e.text?(Tt(t).text=e.text,Nt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),c.html5Clone&&e.innerHTML&&!p.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&K.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Mt(t,n){var r=p(n.createElement(t)).appendTo(n.body),i=e.getDefaultComputedStyle?e.getDefaultComputedStyle(r[0]).display:p.css(r[0],"display");return r.detach(),i}function _t(e){var t=N,n=Ot[e];return n||(n=Mt(e,t),"none"!==n&&n||(At=(At||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(At[0].contentWindow||At[0].contentDocument).document,t.write(),t.close(),n=Mt(e,t),At.detach()),Ot[e]=n),n}function Ft(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function $t(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Vt.length;while(i--)if(t=Vt[i]+n,t in e)return t;return r}function Jt(e,t){for(var n,r,i,s=[],o=0,u=e.length;u>o;o++)r=e[o],r.style&&(s[o]=p._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&$(r)&&(s[o]=p._data(r,"olddisplay",_t(r.nodeName)))):s[o]||(i=$(r),(n&&"none"!==n||!i)&&p._data(r,"olddisplay",i?n:p.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function Kt(e,t,n){var r=Ut.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Qt(e,t,n,r,i){for(var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=p.css(e,n+V[s],!0,i)),r?("content"===n&&(o-=p.css(e,"padding"+V[s],!0,i)),"margin"!==n&&(o-=p.css(e,"border"+V[s]+"Width",!0,i))):(o+=p.css(e,"padding"+V[s],!0,i),"padding"!==n&&(o+=p.css(e,"border"+V[s]+"Width",!0,i)));return o}function Gt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=Ht(e),o=c.boxSizing()&&"border-box"===p.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Bt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Pt.test(i))return i;r=o&&(c.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Qt(e,t,n||(o?"border":"content"),r,s)+"px"}function Yt(e,t,n,r,i){return new Yt.prototype.init(e,t,n,r,i)}function un(){return setTimeout(function(){Zt=void 0}),Zt=p.now()}function an(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=V[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function fn(e,t,n){for(var r,i=(on[t]||[]).concat(on["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function ln(e,t,n){var r,i,s,o,u,a,f,l,h=this,d={},v=e.style,m=e.nodeType&&$(e),g=p._data(e,"fxshow");n.queue||(u=p._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,h.always(function(){h.always(function(){u.unqueued--,p.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=p.css(e,"display"),l=_t(e.nodeName),"none"===f&&(f=l),"inline"===f&&"none"===p.css(e,"float")&&(c.inlineBlockNeedsLayout&&"inline"!==l?v.zoom=1:v.display="inline-block")),n.overflow&&(v.overflow="hidden",c.shrinkWrapBlocks()||h.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],tn.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||p.style(e,r)}if(!p.isEmptyObject(d)){g?"hidden"in g&&(m=g.hidden):g=p._data(e,"fxshow",{}),s&&(g.hidden=!m),m?p(e).show():h.done(function(){p(e).hide()}),h.done(function(){var t;p._removeData(e,"fxshow");for(t in d)p.style(e,t,d[t])});for(r in d)o=fn(m?g[r]:0,r,h),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function cn(e,t){var n,r,i,s,o;for(n in e)if(r=p.camelCase(n),i=t[r],s=e[n],p.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=p.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function hn(e,t,n){var r,i,s=0,o=sn.length,u=p.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;for(var t=Zt||un(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zt||un(),duration:n.duration,tweens:[],createTween:function(t,n){var r=p.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(cn(l,f.opts.specialEasing);o>s;s++)if(r=sn[s].call(f,e,l,f.opts))return r;return p.map(l,fn,f),p.isFunction(f.opts.start)&&f.opts.start.call(e,f),p.fx.timer(p.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function In(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(M)||[];if(p.isFunction(n))while(r=s[i++])"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,t,n,r){function o(u){var a;return i[u]=!0,p.each(e[u]||[],function(e,u){var f=u(t,n,r);return"string"!=typeof f||s||i[f]?s?!(a=f):void 0:(t.dataTypes.unshift(f),o(f),!1)}),a}var i={},s=e===Bn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Rn(e,t){var n,r,i=p.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&p.extend(!0,e,n),e}function Un(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function zn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Kn(e,t,n,r){var i;if(p.isArray(t))p.each(t,function(t,i){n||Xn.test(e)?r(e,i):Kn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==p.type(t))r(e,t);else for(i in t)Kn(e+"["+i+"]",t[i],n,r)}function Zn(){try{return new e.XMLHttpRequest}catch(t){}}function er(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function sr(e){return p.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n=[],r=n.slice,i=n.concat,s=n.push,o=n.indexOf,u={},a=u.toString,f=u.hasOwnProperty,l="".trim,c={},h="1.11.0",p=function(e,t){return new p.fn.init(e,t)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,m=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};p.fn=p.prototype={jquery:h,constructor:p,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return p.each(this,e,t)},map:function(e){return this.pushStack(p.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;for("boolean"==typeof o&&(f=o,o=arguments[u]||{},u++),"object"==typeof o||p.isFunction(o)||(o={}),u===a&&(o=this,u--);a>u;u++)if(null!=(i=arguments[u]))for(r in i)e=o[r],n=i[r],o!==n&&(f&&n&&(p.isPlainObject(n)||(t=p.isArray(n)))?(t?(t=!1,s=e&&p.isArray(e)?e:[]):s=e&&p.isPlainObject(e)?e:{},o[r]=p.extend(f,s,n)):void 0!==n&&(o[r]=n));return o},p.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===p.type(e)},isArray:Array.isArray||function(e){return"array"===p.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==p.type(e)||e.nodeType||p.isWindow(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(c.ownLast)for(t in e)return f.call(e,t);for(t in e);return void 0===t||f.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[a.call(e)]||"object":typeof e},globalEval:function(t){t&&p.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(v,"ms-").replace(m,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=y(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:l&&!l.call("﻿ ")?function(e){return null==e?"":l.call(e)}:function(e){return null==e?"":(e+"").replace(d,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(y(Object(e))?p.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(o)return o.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(n>r)e[i++]=t[r++];if(n!==n)while(void 0!==t[r])e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,s=0,o=e.length,u=y(e),a=[];if(u)for(;o>s;s++)r=t(e[s],s,n),null!=r&&a.push(r);else for(s in e)r=t(e[s],s,n),null!=r&&a.push(r);return i.apply([],a)},guid:1,proxy:function(e,t){var n,i,s;return"string"==typeof t&&(s=e[t],t=e,e=s),p.isFunction(e)?(n=r.call(arguments,2),i=function(){return e.apply(t||this,n.concat(r.call(arguments)))},i.guid=e.guid=e.guid||p.guid++,i):void 0},now:function(){return+(new Date)},support:c}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var b=function(e){function rt(e,t,r,i){var s,o,u,a,f,h,v,m,w,E;if((t?t.ownerDocument||t:b)!==c&&l(t),t=t||c,r=r||[],!e||"string"!=typeof e)return r;if(1!==(a=t.nodeType)&&9!==a)return[];if(p&&!i){if(s=G.exec(e))if(u=s[1]){if(9===a){if(o=t.getElementById(u),!o||!o.parentNode)return r;if(o.id===u)return r.push(o),r}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&g(t,o)&&o.id===u)return r.push(o),r}else{if(s[2])return _.apply(r,t.getElementsByTagName(e)),r;if((u=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return _.apply(r,t.getElementsByClassName(u)),r}if(n.qsa&&(!d||!d.test(e))){if(m=v=y,w=t,E=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){h=dt(e),(v=t.getAttribute("id"))?m=v.replace(Z,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=h.length;while(f--)h[f]=m+vt(h[f]);w=Y.test(e)&&ht(t.parentNode)||t,E=h.join(",")}if(E)try{return _.apply(r,w.querySelectorAll(E)),r}catch(S){}finally{v||t.removeAttribute("id")}}}return xt(e.replace(R,"$1"),t,r,i)}function it(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function st(e){return e[y]=!0,e}function ot(e){var t=c.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ut(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function at(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e){return e&&typeof e.getElementsByTagName!==C&&e}function pt(){}function dt(e,t){var n,i,s,o,u,a,f,l=x[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=U.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=z.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(R," ")}),u=u.slice(n.length));for(o in r.filter)!(i=$[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?rt.error(e):x(e,a).slice(0)}function vt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function mt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=E++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[w,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[y]||(t[y]={}),(u=a[r])&&u[0]===w&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function yt(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function bt(e,t,n,r,i,s){return r&&!r[y]&&(r=bt(r)),i&&!i[y]&&(i=bt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||St(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:yt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=yt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=yt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function wt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],a=o||r.relative[" "],f=o?1:0,l=mt(function(e){return e===t},a,!0),c=mt(function(e){return P.call(t,e)>-1},a,!0),h=[function(e,n,r){return!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];s>f;f++)if(n=r.relative[e[f].type])h=[mt(gt(h),n)];else{if(n=r.filter[e[f].type].apply(null,e[f].matches),n[y]){for(i=++f;s>i;i++)if(r.relative[e[i].type])break;return bt(f>1&&gt(h),f>1&&vt(e.slice(0,f-1).concat({value:" "===e[f-2].type?"*":""})).replace(R,"$1"),n,i>f&&wt(e.slice(f,i)),s>i&&wt(e=e.slice(i)),s>i&&vt(e))}h.push(n)}return gt(h)}function Et(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,a,f,l){var h,p,d,v=0,m="0",g=s&&[],y=[],b=u,E=s||i&&r.find.TAG("*",l),S=w+=null==b?1:Math.random()||.1,x=E.length;for(l&&(u=o!==c&&o);m!==x&&null!=(h=E[m]);m++){if(i&&h){p=0;while(d=e[p++])if(d(h,o,a)){f.push(h);break}l&&(w=S)}n&&((h=!d&&h)&&v--,s&&g.push(h))}if(v+=m,n&&m!==v){p=0;while(d=t[p++])d(g,y,o,a);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=O.call(f));y=yt(y)}_.apply(f,y),l&&!s&&y.length>0&&v+t.length>1&&rt.uniqueSort(f)}return l&&(w=S,u=b),g};return n?st(s):s}function St(e,t,n){for(var r=0,i=t.length;i>r;r++)rt(e,t[r],n);return n}function xt(e,t,i,s){var u,a,f,l,c,h=dt(e);if(!s&&1===h.length){if(a=h[0]=h[0].slice(0),a.length>2&&"ID"===(f=a[0]).type&&n.getById&&9===t.nodeType&&p&&r.relative[a[1].type]){if(t=(r.find.ID(f.matches[0].replace(et,tt),t)||[])[0],!t)return i;e=e.slice(a.shift().value.length)}u=$.needsContext.test(e)?0:a.length;while(u--){if(f=a[u],r.relative[l=f.type])break;if((c=r.find[l])&&(s=c(f.matches[0].replace(et,tt),Y.test(a[0].type)&&ht(t.parentNode)||t))){if(a.splice(u,1),e=s.length&&vt(a),!e)return _.apply(i,s),i;break}}}return o(e,h)(s,t,!p,i,Y.test(e)&&ht(t.parentNode)||t),i}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y="sizzle"+ -(new Date),b=e.document,w=0,E=0,S=it(),x=it(),T=it(),N=function(e,t){return e===t&&(f=!0),0},C="undefined",k=1<<31,L={}.hasOwnProperty,A=[],O=A.pop,M=A.push,_=A.push,D=A.slice,P=A.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=j.replace("w","w#"),I="\\["+B+"*("+j+")"+B+"*(?:([*^$|!~]?=)"+B+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+F+")|)|)"+B+"*\\]",q=":("+j+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),U=new RegExp("^"+B+"*,"+B+"*"),z=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),X=new RegExp(q),V=new RegExp("^"+F+"$"),$={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,Z=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),tt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{_.apply(A=D.call(b.childNodes),b.childNodes),A[b.childNodes.length].nodeType}catch(nt){_={apply:A.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=rt.support={},s=rt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},l=rt.setDocument=function(e){var t,i=e?e.ownerDocument||e:b,o=i.defaultView;return i!==c&&9===i.nodeType&&i.documentElement?(c=i,h=i.documentElement,p=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){l()},!1):o.attachEvent&&o.attachEvent("onunload",function(){l()})),n.attributes=ot(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ot(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(i.getElementsByClassName)&&ot(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=ot(function(e){return h.appendChild(e).id=y,!i.getElementsByName||!i.getElementsByName(y).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==C&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==C&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==C?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==C&&p?t.getElementsByClassName(e):void 0},v=[],d=[],(n.qsa=Q.test(i.querySelectorAll))&&(ot(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&d.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||d.push("\\["+B+"*(?:value|"+H+")"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&d.push("name"+B+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(n.matchesSelector=Q.test(m=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){n.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=d.length&&new RegExp(d.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),g=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},N=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===b&&g(b,e)?-1:t===i||t.ownerDocument===b&&g(b,t)?1:a?P.call(a,e)-P.call(a,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],l=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:a?P.call(a,e)-P.call(a,t):0;if(s===o)return at(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)l.unshift(n);while(u[r]===l[r])r++;return r?at(u[r],l[r]):u[r]===b?-1:l[r]===b?1:0},i):c},rt.matches=function(e,t){return rt(e,null,null,t)},rt.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c&&l(e),t=t.replace(W,"='$1']"),!(!n.matchesSelector||!p||v&&v.test(t)||d&&d.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return rt(t,c,null,[e]).length>0},rt.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},rt.attr=function(e,t){(e.ownerDocument||e)!==c&&l(e);var i=r.attrHandle[t.toLowerCase()],s=i&&L.call(r.attrHandle,t.toLowerCase())?i(e,t,!p):void 0;return void 0!==s?s:n.attributes||!p?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},rt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},rt.uniqueSort=function(e){var t,r=[],i=0,s=0;if(f=!n.detectDuplicates,a=!n.sortStable&&e.slice(0),e.sort(N),f){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return a=null,e},i=rt.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=rt.selectors={cacheLength:50,createPseudo:st,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||rt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&rt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return $.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&X.test(n)&&(t=dt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(et,tt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==C&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=rt.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),b=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&b){l=m[y]||(m[y]={}),f=l[e]||[],p=f[0]===w&&f[1],h=f[0]===w&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[w,p,h];break}}else if(b&&(f=(t[y]||(t[y]={}))[e])&&f[0]===w)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(b&&((c[y]||(c[y]={}))[e]=[w,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||rt.error("unsupported pseudo: "+e);return i[y]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=P.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:st(function(e){var t=[],n=[],r=o(e.replace(R,"$1"));return r[y]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return rt(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:st(function(e){return V.test(e||"")||rt.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[0>n?n+t:n]}),even:ct(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ct(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ft(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=lt(t);return pt.prototype=r.filters=r.pseudos,r.setFilters=new pt,o=rt.compile=function(e,t){var n,r=[],i=[],s=T[e+" "];if(!s){t||(t=dt(e)),n=t.length;while(n--)s=wt(t[n]),s[y]?r.push(s):i.push(s);s=T(e,Et(i,r))}return s},n.sortStable=y.split("").sort(N).join("")===y,n.detectDuplicates=!!f,l(),n.sortDetached=ot(function(e){return 1&e.compareDocumentPosition(c.createElement("div"))}),ot(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ut("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ot(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ut("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ot(function(e){return null==e.getAttribute("disabled")})||ut(H,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),rt}(e);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var w=p.expr.match.needsContext,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;p.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?p.find.matchesSelector(r,e)?[r]:[]:p.find.matches(e,p.grep(t,function(e){return 1===e.nodeType}))},p.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(p(e).filter(function(){for(t=0;i>t;t++)if(p.contains(r[t],this))return!0}));for(t=0;i>t;t++)p.find(e,r[t],n);return n=this.pushStack(i>1?p.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&w.test(e)?p(e):e||[],!1).length}});var T,N=e.document,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=p.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:C.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||T).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:N,!0)),E.test(n[1])&&p.isPlainObject(t))for(n in t)p.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=N.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return T.find(e);this.length=1,this[0]=r}return this.context=N,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?"undefined"!=typeof T.ready?T.ready(e):e(p):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))};k.prototype=p.fn,T=p(N);var L=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};p.extend({dir:function(e,t,n){var r=[],i=e[t];while(i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!p(i).is(n)))1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),p.fn.extend({has:function(e){var t,n=p(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(p.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,s=[],o=w.test(e)||"string"!=typeof e?p(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&p.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?p.unique(s):s)},index:function(e){return e?"string"==typeof e?p.inArray(this[0],p(e)):p.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.unique(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p.dir(e,"parentNode")},parentsUntil:function(e,t,n){return p.dir(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return p.dir(e,"nextSibling")},prevAll:function(e){return p.dir(e,"previousSibling")},nextUntil:function(e,t,n){return p.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return p.dir(e,"previousSibling",n)},siblings:function(e){return p.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return p.sibling(e.firstChild)},contents:function(e){return p.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(n,r){var i=p.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=p.filter(r,i)),this.length>1&&(A[e]||(i=p.unique(i)),L.test(e)&&(i=i.reverse())),this.pushStack(i)}});var M=/\S+/g,_={};p.Callbacks=function(e){e="string"==typeof e?_[e]||D(e):p.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){for(n=e.memory&&c,r=!0,s=o||0,o=0,i=u.length,t=!0;u&&i>s;s++)if(u[s].apply(c[0],c[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(a?a.length&&f(a.shift()):n?u=[]:l.disable())},l={add:function(){if(u){var r=u.length;!function s(t){p.each(t,function(t,n){var r=p.type(n);"function"===r?e.unique&&l.has(n)||u.push(n):n&&n.length&&"string"!==r&&s(n)})}(arguments),t?i=u.length:n&&(o=r,f(n))}return this},remove:function(){return u&&p.each(arguments,function(e,n){var r;while((r=p.inArray(n,u,r))>-1)u.splice(r,1),t&&(i>=r&&i--,s>=r&&s--)}),this},has:function(e){return e?p.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],i=0,this},disable:function(){return u=a=n=void 0,this},disabled:function(){return!u},lock:function(){return a=void 0,n||l.disable(),this},locked:function(){return!a},fireWith:function(e,n){return!u||r&&!a||(n=n||[],n=[e,n.slice?n.slice():n],t?a.push(n):f(n)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(n){p.each(t,function(t,s){var o=p.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?p.extend(e,r):r}},i={};return r.pipe=r.then,p.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=r.call(arguments),i=n.length,s=1!==i||e&&p.isFunction(e.promise)?i:0,o=1===s?e:p.Deferred(),u=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?r.call(arguments):i,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)n[t]&&p.isFunction(n[t].promise)?n[t].promise().done(u(t,l,n)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,n),o.promise()}});var P;p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){if(e===!0?!--p.readyWait:!p.isReady){if(!N.body)return setTimeout(p.ready);p.isReady=!0,e!==!0&&--p.readyWait>0||(P.resolveWith(N,[p]),p.fn.trigger&&p(N).trigger("ready").off("ready"))}}}),p.ready.promise=function(t){if(!P)if(P=p.Deferred(),"complete"===N.readyState)setTimeout(p.ready);else if(N.addEventListener)N.addEventListener("DOMContentLoaded",B,!1),e.addEventListener("load",B,!1);else{N.attachEvent("onreadystatechange",B),e.attachEvent("onload",B);var n=!1;try{n=null==e.frameElement&&N.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!p.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}H(),p.ready()}}()}return P.promise(t)};var j="undefined",F;for(F in p(c))break;c.ownLast="0"!==F,c.inlineBlockNeedsLayout=!1,p(function(){var e,t,n=N.getElementsByTagName("body")[0];n&&(e=N.createElement("div"),e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=N.createElement("div"),n.appendChild(e).appendChild(t),typeof t.style.zoom!==j&&(t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(c.inlineBlockNeedsLayout=3===t.offsetWidth)&&(n.style.zoom=1)),n.removeChild(e),e=t=null)}),function(){var e=N.createElement("div");if(null==c.deleteExpando){c.deleteExpando=!0;try{delete e.test}catch(t){c.deleteExpando=!1}}e=null}(),p.acceptData=function(e){var t=p.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/([A-Z])/g;p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?p.cache[e[p.expando]]:e[p.expando],!!e&&!U(e)},data:function(e,t,n){return z(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return z(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)}}),p.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=p.data(s),1===s.nodeType&&!p._data(s,"parsedAttrs"))){n=o.length;while(n--)r=o[n].name,0===r.indexOf("data-")&&(r=p.camelCase(r.slice(5)),R(s,r,i[r]));p._data(s,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){p.data(this,e)}):arguments.length>1?this.each(function(){p.data(this,e,t)}):s?R(s,e,p.data(s,e)):void 0},removeData:function(e){return this.each(function(){p.removeData(this,e)})}}),p.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=p._data(e,t),n&&(!r||p.isArray(n)?r=p._data(e,t,p.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=p.queue(e,t),r=n.length,i=n.shift(),s=p._queueHooks(e,t),o=function(){p.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return p._data(e,n)||p._data(e,n,{empty:p.Callbacks("once memory").add(function(){p._removeData(e,t+"queue"),p._removeData(e,n)})})}}),p.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?p.queue(this[0],e):void 0===t?this:this.each(function(){var n=p.queue(this,e,t);p._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=p.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(o--)n=p._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var X=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],$=function(e,t){return e=t||e,"none"===p.css(e,"display")||!p.contains(e.ownerDocument,e)},J=p.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=null==n;if("object"===p.type(n)){i=!0;for(u in n)p.access(e,t,u,n[u],!0,s,o)}else if(void 0!==r&&(i=!0,p.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(p(e),n)})),t))for(;a>u;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)));return i?e:f?t.call(e):a?t(e[0],n):s},K=/^(?:checkbox|radio)$/i;!function(){var e=N.createDocumentFragment(),t=N.createElement("div"),n=N.createElement("input");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",c.leadingWhitespace=3===t.firstChild.nodeType,c.tbody=!t.getElementsByTagName("tbody").length,c.htmlSerialize=!!t.getElementsByTagName("link").length,c.html5Clone="<:nav></:nav>"!==N.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,e.appendChild(n),c.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",c.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,c.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){c.noCloneEvent=!1}),t.cloneNode(!0).click()),null==c.deleteExpando){c.deleteExpando=!0;try{delete t.test}catch(r){c.deleteExpando=!1}}e=t=n=null}(),function(){var t,n,r=N.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(c[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),c[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var Q=/^(?:input|select|textarea)$/i,G=/^key/,Y=/^(?:mouse|contextmenu)|click/,Z=/^(?:focusinfocus|focusoutblur)$/,et=/^([^.]*)(?:\.(.+)|)$/;p.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p._data(e);if(g){n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=p.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof p===j||e&&p.event.triggered===e.type?void 0:p.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(M)||[""],u=t.length;while(u--)s=et.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort(),d&&(f=p.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=p.event.special[d]||{},c=p.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&p.expr.match.needsContext.test(i),namespace:v.join(".")},a),(h=o[d])||(h=o[d]=[],h.delegateCount=0,f.setup&&f.setup.call(e,r,v,l)!==!1||(e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l))),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),p.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p.hasData(e)&&p._data(e);if(g&&(l=g.events)){t=(t||"").match(M)||[""],f=t.length;while(f--)if(u=et.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort(),d){c=p.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,h=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&m!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,v,g.handle)!==!1||p.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)p.event.remove(e,d+t[f],n,r,!0);p.isEmptyObject(l)&&(delete g.handle,p._removeData(e,"events"))}},trigger:function(t,n,r,i){var s,o,u,a,l,c,h,d=[r||N],v=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(u=c=r=r||N,3!==r.nodeType&&8!==r.nodeType&&!Z.test(v+p.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),o=v.indexOf(":")<0&&"on"+v,t=t[p.expando]?t:new p.Event(v,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:p.makeArray(n,[t]),l=p.event.special[v]||{},i||!l.trigger||l.trigger.apply(r,n)!==!1)){if(!i&&!l.noBubble&&!p.isWindow(r)){for(a=l.delegateType||v,Z.test(a+v)||(u=u.parentNode);u;u=u.parentNode)d.push(u),c=u;c===(r.ownerDocument||N)&&d.push(c.defaultView||c.parentWindow||e)}h=0;while((u=d[h++])&&!t.isPropagationStopped())t.type=h>1?a:l.bindType||v,s=(p._data(u,"events")||{})[t.type]&&p._data(u,"handle"),s&&s.apply(u,n),s=o&&u[o],s&&s.apply&&p.acceptData(u)&&(t.result=s.apply(u,n),t.result===!1&&t.preventDefault());if(t.type=v,!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),n)===!1)&&p.acceptData(r)&&o&&r[v]&&!p.isWindow(r)){c=r[o],c&&(r[o]=null),p.event.triggered=v;try{r[v]()}catch(g){}p.event.triggered=void 0,c&&(r[o]=c)}return t.result}},dispatch:function(e){e=p.event.fix(e);var t,n,i,s,o,u=[],a=r.call(arguments),f=(p._data(this,"events")||{})[e.type]||[],l=p.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=p.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((p.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||"click"!==e.type))for(;a!=this;a=a.parentNode||this)if(1===a.nodeType&&(a.disabled!==!0||"click"!==e.type)){for(i=[],s=0;u>s;s++)r=t[s],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?p(n,this).index(a)>=0:p.find(n,this,null,[a]).length),i[n]&&i.push(r);i.length&&o.push({elem:a,handlers:i})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[p.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=Y.test(i)?this.mouseHooks:G.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new p.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||N),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||N,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==rt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===rt()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return p.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=p.extend(new p.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?p.event.trigger(i,null,t):p.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=N.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===j&&(e[r]=null),e.detachEvent(r,n))},p.Event=function(e,t){return this instanceof p.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&(e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault())?tt:nt):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),void (this[p.expando]=!0)):new p.Event(e,t)},p.Event.prototype={isDefaultPrevented:nt,isPropagationStopped:nt,isImmediatePropagationStopped:nt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=tt,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=tt,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!p.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),c.submitBubbles||(p.event.special.submit={setup:function(){return p.nodeName(this,"form")?!1:void p.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=p.nodeName(t,"input")||p.nodeName(t,"button")?t.form:void 0;n&&!p._data(n,"submitBubbles")&&(p.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),p._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&p.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return p.nodeName(this,"form")?!1:void p.event.remove(this,"._submit")}}),c.changeBubbles||(p.event.special.change={setup:function(){return Q.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(p.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,e,!0)})),!1):void p.event.add(this,"beforeactivate._change",function(e){var t=e.target;Q.test(t.nodeName)&&!p._data(t,"changeBubbles")&&(p.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||p.event.simulate("change",this.parentNode,e,!0)}),p._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return p.event.remove(this,"._change"),!Q.test(this.nodeName)}}),c.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){p.event.simulate(t,e.target,p.event.fix(e),!0)};p.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=p._data(r,t);i||r.addEventListener(e,n,!0),p._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=p._data(r,t)-1;i?p._data(r,t,i):(r.removeEventListener(e,n,!0),p._removeData(r,t))}}}),p.fn.extend({on:function(e,t,n,r,i){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=nt;else if(!r)return this;return 1===i&&(o=r,r=function(e){return p().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=p.guid++)),this.each(function(){p.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,p(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=nt),this.each(function(){p.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?p.event.trigger(e,t,n,!0):void 0}});var st="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ot=/ jQuery\d+="(?:null|\d+)"/g,ut=new RegExp("<(?:"+st+")[\\s/>]","i"),at=/^\s+/,ft=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lt=/<([\w:]+)/,ct=/<tbody/i,ht=/<|&#?\w+;/,pt=/<(?:script|style|link)/i,dt=/checked\s*(?:[^=]|=\s*.checked.)/i,vt=/^$|\/(?:java|ecma)script/i,mt=/^true\/(.*)/,gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,yt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:c.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},bt=it(N),wt=bt.appendChild(N.createElement("div"));yt.optgroup=yt.option,yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,p.extend({clone:function(e,t,n){var r,i,s,o,u,a=p.contains(e.ownerDocument,e);if(c.html5Clone||p.isXMLDoc(e)||!ut.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(wt.innerHTML=e.outerHTML,wt.removeChild(s=wt.firstChild)),!(c.noCloneEvent&&c.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||p.isXMLDoc(e)))for(r=Et(s),u=Et(e),o=0;null!=(i=u[o]);++o)r[o]&&Lt(i,r[o]);if(t)if(n)for(u=u||Et(e),r=r||Et(s),o=0;null!=(i=u[o]);o++)kt(i,r[o]);else kt(e,s);return r=Et(s,"script"),r.length>0&&Ct(r,!a&&Et(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){for(var i,s,o,u,a,f,l,h=e.length,d=it(t),v=[],m=0;h>m;m++)if(s=e[m],s||0===s)if("object"===p.type(s))p.merge(v,s.nodeType?[s]:s);else if(ht.test(s)){u=u||d.appendChild(t.createElement("div")),a=(lt.exec(s)||["",""])[1].toLowerCase(),l=yt[a]||yt._default,u.innerHTML=l[1]+s.replace(ft,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!c.leadingWhitespace&&at.test(s)&&v.push(t.createTextNode(at.exec(s)[0])),!c.tbody){s="table"!==a||ct.test(s)?"<table>"!==l[1]||ct.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)p.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}p.merge(v,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=d.lastChild}else v.push(t.createTextNode(s));u&&d.removeChild(u),c.appendChecked||p.grep(Et(v,"input"),St),m=0;while(s=v[m++])if((!r||-1===p.inArray(s,r))&&(o=p.contains(s.ownerDocument,s),u=Et(d.appendChild(s),"script"),o&&Ct(u),n)){i=0;while(s=u[i++])vt.test(s.type||"")&&n.push(s)}return u=null,d},cleanData:function(e,t){for(var r,i,s,o,u=0,a=p.expando,f=p.cache,l=c.deleteExpando,h=p.event.special;null!=(r=e[u]);u++)if((t||p.acceptData(r))&&(s=r[a],o=s&&f[s])){if(o.events)for(i in o.events)h[i]?p.event.remove(r,i):p.removeEvent(r,i,o.handle);f[s]&&(delete f[s],l?delete r[a]:typeof r.removeAttribute!==j?r.removeAttribute(a):r[a]=null,n.push(s))}}}),p.fn.extend({text:function(e){return J(this,function(e){return void 0===e?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=xt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=xt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?p.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||p.cleanData(Et(n)),n.parentNode&&(t&&p.contains(n.ownerDocument,n)&&Ct(Et(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){1===e.nodeType&&p.cleanData(Et(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&p.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ot,""):void 0;if(!("string"!=typeof e||pt.test(e)||!c.htmlSerialize&&ut.test(e)||!c.leadingWhitespace&&at.test(e)||yt[(lt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(ft,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(p.cleanData(Et(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,p.cleanData(Et(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,s,o,u,a,f=0,l=this.length,h=this,d=l-1,v=e[0],m=p.isFunction(v);if(m||l>1&&"string"==typeof v&&!c.checkClone&&dt.test(v))return this.each(function(n){var r=h.eq(n);m&&(e[0]=v.call(this,n,r.html())),r.domManip(e,t)});if(l&&(a=p.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(o=p.map(Et(a,"script"),Tt),s=o.length;l>f;f++)r=a,f!==d&&(r=p.clone(r,!0,!0),s&&p.merge(o,Et(r,"script"))),t.call(this[f],r,f);if(s)for(u=o[o.length-1].ownerDocument,p.map(o,Nt),f=0;s>f;f++)r=o[f],vt.test(r.type||"")&&!p._data(r,"globalEval")&&p.contains(u,r)&&(r.src?p._evalUrl&&p._evalUrl(r.src):p.globalEval((r.text||r.textContent||r.innerHTML||"").replace(gt,"")));a=n=null}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){for(var n,r=0,i=[],o=p(e),u=o.length-1;u>=r;r++)n=r===u?this:this.clone(!0),p(o[r])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var At,Ot={};!function(){var e,t,n=N.createElement("div"),r="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],e.style.cssText="float:left;opacity:.5",c.opacity=/^0.5/.test(e.style.opacity),c.cssFloat=!!e.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle="content-box"===n.style.backgroundClip,e=n=null,c.shrinkWrapBlocks=function(){var e,n,i,s;if(null==t){if(e=N.getElementsByTagName("body")[0],!e)return;s="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=N.createElement("div"),i=N.createElement("div"),e.appendChild(n).appendChild(i),t=!1,typeof i.style.zoom!==j&&(i.style.cssText=r+";width:1px;padding:1px;zoom:1",i.innerHTML="<div></div>",i.firstChild.style.width="5px",t=3!==i.offsetWidth),e.removeChild(n),e=n=i=null}return t}}();var Dt=/^margin/,Pt=new RegExp("^("+X+")(?!px)[a-z%]+$","i"),Ht,Bt,jt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Ht=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Bt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Ht(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||p.contains(e.ownerDocument,e)||(o=p.style(e,t)),Pt.test(o)&&Dt.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),void 0===o?o:o+""}):N.documentElement.currentStyle&&(Ht=function(e){return e.currentStyle},Bt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Ht(e),o=n?n[t]:void 0,null==o&&u&&u[t]&&(o=u[t]),Pt.test(o)&&!jt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left="fontSize"===t?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),void 0===o?o:o+""||"auto"}),!function(){function l(){var t,n,u=N.getElementsByTagName("body")[0];u&&(t=N.createElement("div"),n=N.createElement("div"),t.style.cssText=a,u.appendChild(t).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",p.swap(u,null!=u.style.zoom?{zoom:1}:{},function(){r=4===n.offsetWidth}),i=!0,s=!1,o=!0,e.getComputedStyle&&(s="1%"!==(e.getComputedStyle(n,null)||{}).top,i="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width),u.removeChild(t),n=u=null)}var t,n,r,i,s,o,u=N.createElement("div"),a="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",f="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=u.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",c.opacity=/^0.5/.test(t.style.opacity),c.cssFloat=!!t.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle="content-box"===u.style.backgroundClip,t=u=null,p.extend(c,{reliableHiddenOffsets:function(){if(null!=n)return n;var e,t,r,i=N.createElement("div"),s=N.getElementsByTagName("body")[0];if(s)return i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=N.createElement("div"),e.style.cssText=a,s.appendChild(e).appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=i.getElementsByTagName("td"),t[0].style.cssText="padding:0;margin:0;border:0;display:none",r=0===t[0].offsetHeight,t[0].style.display="",t[1].style.display="none",n=r&&0===t[0].offsetHeight,s.removeChild(e),i=s=null,n},boxSizing:function(){return null==r&&l(),r},boxSizingReliable:function(){return null==i&&l(),i},pixelPosition:function(){return null==s&&l(),s},reliableMarginRight:function(){var t,n,r,i;if(null==o&&e.getComputedStyle){if(t=N.getElementsByTagName("body")[0],!t)return;n=N.createElement("div"),r=N.createElement("div"),n.style.cssText=a,t.appendChild(n).appendChild(r),i=r.appendChild(N.createElement("div")),i.style.cssText=r.style.cssText=f,i.style.marginRight=i.style.width="0",r.style.width="1px",o=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight),t.removeChild(n)}return o}})}(),p.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var It=/alpha\([^)]*\)/i,qt=/opacity\s*=\s*([^)]*)/,Rt=/^(none|table(?!-c[ea]).+)/,Ut=new RegExp("^("+X+")(.*)$","i"),zt=new RegExp("^([+-])=("+X+")","i"),Wt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:0,fontWeight:400},Vt=["Webkit","O","Moz","ms"];p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Bt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":c.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,u=p.camelCase(t),a=e.style;if(t=p.cssProps[u]||(p.cssProps[u]=$t(a,u)),o=p.cssHooks[t]||p.cssHooks[u],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:a[t];if(s=typeof n,"string"===s&&(i=zt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(p.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||p.cssNumber[u]||(n+="px"),c.clearCloneStyle||""!==n||0!==t.indexOf("background")||(a[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,r)))))try{a[t]="",a[t]=n}catch(f){}}},css:function(e,t,n,r){var i,s,o,u=p.camelCase(t);return t=p.cssProps[u]||(p.cssProps[u]=$t(e.style,u)),o=p.cssHooks[t]||p.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=Bt(e,t,r)),"normal"===s&&t in Xt&&(s=Xt[t]),""===n||n?(i=parseFloat(s),n===!0||p.isNumeric(i)?i||0:s):s}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&Rt.test(p.css(e,"display"))?p.swap(e,Wt,function(){return Gt(e,t,r)}):Gt(e,t,r):void 0},set:function(e,n,r){var i=r&&Ht(e);return Kt(e,n,r?Qt(e,t,r,c.boxSizing()&&"border-box"===p.css(e,"boxSizing",!1,i),i):0)}}}),c.opacity||(p.cssHooks.opacity={get:function(e,t){return qt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=p.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===p.trim(s.replace(It,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=It.test(s)?s.replace(It,i):s+" "+i)}}),p.cssHooks.marginRight=Ft(c.reliableMarginRight,function(e,t){return t?p.swap(e,{display:"inline-block"},Bt,[e,"marginRight"]):void 0}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+V[r]+t]=s[r]||s[r-2]||s[0];return i}},Dt.test(e)||(p.cssHooks[e+t].set=Kt)}),p.fn.extend({css:function(e,t){return J(this,function(e,t,n){var r,i,s={},o=0;if(p.isArray(t)){for(r=Ht(e),i=t.length;i>o;o++)s[t[o]]=p.css(e,t[o],!1,r);return s}return void 0!==n?p.style(e,t,n):p.css(e,t)},e,t,arguments.length>1)},show:function(){return Jt(this,!0)},hide:function(){return Jt(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){$(this)?p(this).show():p(this).hide()})}}),p.Tween=Yt,Yt.prototype={constructor:Yt,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(p.cssNumber[n]?"":"px")},cur:function(){var e=Yt.propHooks[this.prop];return e&&e.get?e.get(this):Yt.propHooks._default.get(this)},run:function(e){var t,n=Yt.propHooks[this.prop];return this.pos=t=this.options.duration?p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yt.propHooks._default.set(this),this}},Yt.prototype.init.prototype=Yt.prototype,Yt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=p.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[p.cssProps[e.prop]]||p.cssHooks[e.prop])?p.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yt.propHooks.scrollTop=Yt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},p.fx=Yt.prototype.init,p.fx.step={};var Zt,en,tn=/^(?:toggle|show|hide)$/,nn=new RegExp("^(?:([+-])=|)("+X+")([a-z%]*)$","i"),rn=/queueHooks$/,sn=[ln],on={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=nn.exec(t),s=i&&i[3]||(p.cssNumber[e]?"":"px"),o=(p.cssNumber[e]||"px"!==s&&+r)&&nn.exec(p.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,p.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};p.Animation=p.extend(hn,{tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],on[n]=on[n]||[],on[n].unshift(t)},prefilter:function(e,t){t?sn.unshift(e):sn.push(e)}}),p.speed=function(e,t,n){var r=e&&"object"==typeof e?p.extend({},e):{complete:n||!n&&t||p.isFunction(e)&&e,duration:e,easing:n&&t||t&&!p.isFunction(t)&&t};return r.duration=p.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in p.fx.speeds?p.fx.speeds[r.duration]:p.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){p.isFunction(r.old)&&r.old.call(this),r.queue&&p.dequeue(this,r.queue)},r},p.fn.extend({fadeTo:function(e,t,n,r){return this.filter($).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=p.isEmptyObject(e),s=p.speed(t,n,r),o=function(){var t=hn(this,p.extend({},e),s);(i||p._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=p.timers,o=p._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&rn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&p.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=p._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=p.timers,o=r?r.length:0;for(n.finish=!0,p.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(e,t){var n=p.fn[t];p.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(an(t,!0),e,r,i)}}),p.each({slideDown:an("show"),slideUp:an("hide"),slideToggle:an("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),p.timers=[],p.fx.tick=function(){var e,t=p.timers,n=0;for(Zt=p.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||p.fx.stop(),Zt=void 0},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){en||(en=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(en),en=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(e,t){return e=p.fx?p.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i=N.createElement("div");i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=i.getElementsByTagName("a")[0],n=N.createElement("select"),r=n.appendChild(N.createElement("option")),t=i.getElementsByTagName("input")[0],e.style.cssText="top:1px",c.getSetAttribute="t"!==i.className,c.style=/top/.test(e.getAttribute("style")),c.hrefNormalized="/a"===e.getAttribute("href"),c.checkOn=!!t.value,c.optSelected=r.selected,c.enctype=!!N.createElement("form").enctype,n.disabled=!0,c.optDisabled=!r.disabled,t=N.createElement("input"),t.setAttribute("value",""),c.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),c.radioValue="t"===t.value,e=t=n=r=i=null}();var pn=/\r/g;p.fn.extend({val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=p.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,p(this).val()):e,null==i?i="":"number"==typeof i?i+="":p.isArray(i)&&(i=p.map(i,function(e){return null==e?"":e+""})),t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=p.valHooks[i.type]||p.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(pn,""):null==n?"":n)}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return null!=t?t:p.text(e)}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(c.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&p.nodeName(n.parentNode,"optgroup"))){if(t=p(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=p.makeArray(t),o=i.length;while(o--)if(r=i[o],p.inArray(p.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){return p.isArray(t)?e.checked=p.inArray(p(e).val(),t)>=0:void 0}},c.checkOn||(p.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var dn,vn,mn=p.expr.attrHandle,gn=/^(?:checked|selected)$/i,yn=c.getSetAttribute,bn=c.input;p.fn.extend({attr:function(e,t){return J(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===j?p.prop(e,t,n):(1===s&&p.isXMLDoc(e)||(t=t.toLowerCase(),r=p.attrHooks[t]||(p.expr.match.bool.test(t)?vn:dn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=p.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void p.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(M);if(s&&1===e.nodeType)while(n=s[i++])r=p.propFix[n]||n,p.expr.match.bool.test(n)?bn&&yn||!gn.test(n)?e[r]=!1:e[p.camelCase("default-"+n)]=e[r]=!1:p.attr(e,n,""),e.removeAttribute(yn?n:r)},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&"radio"===t&&p.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),vn={set:function(e,t,n){return t===!1?p.removeAttr(e,n):bn&&yn||!gn.test(n)?e.setAttribute(!yn&&p.propFix[n]||n,n):e[p.camelCase("default-"+n)]=e[n]=!0,n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var n=mn[t]||p.find.attr;mn[t]=bn&&yn||!gn.test(t)?function(e,t,r){var i,s;return r||(s=mn[t],mn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,mn[t]=s),i}:function(e,t,n){return n?void 0:e[p.camelCase("default-"+t)]?t.toLowerCase():null}}),bn&&yn||(p.attrHooks.value={set:function(e,t,n){return p.nodeName(e,"input")?void (e.defaultValue=t):dn&&dn.set(e,t,n)}}),yn||(dn={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},mn.id=mn.name=mn.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},p.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:dn.set},p.attrHooks.contenteditable={set:function(e,t,n){dn.set(e,""===t?!1:t,n)}},p.each(["width","height"],function(e,t){p.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),c.style||(p.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var wn=/^(?:input|select|textarea|button|object)$/i,En=/^(?:a|area)$/i;p.fn.extend({prop:function(e,t){return J(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return e=p.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),p.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!p.isXMLDoc(e),s&&(t=p.propFix[t]||t,i=p.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=p.find.attr(e,"tabindex");return t?parseInt(t,10):wn.test(e.nodeName)||En.test(e.nodeName)&&e.href?0:-1}}}}),c.hrefNormalized||p.each(["href","src"],function(e,t){p.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),c.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),c.enctype||(p.propFix.enctype="encoding");var Sn=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f="string"==typeof e&&e;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,this.className))});if(f)for(t=(e||"").match(M)||[];a>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Sn," "):" ")){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=p.trim(r),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=0===arguments.length||"string"==typeof e&&e;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,this.className))});if(f)for(t=(e||"").match(M)||[];a>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Sn," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?p.trim(r):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(p.isFunction(e)?function(n){p(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n){var t,r=0,i=p(this),s=e.match(M)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else(n===j||"boolean"===n)&&(this.className&&p._data(this,"__className__",this.className),this.className=this.className||e===!1?"":p._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Sn," ").indexOf(t)>=0)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var xn=p.now(),Tn=/\?/,Nn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;p.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=p.trim(t+"");return i&&!p.trim(i.replace(Nn,function(e,t,i,s){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():p.error("Invalid JSON: "+t)},p.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+t),n};var Cn,kn,Ln=/#.*$/,An=/([?&])_=[^&]*/,On=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_n=/^(?:GET|HEAD)$/,Dn=/^\/\//,Pn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hn={},Bn={},jn="*/".concat("*");try{kn=location.href}catch(Fn){kn=N.createElement("a"),kn.href="",kn=kn.href}Cn=Pn.exec(kn.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kn,type:"GET",isLocal:Mn.test(Cn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Rn(Rn(e,p.ajaxSettings),t):Rn(p.ajaxSettings,e)},ajaxPrefilter:In(Hn),ajaxTransport:In(Bn),ajax:function(e,t){function x(e,t,n,r){var f,g,y,w,S,x=t;2!==b&&(b=2,o&&clearTimeout(o),a=void 0,s=r||"",E.readyState=e>0?4:0,f=e>=200&&300>e||304===e,n&&(w=Un(l,E,n)),w=zn(l,w,E,f),f?(l.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(p.lastModified[i]=S),S=E.getResponseHeader("etag"),S&&(p.etag[i]=S)),204===e||"HEAD"===l.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,f=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),E.status=e,E.statusText=(t||x)+"",f?d.resolveWith(c,[g,x,E]):d.rejectWith(c,[E,x,y]),E.statusCode(m),m=void 0,u&&h.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?g:y]),v.fireWith(c,[E,x]),u&&(h.trigger("ajaxComplete",[E,l]),--p.active||p.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,s,o,u,a,f,l=p.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?p(c):p.event,d=p.Deferred(),v=p.Callbacks("once memory"),m=l.statusCode||{},g={},y={},b=0,w="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!f){f={};while(t=On.exec(s))f[t[1].toLowerCase()]=t[2]}t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||w;return a&&a.abort(t),x(0,t),this}};if(d.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||kn)+"").replace(Ln,"").replace(Dn,Cn[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=p.trim(l.dataType||"*").toLowerCase().match(M)||[""],null==l.crossDomain&&(n=Pn.exec(l.url.toLowerCase()),l.crossDomain=!(!n||n[1]===Cn[1]&&n[2]===Cn[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Cn[3]||("http:"===Cn[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=p.param(l.data,l.traditional)),qn(Hn,l,t,E),2===b)return E;u=l.global,u&&0===p.active++&&p.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!_n.test(l.type),i=l.url,l.hasContent||(l.data&&(i=l.url+=(Tn.test(i)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=An.test(i)?i.replace(An,"$1_="+xn++):i+(Tn.test(i)?"&":"?")+"_="+xn++)),l.ifModified&&(p.lastModified[i]&&E.setRequestHeader("If-Modified-Since",p.lastModified[i]),p.etag[i]&&E.setRequestHeader("If-None-Match",p.etag[i])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+jn+"; q=0.01":""):l.accepts["*"]);for(r in l.headers)E.setRequestHeader(r,l.headers[r]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&2!==b){w="abort";for(r in{success:1,error:1,complete:1})E[r](l[r]);if(a=qn(Bn,l,t,E)){E.readyState=1,u&&h.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{b=1,a.send(g,x)}catch(S){if(!(2>b))throw S;x(-1,S)}}else x(-1,"No Transport");return E}return E.abort()},getJSON:function(e,t,n){return p.get(e,t,n,"json")},getScript:function(e,t){return p.get(e,void 0,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,n,r,i){return p.isFunction(n)&&(i=i||r,r=n,n=void 0),p.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},p.fn.extend({wrapAll:function(e){if(p.isFunction(e))return this.each(function(t){p(this).wrapAll(e.call(this,t))});if(this[0]){var t=p(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(p.isFunction(e)?function(t){p(this).wrapInner(e.call(this,t))}:function(){var t=p(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(n){p(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!c.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||p.css(e,"display"))},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var Wn=/%20/g,Xn=/\[\]$/,Vn=/\r?\n/g,$n=/^(?:submit|button|image|reset|file)$/i,Jn=/^(?:input|select|textarea|keygen)/i;p.param=function(e,t){var n,r=[],i=function(e,t){t=p.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){i(this.name,this.value)});else for(n in e)Kn(n,e[n],t,i);return r.join("&").replace(Wn,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&Jn.test(this.nodeName)&&!$n.test(e)&&(this.checked||!K.test(e))}).map(function(e,t){var n=p(this).val();return null==n?null:p.isArray(n)?p.map(n,function(e){return{name:t.name,value:e.replace(Vn,"\r\n")}}):{name:t.name,value:n.replace(Vn,"\r\n")}}).get()}}),p.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zn()||er()}:Zn;var Qn=0,Gn={},Yn=p.ajaxSettings.xhr();e.ActiveXObject&&p(e).on("unload",function(){for(var e in Gn)Gn[e](void 0,!0)}),c.cors=!!Yn&&"withCredentials"in Yn,Yn=c.ajax=!!Yn,Yn&&p.ajaxTransport(function(e){if(!e.crossDomain||c.cors){var t;return{send:function(n,r){var i,s=e.xhr(),o=++Qn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&s.setRequestHeader(i,n[i]+"");s.send(e.hasContent&&e.data||null),t=function(n,i){var u,a,f;if(t&&(i||4===s.readyState))if(delete Gn[o],t=void 0,s.onreadystatechange=p.noop,i)4!==s.readyState&&s.abort();else{f={},u=s.status,"string"==typeof s.responseText&&(f.text=s.responseText);try{a=s.statusText}catch(l){a=""}u||!e.isLocal||e.crossDomain?1223===u&&(u=204):u=f.text?200:404}f&&r(u,a,f,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Gn[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),p.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=N.head||p("head")[0]||N.documentElement;return{send:function(r,i){t=N.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var tr=[],nr=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tr.pop()||p.expando+"_"+xn++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(nr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nr.test(t.data)&&"data");return u||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(nr,"$1"+i):t.jsonp!==!1&&(t.url+=(Tn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||p.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,tr.push(i)),o&&p.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),p.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||N;var r=E.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p.buildFragment([e],t,i),i&&i.length&&p(i).remove(),p.merge([],r.childNodes))};var rr=p.fn.load;p.fn.load=function(e,t,n){if("string"!=typeof e&&rr)return rr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=e.slice(u,e.length),e=e.slice(0,u)),p.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&p.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?p("<div>").append(p.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length};var ir=e.document.documentElement;p.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=p.css(e,"position"),c=p(e),h={};"static"===l&&(e.style.position="relative"),u=c.offset(),s=p.css(e,"top"),a=p.css(e,"left"),f=("absolute"===l||"fixed"===l)&&p.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),p.isFunction(t)&&(t=t.call(e,n,u)),null!=t.top&&(h.top=t.top-u.top+o),null!=t.left&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},p.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(s)return t=s.documentElement,p.contains(t,i)?(typeof i.getBoundingClientRect!==j&&(r=i.getBoundingClientRect()),n=sr(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===p.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(n=e.offset()),n.top+=p.css(e[0],"borderTopWidth",!0),n.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-p.css(r,"marginTop",!0),left:t.left-n.left-p.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||ir;while(e&&!p.nodeName(e,"html")&&"static"===p.css(e,"position"))e=e.offsetParent;return e||ir})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);p.fn[e]=function(r){return J(this,function(e,r,i){var s=sr(e);return void 0===i?s?t in s?s[t]:s.document.documentElement[r]:e[r]:void (s?s.scrollTo(n?p(s).scrollLeft():i,n?i:p(s).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=Ft(c.pixelPosition,function(e,n){return n?(n=Bt(e,t),Pt.test(n)?p(e).position()[t]+"px":n):void 0})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){p.fn[r]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return J(this,function(t,n,r){var i;return p.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?p.css(t,n,o):p.style(t,n,r,o)},t,s?r:void 0,s,null)}})}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var or=e.jQuery,ur=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=ur),t&&e.jQuery===p&&(e.jQuery=or),p},typeof t===j&&(e.jQuery=e.$=p),p}),define("lib-app/jquery",function(){}),define("storymaps/common/utils/Polyfills",[],function(){return{apply:function(){typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Date.now||(Date.now=function(){return(new Date).valueOf()}),Object.keys=Object.keys||function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}}}}),define("storymaps/common/utils/CommonHelper",["dojo/cookie","dojo/has","esri/urlUtils","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Polygon","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/OpenStreetMapLayer"],function(e,t,n,r,i,s,o,u,a,f){return{isMobile:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)},switchToBuilder:function(){document.location.search.match(/appid/)?document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+document.location.search+"&edit"+document.location.hash:document.location.search.slice(-1)=="?"?document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+"edit"+document.location.hash:document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+"?edit"+document.location.hash},isArcGISHosted:function(){return/(\/)([a-zA-Z0-9]+(\/))*(apps\/|home\/)([a-zA-Z0-9\-\_]+\/)/.test(document.location.pathname)},browserSupportHistory:function(){return!!window.history&&!!history.pushState},getUrlParams:function(){var e=n.urlToObject(document.location.search).query;return e?e:!this.browserSupportHistory()&&!e?n.urlToObject(document.location.hash).query||{}:{}},getWebmapID:function(e){var t=this.getUrlParams();if(app.indexCfg&&app.indexCfg.webmap)return app.indexCfg.webmap;if(this.isArcGISHosted()||!e)return t.webmap;if(app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0])return t.webmap},getAppID:function(e){var t=this.getUrlParams();if(app.indexCfg&&app.indexCfg.appid)return app.indexCfg.appid;if(this.isArcGISHosted()||!e)return t.appid;if(app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0])return t.appid},getGraphicsLayerByName:function(e,t){var n;for(var r=0;r<e.graphicsLayerIds.length;r++){n=e.getLayer(e.graphicsLayerIds[r]);if(n.name==t)return n}return null},getWebMapExtentFromItem:function(e){if(!e.extent||e.extent.length!=2)return null;var t=r.geographicToWebMercator(new i(e.extent[0][0],e.extent[0][1])),n=r.geographicToWebMercator(new i(e.extent[1][0],e.extent[1][1]));return new s({xmax:n.x,xmin:t.x,ymax:n.y,ymin:t.y,spatialReference:{wkid:102100}})},serializeExtentToItem:function(e){if(!e||!e.spatialReference)return null;var t=e.spatialReference.wkid==4326?e:r.webMercatorToGeographic(e);return[[Math.round(t.xmin*1e4)/1e4,Math.round(t.ymin*1e4)/1e4],[Math.round(t.xmax*1e4)/1e4,Math.round(t.ymax*1e4)/1e4]]},serializedExtentEquals:function(e,t){return e&&t&&e.length==t.length&&e.length==2&&e[0][0]==t[0][0]&&e[0][1]==t[0][1]&&e[1][0]==t[1][0]&&e[1][1]==t[1][1]},cloneLayer:function(e){return e.url&&e.url.match(/virtualearth\./)?new a("http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"):e instanceof a?new a(e.url):e instanceof u?new u(e.url):e.id=="OpenStreetMap"?new f:new a("http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer")},extentToPolygon:function(e){var t=new o(e.spatialReference);return t.addRing([[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]),t},getFirstLevelWhereExtentFit:function(e,t){var n=t.width,r=t.height,i=t._params.lods;if(!i)return-1;for(var s=i.length-1;s>=0;s--)if(n*t._params.lods[s].resolution>e.getWidth()&&r*t._params.lods[s].resolution>e.getHeight())return s;return-1},getPortalUser:function(){var t=e("esri_auth");if(!t)return;t=JSON.parse(t.replace('"ssl":undefined','"ssl":""'));if(t.urlKey&&t.customBaseUrl&&(t.urlKey+"."+t.customBaseUrl).toLowerCase()!=document.location.hostname.toLowerCase())return;return t?t.email:null},getPortalRole:function(){var t=e("esri_auth");if(!t)return;t=JSON.parse(t.replace('"ssl":undefined','"ssl":""'));if(t.urlKey&&t.customBaseUrl&&(t.urlKey+"."+t.customBaseUrl).toLowerCase()!=document.location.hostname.toLowerCase())return;return t?t.role:null},getAppViewModeURL:function(){return document.location.protocol+"//"+document.location.host+document.location.pathname+"?appid="+app.data.getWebAppItem().id},getWebmapViewerLinkFromSharingURL:function(e){var t=e.split("/sharing/")[0];return t+"/home/webmap/viewer.html"},getItemURL:function(e,t){var n=e.split("/sharing/")[0];return n+"/home/item.html?id="+t},getMyContentURL:function(e){return e.split("/sharing/")[0]+"/home/content.html"},browserSupportAttachementUsingFileReader:function(){return!!window.FileReader&&!!window.FormData&&!!this.browserSupportCanvas()&&!!window.Blob},browserSupportCanvas:function(){var e=document.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},browserSupportFileReaderBinaryString:function(){if(!window.FileReader)return!1;var e=new window.FileReader;return"readAsArrayBuffer"in e},getBinaryStringFromArrayBuffer:function(e){var t=new Uint8Array(e),n="";for(var r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n},addCSSRule:function(e,n,r){var i="head";if(t("ie")<=8)return;r&&(i=r.contents().find("head"));if(n){var s=$(i).find("#"+n).eq(0);if(s.length){s.html(e);return}}$("<style>").prop("type","text/css").attr("id",n).html(e).appendTo(i)},hex2rgba:function(e,t){if(!e||e==="")return"";var n=e.replace("#","").match(/../g),r=[],i;for(i in n)r.push(parseInt(n[i],16));return r.push(t),"rgba("+r.join()+")"},prependURLHTTP:function(e){return!e||e===""||e.match(/^mailto:/)?e:/^(https?:\/\/)|^(\/\/)/i.test(e)?e:"http://"+e},checkImageURL:function(e){return e&&e.match(/((\.png)|(\.jp(e)?g))$/i)},createGeocoderOptions:function(){var e=!1,t=dojo.clone(app.indexCfg.geocodeServices);dojo.forEach(t,function(t){t.url.indexOf(".arcgis.com/arcgis/rest/services/World/GeocodeServer")>-1&&(e=!0,t.name="Esri World Geocoder",t.outFields="Match_addr, stAddr, City",t.singleLineFieldName="SingleLine",t.esri=t.placefinding=!0)}),t=dojo.filter(t,function(e){return esri.isDefined(e.singleLineFieldName)&&esri.isDefined(e.placefinding)&&e.placefinding});var n;if(e)for(var r=0;r<t.length;r++)if(esri.isDefined(t[r].esri)&&t[r].esri===!0){n=r;break}var i={autoNavigate:!0,autoComplete:e,theme:"simpleGeocoder"};return e&&(i.minCharacters=0,i.maxLocations=5,i.searchDelay=100),e&&n===0?(i.arcgisGeocoder=t.splice(0,1)[0],t.length>0&&(i.geocoders=t)):(i.arcgisGeocoder=!1,i.geocoders=t),i},debounce:function(e,t,n){var r;return function(){var i=this,s=arguments;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,s)},t),n&&!r&&e.apply(i,s)}},findDifferences:function(e,t){var n=[],r=["this"];return function(e,t){if(e.constructor==Array)if(!t||t.constructor!=Array||t.length!=e.length)n.push({Property:r.join(""),ObjectA:e,ObjectB:t});else for(var i=0;i<e.length;i++)r.push("["+i.toString()+"]"),arguments.callee(e[i],t[i]),r.pop();else if(e.constructor==Object||e.constructor!=Number&&e.constructor!=String&&e.constructor!=Date&&e.constructor!=RegExp&&e.constructor!=Function&&e.constructor!=Boolean)for(var s in e)r.push("."+s),t[s]?e[s]&&e[s].constructor!=Function&&arguments.callee(e[s],t[s]):n.push({Property:r.join(""),ObjectA:e[s],ObjectB:null}),r.pop();else e.constructor!=Function&&e!=t&&n.push({Property:r.join(""),ObjectA:e,ObjectB:t})}(e,t),n}}}),define("storymaps/common/builder/BuilderHelper",[],function(){return{getBlankAppJSON:function(){return{itemType:"text",guid:null,name:null,type:"Web Mapping Application",typeKeywords:app.cfg.WEBAPP_KEYWORD_GENERIC.concat(app.cfg.WEBAPP_KEYWORD_APP),description:null,tags:app.cfg.WEBAPP_TAG,snippet:null,thumbnail:"thumbnail/ago_downloaded.png",documentation:null,extent:[],lastModified:-1,spatialReference:null,accessInformation:null,licenseInfo:null,culture:"en-us",properties:null,size:116,appCategories:[],industries:[],languages:[],largeThumbnail:null,banner:null,screenshots:[],listed:!1,ownerFolder:null,commentsEnabled:!0,numComments:0,numRatings:0,avgRating:0,numViews:1}},getBlankWebmapJSON:function(){return{item:{id:"",guid:null,name:null,type:"Web Map",typeKeywords:app.cfg.WEBMAP_KEYWORD,description:null,tags:app.cfg.WEBMAP_TAG,snippet:null,thumbnail:"thumbnail/ago_downloaded.png",documentation:null,extent:[[-180,-90],[180,90]],spatialReference:null,accessInformation:null,licenseInfo:null,culture:"en-us",properties:null,url:null,size:233,appCategories:[],industries:[],languages:[],largeThumbnail:null,banner:null,screenshots:[],listed:!1,ownerFolder:null,commentsEnabled:!0,numComments:0,numRatings:0,avgRating:0,numViews:1},itemData:{operationalLayers:[],baseMap:{baseMapLayers:[{id:"defaultBasemap",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}],title:"Topographic"},version:"1.9"}}}}}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&e.type==="file"||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.determineEventType=function(e){return this.deviceIsAndroid&&e.tagName.toLowerCase()==="select"?"mousedown":"click"},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange&&e.type.indexOf("date")!==0&&e.type!=="time"?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(this.deviceIsIOS){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(e){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))this.trackingClick=!1,this.targetElement=null;return!0},FastClick.prototype.findControl=function(e){return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,r,i,s,o=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=o.tagName.toLowerCase();if(r==="label"){t=this.findControl(o);if(t){this.focus(o);if(this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o)){if(e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&r==="input")return this.targetElement=null,!1;this.focus(o);if(!this.deviceIsIOS4||r!=="select")this.targetElement=null,e.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){i=o.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop)return!0}return this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t,n;if(typeof window.ontouchstart=="undefined")return!0;n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(n){if(!FastClick.prototype.deviceIsAndroid)return!0;t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(n>31&&window.innerWidth<=window.screen.width)return!0}}return e.style.msTouchAction==="none"?!0:!1},FastClick.attach=function(e){return new FastClick(e)},typeof define!="undefined"&&define.amd?define("lib-app/jquery.fastClick",[],function(){return FastClick}):typeof module!="undefined"&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){function t(t){t&&3===t.which||(e(i).remove(),e(s).each(function(){var r=n(e(this)),i={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",i)),t.isDefaultPrevented()||r.removeClass("open").trigger("hidden.bs.dropdown",i))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.2.0",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;i.trigger("focus"),s.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),o=i.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&i.find(s).trigger("focus"),r.trigger("click");var u=" li:not(.divider):visible a",a=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(a.length){var f=a.index(a.filter(":focus"));38==t.keyCode&&f>0&&f--,40==t.keyCode&&f<a.length-1&&f++,~f||(f=0),a.eq(f).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s+', [role="menu"], [role="listbox"]',o.prototype.keydown)}(jQuery),+function(e){function t(t,r){return this.each(function(){var s=e(this),u=s.data("bs.modal"),a=e.extend({},n.DEFAULTS,s.data(),"object"==typeof t&&t);u||s.data("bs.modal",u=new n(this,a)),"string"==typeof t?u[t](r):a.show&&u.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.2.0",n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(300):n.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}else t&&t()},n.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),s=r.data("bs.tooltip"),o="object"==typeof t&&t;(s||"destroy"!=t)&&(s||r.data("bs.tooltip",s=new n(this,o)),"string"==typeof t&&s[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.2.0",n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",a="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var r=this,i=this.tip(),s=this.getUID(this.type);this.setContent(),i.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&i.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,a=u.test(o);a&&(o=o.replace(u,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var f=this.getPosition(),l=i[0].offsetWidth,c=i[0].offsetHeight;if(a){var h=o,p=this.$element.parent(),d=this.getPosition(p);o="bottom"==o&&f.top+f.height+c-d.scroll>d.height?"top":"top"==o&&f.top-d.scroll-c<0?"bottom":"right"==o&&f.right+l>d.width?"left":"left"==o&&f.left-l<d.left?"right":o,i.removeClass(h).addClass(o)}var v=this.getCalculatedOffset(o,f,l,c);this.applyPlacement(v,o);var m=function(){r.$element.trigger("shown.bs."+r.type),r.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",m).emulateTransitionEnd(150):m()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top=t.top+o,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;"top"==n&&f!=s&&(t.top=t.top+s-f);var l=this.getViewportAdjustedDelta(n,t,a,f);l.left?t.left+=l.left:t.top+=l.top;var c=l.left?2*l.left-i+a:2*l.top-s+f,h=l.left?"left":"top",p=l.left?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(c,r[0][p],h)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(){function t(){"in"!=n.hoverState&&r.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,r=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(i),i.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName;return e.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():null,{scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:r?e(window).width():t.outerWidth(),height:r?e(window).height():t.outerHeight()},r?{top:0,left:0}:t.offset())},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.width&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),s=r.data("bs.tab");s||r.data("bs.tab",s=new n(this)),"string"==typeof t&&s[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.2.0",n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});if(t.trigger(s),!s.isDefaultPrevented()){var o=e(r);this.activate(t.closest("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},n.prototype.activate=function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one("bsTransitionEnd",i).emulateTransitionEnd(150):i(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(n){n.preventDefault(),t.call(e(this),"show")})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),s=r.data("bs.collapse"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);!s&&o.toggle&&"show"==t&&(t=!t),s||r.data("bs.collapse",s=new n(this,o)),"string"==typeof t&&s[t]()})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};n.VERSION="3.2.0",n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n=e.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.$parent&&this.$parent.find("> .panel > .in");if(r&&r.length){var i=r.data("bs.collapse");if(i&&i.transitioning)return;t.call(r,"hide"),i||r.data("bs.collapse",null)}var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var u=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(350)[s](this.$element[0][u])}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(350):r.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var r=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var r,i=e(this),s=i.attr("data-target")||n.preventDefault()||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),o=e(s),u=o.data("bs.collapse"),a=u?"toggle":i.data(),f=i.attr("data-parent"),l=f&&e(f);u&&u.transitioning||(l&&l.find('[data-toggle="collapse"][data-parent="'+f+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),t.call(o,a)})}(jQuery),+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),define("lib-app/bootstrap/js/bootstrap.min",function(){}),typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){var n=e.History=e.History||{};if(typeof n.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");n.Adapter={handlers:{},_uid:1,uid:function(e){return e._uid||(e._uid=n.Adapter._uid++)},bind:function(e,t,r){var i=n.Adapter.uid(e);n.Adapter.handlers[i]=n.Adapter.handlers[i]||{},n.Adapter.handlers[i][t]=n.Adapter.handlers[i][t]||[],n.Adapter.handlers[i][t].push(r),e["on"+t]=function(e,t){return function(r){n.Adapter.trigger(e,t,r)}}(e,t)},trigger:function(e,t,r){r=r||{};var i=n.Adapter.uid(e),s,o;n.Adapter.handlers[i]=n.Adapter.handlers[i]||{},n.Adapter.handlers[i][t]=n.Adapter.handlers[i][t]||[];for(s=0,o=n.Adapter.handlers[i][t].length;s<o;++s)n.Adapter.handlers[i][t][s].apply(this,[r])},extractEventData:function(e,n){var r=n&&n[e]||t;return r},onDomLoad:function(t){var n=e.setTimeout(function(){t()},2e3);e.onload=function(){clearTimeout(n),t()}}},typeof n.init!="undefined"&&n.init()}(window),function(e,t){var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,s=e.setInterval||s,o=e.History=e.History||{};if(typeof o.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(typeof o.initHtml4.initialized!="undefined")return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex(),n;return n=e===t,n},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return o.isLastHash(e)?!1:(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){var t=null;return typeof e=="undefined"?t=o.savedHashes[o.savedHashes.length-1]:e<0?t=o.savedHashes[o.savedHashes.length+e]:t=o.savedHashes[e],t},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var r=o.getHashByState(e),i;return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=r,!0},o.discardedState=function(e){var t=o.getHashByState(e),n;return n=o.discardedStates[t]||!1,n},o.discardedHash=function(e){var t=o.discardedHashes[e]||!1;return t},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t="",r,i,u,a,f=Boolean(o.getHash());return o.isInternetExplorer()?(r="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",r),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),u="",a=!1,o.checkerFunction=function(){if(a)return!1;a=!0;var n=o.getHash(),r=o.getHash(i.contentWindow.document);return n!==t?(t=n,r!==n&&(u=r=n,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(n)),o.Adapter.trigger(e,"hashchange")):r!==u&&(u=r,f&&r===""?o.back():o.setHash(r,!1)),a=!1,!0}):o.checkerFunction=function(){var n=o.getHash()||"";return n!==t&&(t=n,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(s(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(n),i=null,s=null,u=null,a;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(s=o.getHashByState(i),a=o.discardedState(i),a?(o.getHashByIndex(-2)===o.getHashByState(a.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,"%");if(o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getHash(),c=o.expectedStateId==s.id;return o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),u===f?(o.busy(!1),!1):(o.saveState(s),c||o.Adapter.trigger(e,"statechange"),!o.isHashEqual(u,l)&&!o.isHashEqual(u,o.getShortUrl(o.getLocationHref()))&&o.setHash(u,!1),o.busy(!1),!0)},o.replaceState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,"%");if(o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getStateByIndex(-2);return o.discardState(a,s,l),u===f?(o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),o.saveState(s),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(s.data,s.title,s.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},typeof o.init!="undefined"&&o.init()}(window),function(e,t){var n=e.console||t,r=e.document,i=e.navigator,s=!1,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.clearInterval,l=e.JSON,c=e.alert,h=e.History=e.History||{},p=e.history;try{s=e.sessionStorage,s.setItem("TEST","1"),s.removeItem("TEST")}catch(d){s=!1}l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode;if(typeof h.init!="undefined")throw new Error("History.js Core has already been loaded...");h.init=function(e){return typeof h.Adapter=="undefined"?!1:(typeof h.initCore!="undefined"&&h.initCore(),typeof h.initHtml4!="undefined"&&h.initHtml4(),!0)},h.initCore=function(d){if(typeof h.initCore.initialized!="undefined")return!1;h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||r.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(typeof t!="undefined"&&t!==null){for(e=0;e<t.length;e++)f(t[e]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var e=typeof n!="undefined"&&typeof n.log!="undefined"&&typeof n.log.apply!="undefined",t=r.getElementById("log"),i,s,o,u,a;e?(u=Array.prototype.slice.call(arguments),i=u.shift(),typeof n.debug!="undefined"?n.debug.apply(n,[i,u]):n.log.apply(n,[i,u])):i="\n"+arguments[0]+"\n";for(s=1,o=arguments.length;s<o;++s){a=arguments[s];if(typeof a=="object"&&typeof l!="undefined")try{a=l.stringify(a)}catch(f){}i+="\n"+a+"\n"}return t?(t.value+=i+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):e||c(i),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached=typeof h.getInternetExplorerMajorVersion.cached!="undefined"?h.getInternetExplorerMajorVersion.cached:function(){var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");while((t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0]);return e>4?e:!1}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached=typeof h.isInternetExplorer.cached!="undefined"?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},h.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);if(r.location.port||!1)e+=":"+r.location.port;return e+="/",e},h.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";return e.length===1&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e=h.getState(!1,!1),t=(e||{}).url||h.getLocationHref(),n;return n=t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"}),n},h.getBasePageUrl=function(){var e=h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},h.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=typeof t=="undefined"?!0:t,/[a-z]+\:\/\//.test(e)||(r==="/"?n=h.getRootUrl()+e.replace(/^\/+/,""):r==="#"?n=h.getPageUrl().replace(/#.*/,"")+e:r==="?"?n=h.getPageUrl().replace(/[\?#].*/,"")+e:t?n=h.getBaseUrl()+e.replace(/^(\.\/)+/,""):n=h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),r=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),t},h.getLocationHref=function(e){return e=e||r,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:e.URL.indexOf("#")==-1&&e.location.href.indexOf("#")!=-1?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){typeof e=="undefined"&&(e=!0),typeof t=="undefined"&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t=h.extractId(e.url),n;if(!t){n=h.getStateString(e);if(typeof h.stateToId[n]!="undefined")t=h.stateToId[n];else if(typeof h.store.stateToId[n]!="undefined")t=h.store.stateToId[n];else{for(;;){t=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof h.idToState[t]=="undefined"&&typeof h.store.idToState[t]=="undefined")break}h.stateToId[n]=t,h.idToState[t]=e}}return t},h.normalizeState=function(e){var t,n;if(!e||typeof e!="object")e={};if(typeof e.normalized!="undefined")return e;if(!e.data||typeof e.data!="object")e.data={};return t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&h.options.disableSuid!==!0&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t},h.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=h.normalizeState(r),r},h.getStateById=function(e){e=String(e);var n=h.idToState[e]||h.store.idToState[e]||t;return n},h.getStateString=function(e){var t,n,r;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},r=l.stringify(n),r},h.getStateId=function(e){var t,n;return t=h.normalizeState(e),n=t.id,n},h.getHashByState=function(e){var t,n;return t=h.normalizeState(e),n=t.hash,n},h.extractId=function(e){var t,n,r,i;return e.indexOf("#")!=-1?i=e.split("#")[0]:i=e,n=/(.*)\&_suid=([0-9]+)$/.exec(i),r=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},h.extractState=function(e,t){var n=null,r,i;return t=t||!1,r=h.extractId(e),r&&(n=h.getStateById(r)),n||(i=h.getFullUrl(e),r=h.getIdByUrl(i)||!1,r&&(n=h.getStateById(r)),!n&&t&&!h.isTraditionalAnchor(e)&&(n=h.createStateObject(null,null,i))),n},h.getIdByUrl=function(e){var n=h.urlToId[e]||h.store.urlToId[e]||t;return n},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var t=!1,n;return n=h.extractState(e.url),t=n&&n.id!==e.id,t},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t=!1,n,r,i;return h.savedStates.length&&(n=e.id,r=h.getLastSavedState(),i=r.id,t=n===i),t},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return typeof e=="undefined"?t=h.savedStates[h.savedStates.length-1]:e<0?t=h.savedStates[h.savedStates.length+e]:t=h.savedStates[e],t},h.getCurrentIndex=function(){var e=null;return h.savedStates.length<1?e=0:e=h.savedStates.length-1,e},h.getHash=function(e){var t=h.getLocationHref(e),n;return n=h.getHashByUrl(t),n},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t),t},h.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},h.setHash=function(e,t){var n,i;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),n=h.extractState(e,!0),n&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(i=h.getPageUrl(),h.pushState(null,null,i+"#"+e,!1)):r.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t),t},h.setTitle=function(e){var t=e.title,n;t||(n=h.getStateByIndex(0),n&&n.url===e.url&&(t=n.title||h.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return r.title=t,h},h.queues=[],h.busy=function(e){typeof e!="undefined"?h.busy.flag=e:typeof h.busy.flag=="undefined"&&(h.busy.flag=!1);if(!h.busy.flag){u(h.busy.timeout);var t=function(){var e,n,r;if(h.busy.flag)return;for(e=h.queues.length-1;e>=0;--e){n=h.queues[e];if(n.length===0)continue;r=n.shift(),h.fireQueueItem(r),h.busy.timeout=o(t,h.options.busyDelay)}};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return typeof e=="function"&&(e={callback:e}),typeof t!="undefined"&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(u(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t=h.extractState(h.getLocationHref()),n;if(!h.isLastSavedState(t))return n=t,n||(n=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h;return},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h};if(h.emulated.pushState){var v=function(){};h.pushState=h.pushState||v,h.replaceState=h.replaceState||v}else h.onPopState=function(t,n){var r=!1,i=!1,s,o;return h.doubleCheckComplete(),s=h.getHash(),s?(o=h.extractState(s||h.getLocationHref(),!0),o?h.replaceState(o.data,o.title,o.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(r=h.Adapter.extractEventData("state",t,n)||!1,r?i=h.getStateById(r):h.expectedStateId?i=h.getStateById(h.expectedStateId):i=h.extractState(h.getLocationHref()),i||(i=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(i)?(h.busy(!1),!1):(h.storeState(i),h.saveState(i),h.setTitle(i),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.pushState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.replaceState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0};if(s){try{h.store=l.parse(s.getItem("History.store"))||{}}catch(m){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),s&&(h.onUnload=function(){var e,t,n;try{e=l.parse(s.getItem("History.store"))||{}}catch(r){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState){if(!h.idToState.hasOwnProperty(t))continue;e.idToState[t]=h.idToState[t]}for(t in h.urlToId){if(!h.urlToId.hasOwnProperty(t))continue;e.urlToId[t]=h.urlToId[t]}for(t in h.stateToId){if(!h.stateToId.hasOwnProperty(t))continue;e.stateToId[t]=h.stateToId[t]}h.store=e,h.normalizeStore(),n=l.stringify(e);try{s.setItem("History.store",n)}catch(i){if(i.code!==DOMException.QUOTA_EXCEEDED_ERR)throw i;s.length&&(s.removeItem("History.store"),s.setItem("History.store",n))}},h.intervalList.push(a(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload));if(!h.emulated.pushState){h.bugs.safariPoll&&h.intervalList.push(a(h.safariStatePoll,h.options.safariPollInterval));if(i.vendor==="Apple Computer, Inc."||(i.appCodeName||"")==="Mozilla")h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})}},(!h.options||!h.options.delayInit)&&h.init()}(window),define("lib-app/history.min",function(){}),define("storymaps/common/Core",["lib-build/css!lib-app/bootstrap/css/bootstrap.min","lib-build/css!./Core","lib-app/jquery","./utils/Polyfills","esri/map","esri/arcgis/Portal","esri/arcgis/utils","./utils/CommonHelper","esri/urlUtils","./builder/BuilderHelper","dojo/has","esri/IdentityManager","esri/arcgis/OAuthInfo","esri/config","esri/tasks/GeometryService","esri/request","dojo/topic","dojo/on","dojo/_base/lang","dojo/Deferred","dojo/DeferredList","dojo/query","lib-app/jquery.fastClick","lib-app/bootstrap/js/bootstrap.min","lib-app/history.min"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){function C(e,t){var n=!1,r=!1;console.log("common.core.Core - init",t),T=e,Z(),t!=null&&(n=N.fromScratch!=null||N.fromscratch!=null,r=N.fromGallery!=null),!u.browserSupportHistory()&&(n||r)&&N.ieredirected==null&&(window.location=document.location.protocol+"//"+document.location.host+document.location.pathname+"#"+document.location.search+"&ieredirected"),u.isArcGISHosted()?app.indexCfg={}:et()||(app.indexCfg={proxyurl:app.indexCfg.proxyurl,sharingurl:app.indexCfg.sharingurl,username:app.indexCfg.username,password:app.indexCfg.password});if(!T.checkConfigFileIsOK()){B("invalidConfig");return}document.title=app.cfg.TPL_NAME,l("touch")&&$("body").addClass("hasTouch"),S.attach(document.body),window!=window.top&&$("body").addClass("isEmbed"),y.mixin(app,{map:null,maps:{},portal:null,builder:t,isDirectCreation:n,isGalleryCreation:r,isDirectCreationFirstSave:n,isLoading:!0,loadingTimeout:null}),app.appCfg.useStandardHeader&&require(["storymaps/common/ui/header/Desktop"],function(e){app.ui.headerDesktop=new e($("#headerDesktop"),app.isInBuilder)});if(!T.init(this))return;!et()&&app.indexCfg.username&&app.indexCfg.password&&g(c,"dialog-create",function(){g(c.dialog,"show",function(){c.dialog.txtUser_.set("value",app.indexCfg.username),c.dialog.txtPwd_.set("value",app.indexCfg.password),c.dialog.btnSubmit_.onClick()})}),Q();if(!app.indexCfg.sharingurl){var i=document.location.pathname.indexOf("/apps/");i==-1&&(i=document.location.pathname.indexOf("/home/"));if(i!=-1){var a=location.pathname.substr(0,i);app.indexCfg.sharingurl="//"+location.host+a+"/sharing/content/items",app.indexCfg.proxyurl="//"+location.host+a+"/sharing/proxy"}else app.indexCfg.sharingurl=app.cfg.DEFAULT_SHARING_URL}app.indexCfg.sharingurl.match(/^http/)?o.arcgisUrl=app.indexCfg.sharingurl:o.arcgisUrl=location.protocol+app.indexCfg.sharingurl,app.indexCfg.proxyurl||(app.indexCfg.proxyurl=app.cfg.DEFAULT_PROXY_URL),p.defaults.io.proxyUrl=location.protocol+app.indexCfg.proxyurl,c&&c.setProtocolErrorHandler(function(){return!0}),app.isInBuilder&&app.cfg.CORS_SERVER&&$.each(app.cfg.CORS_SERVER,function(e,t){p.defaults.io.corsEnabledServers.push(t)}),p.defaults.io.timeout=app.isInBuilder?app.cfg.TIMEOUT_BUILDER_REQUEST:app.cfg.TIMEOUT_VIEWER_REQUEST,$.fn.modal.Constructor.prototype.enforceFocus=function(){},app.ui.headerDesktop&&app.ui.headerDesktop.initLocalization(),T.initLocalization(),$(window).resize(U),$("form").bind("keydown",function(e){if(e.keyCode==13)return!1}),g(c,"dialog-create",W),m.subscribe("CORE_UPDATE_UI",q),m.subscribe("CORE_RESIZE",U),m.subscribe("CORE_UPDATE_EXTENT",F),app.portal=new s.Portal(app.indexCfg.sharingurl.split("/sharing/")[0]),app.portal.on("load",function(){tt();if(app.indexCfg.oAuthAppId){var e=new h({appId:app.indexCfg.oAuthAppId,popup:!1});c.registerOAuthInfos([e]),c.checkSignInStatus(e.portalUrl).then(function(){t?k():O().then(k)},function(){c.getCredential(e.portalUrl)})}else k()})}function k(){console.log("common.core.Core - initStep2");var e=u.getAppID(et()),t=u.getWebmapID(et()),n=app.appCfg?!!app.appCfg.supportWebmapPreviewAGOL:!0;if(e){L(e);return}if(t&&!n){u.isArcGISHosted()?window.location=app.cfg.HELP_URL:M(t);return}if(app.isDirectCreation&&et()&&!u.getPortalUser()){J();return}if(app.isDirectCreation){O().then(function(){D(),T.startFromScratch(),P()});return}u.isArcGISHosted()?window.location=app.cfg.HELP_URL:N.appid&&(!app.indexCfg.authorizedOwners||!app.indexCfg.authorizedOwners[0])?B("unspecifiedConfigOwner"):B("invalidConfigNoApp")}function L(e){console.log("common.core.Core - loadWebMappingApp - appId:",e);var t=N.forceLogin!==undefined;t||app.isInBuilder?O().then(function(){A(e)},function(){B("notAuthorized")}):A(e)}function A(e){o.getItem(e).then(function(e){if(!e){B("appLoadingFail");return}var t=e.item,n=e.itemData;app.data.setWebAppItem(t),app.data.getWebAppData().set(n);if(app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]){var r=t.results[0].owner,i=!1;r&&(i=$.inArray(r,app.indexCfg.authorizedOwners)!=-1);if(!i){B("invalidConfigOwner");return}}if(app.isInBuilder&&et()&&!app.data.userIsAppOwner()){B("notAuthorized");return}T.webAppConfigLoaded();var s=app.appCfg?!!app.appCfg.useWebmapInApp:!0,o=app.data.getWebAppData().getWebmap()||u.getWebmapID(et());o&&s?M(o):s?u.getPortalUser()||!et()&&app.data.getWebAppData().isBlank()?K():app.data.getWebAppData().isBlank()?B("appLoadingFail"):M(app.data.getWebAppData().getViews()[0].cfg.webmap.id):(D(),T.loadWebmapFromData())},function(e){e&&e.httpCode==400?B("invalidApp"):e&&e.httpCode==403?B("notAuthorized"):B("appLoadingFail")})}function O(){var e=new b;return g(c,"dialog-create",X),app.portal.signIn().then(function(){tt(),e.resolve()},function(){e.reject()}),e}function M(e){T.loadFirstWebmap(e).then(y.hitch(this,function(e){_(e)}),y.hitch(this,function(){B("createMap")}))}function _(){console.log("common.core.Core - webMapInitCallback"),console.error("FATAL ERROR");return}function D(){var e=app.indexCfg.title||app.data.getWebAppData().getTitle(),t=app.indexCfg.subtitle||app.data.getWebAppData().getSubtitle(),n=app.data.getWebAppData().getColors();app.ui.headerDesktop&&app.ui.headerDesktop.init(!app.isInBuilder&&(app.cfg.EMBED||N.embed||N.embed===""),e,t,R(),n[0],z),app.appCfg.useAppTitleAsPageTitle&&(document.title=e?$("<div>"+e+"</div>").text():app.cfg.TPL_NAME)}function P(){console.log("common.core.Core - initApp"),U(),location.hash&&u.browserSupportHistory()&&(location.hash="map"),window.onhashchange=function(){T.prepareMobileViewSwitch(),T.onHashChange()},T.appInitComplete(),app.builder&&app.builder.appInitComplete()}function H(){app.isLoading=!1,$("#loadingIndicator, #loadingMessage").addClass("fadeOut").fadeOut(400),$("#loadingOverlay").fadeOut(800)}function B(e,t,n){var r=i18n.viewer.errors[e];G(),$("#loadingIndicator").hide(),r=r.replace(/%TPL_NAME%/g,app.cfg.TPL_NAME),e=="notAuthorized"&&app.indexCfg.oAuthAppId&&(r+='<div><button class="btn btn-sm btn-default" onclick="esri.id.destroyCredentials(); window.location.reload();">'+i18n.viewer.errors.signOut+"</button></div>"),e=="appLoadingFail"?$("#loadingMessage").html('<div id="loadingRetry"> <button type="button" class="btn btn-naked btn-sm" onclick="document.location.reload()">'+i18n.viewer.loading.failButton+" </button>"+"</div>").hide().fadeIn(1200,function(){$("#loadingMessage").addClass("loaded")}):$("#loadingMessage").hide(),l("ie")==8&&($("#fatalError-icon").css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='_resources/icons/warning-icon.png', sizingMethod='scale')",backgroundPosition:"2px 3px",width:78}),$("#fatalError-msg").css({paddingLeft:5})),$("#fatalError .error-msg").html(r),n||$("#fatalError").show()}function j(e){$("#fatalError .error-msg").html(i18n.viewer.errors[e])}function F(e){if(!e||!e.spatialReference||!app.map||!app.map.extent.spatialReference||!app.map.spatialReference){var t=new b;return t.resolve(),t}if(app.map.spatialReference.wkid==e.spatialReference.wkid)return app.map.setExtent(e);var n=new b;return p.defaults.geometryService.project([e],app.map.spatialReference,function(e){if(!e||!e[0])return;app.map.setExtent(e[0]),n.resolve()}),n}function I(e,t){e&&(app.map.spatialReference.wkid!=102100&&app.map.spatialReference.wkid!=4326?p.defaults.geometryService.project([t],app.map.spatialReference,function(e){if(!e||!e[0])return;app.map.extent.contains(e[0])||app.map.centerAt(e[0])}):app.map.extent.contains(t)||app.map.centerAt(t))}function q(){console.log("common.core.Core - updateUI");var e=app.data.getWebAppData().getColors();app.ui.headerDesktop&&(app.ui.headerDesktop.setTitleAndSubtitle(app.data.getWebAppData().getTitle()||(app.data.getWebMap()?app.data.getWebMap().item.title:""),app.data.getWebAppData().getSubtitle()||(app.data.getWebMap()?app.data.getWebMap().item.snippet:"")),app.ui.headerDesktop.update(R(),e[0])),T.updateUI(),U()}function R(){return{logoURL:app.data.getWebAppData().getLogoURL(),logoTarget:app.data.getWebAppData().getLogoTarget(),linkText:app.data.getWebAppData().getHeaderLinkText(),linkURL:app.data.getWebAppData().getHeaderLinkURL(),socialBtn:app.data.getWebAppData().getSocial()}}function U(){var e=$("body").width(),t=$("body").height(),n=0,r=0,i=N.forceDesktop!==undefined||app.indexCfg.forceDesktop,s=N.forceMobile!==undefined||app.indexCfg.forceMobile,o=e<=768||s,u=$(".centerLink").length?$(".centerLink").hasClass("current"):!0;i&&(o=!1),o?$("body").addClass("mobile-view"):$("body").removeClass("mobile-view"),$(".mainViewAboveMap").each(function(e,t){var r=$(t);n+=r.is(":visible")?r.outerHeight():0}),$(".mainViewSideMap").each(function(e,t){var n=$(t);r+=n.is(":visible")?n.outerWidth():0}),app.ui.headerDesktop&&app.ui.headerDesktop.resize(e),app.initScreenIsOpen&&($("#header").css("display",o?"none":"block"),$("#fatalError").css("display",o?"block":"none")),app.initScreenIsOpen||$("#contentPanel").height(t-n),T.resize({isMobileView:o,isOnMobileMapView:u,width:e,height:t-n}),app.isInBuilder&&app.builder.resize({isMobileView:o});if(app.map&&(!o||o&&u))try{app.map.resize()}catch(a){}o?$(".mapContainer .esriControlsBR > div").first().removeClass("logo-med").addClass("logo-sm"):$(".mapContainer .esriControlsBR > div").first().removeClass("logo-sm").addClass("logo-med")}function z(){return!app.isInBuilder&&(!et()&&!!u.getAppID(et())||et()&&app.data.userIsAppOwner())}function W(){$(".esriSignInDialog td label").siblings("br").css("display","none"),$(".esriSignInDialog .dijitDialogPaneContentArea div:nth(1)").css("display","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("padding","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("margin-bottom","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitValidationContainer").css("display","none"),$(".esriSignInDialog .esriErrorMsg").css("margin-top","10px"),$(".esriSignInDialog").find(".dijitDialogTitleBar").find(".dijitDialogTitle").first().html(i18n.viewer.signin.title),c._arcgisUrl&&($(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().css("display","none"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().after("<div id='dijitDialogPaneContentAreaLoginText'>"+i18n.viewer.signin.explainViewer.replace("%PORTAL_LINK%","<a href='http://"+c._arcgisUrl+"' title='"+c._arcgisUrl+"' target='_blank'>"+c._arcgisUrl+"</a>")+"</div>"))}function X(){c._arcgisUrl&&$(".esriSignInDialog").find("#dijitDialogPaneContentAreaLoginText").html(i18n.viewer.signin.explainBuilder.replace("%PORTAL_LINK%","<a href='http://"+c._arcgisUrl+"' title='"+c._arcgisUrl+"' target='_blank'>"+c._arcgisUrl+"</a>"))}function V(){$("#header").css("display","inherit"),$(".mobileView").css("display","inherit"),$("#fatalError").css("display","none"),$("#loadingOverlay").css("top","0px"),Q(),U()}function J(){window.location=o.arcgisUrl.split("/sharing/")[0]+"/home/signin.html?returnUrl="+encodeURIComponent(document.location.href)}function K(){window.location=document.location.href+"&fromGallery"}function Q(){app.loadingTimeout=setTimeout(Y,app.cfg.TIMEOUT_VIEWER_LOAD)}function G(){typeof app!="undefined"&&app.loadingTimeout&&(clearTimeout(app.loadingTimeout),app.loadingTimeout=null)}function Y(){if(c&&c.dialog&&c.dialog._alreadyInitialized&&!c.loadingTimeoutAlreadyFired){clearTimeout(app.loadingTimeout),Q(),c._busy||(c.loadingTimeoutAlreadyFired=!0);return}$("#loadingMessage").html('<div class="mainMessage">'+i18n.viewer.loading.long+"<br />"+i18n.viewer.loading.long2+"</div>").fadeIn("slow",function(){$("#loadingMessage").addClass("loaded")})}function Z(){E("#fatalError .error-title")[0].innerHTML=i18n.viewer.errors.boxTitle}function et(){return x.environment!=["TPL","ENV","DEV"].join("_")}function tt(){console.log("common.core.Core - parsePortalConfig");if(!app.portal)return;var e,t;commonConfig&&commonConfig.CommonHelperServices&&(commonConfig.CommonHelperServices.geometry&&commonConfig.CommonHelperServices.geometry&&(e=location.protocol+commonConfig.CommonHelperServices.geometry.url),commonConfig.CommonHelperServices.geocode&&commonConfig.CommonHelperServices.geocode.length&&commonConfig.CommonHelperServices.geocode[0].url?t=commonConfig.CommonHelperServices.geocode:commonConfig.CommonHelperServices.geocode&&commonConfig.CommonHelperServices.geocode&&commonConfig.CommonHelperServices.geocode.url&&(t=[{name:"myGeocoder",url:commonConfig.CommonHelperServices.geocode.url}])),app.portal.helperServices&&(app.portal.helperServices.geometry&&app.portal.helperServices.geometry.url&&(e=app.portal.helperServices.geometry.url),app.portal.helperServices.geocode&&app.portal.helperServices.geocode.length&&app.portal.helperServices.geocode[0].url&&(t=app.portal.helperServices.geocode)),p.defaults.geometryService=new d(e),app.indexCfg.geocodeServices=t,app.portal.bingKey&&(commonConfig.bingMapsKey=app.portal.bingKey),app.portal.isPortal&&app.cfg&&app.cfg.AUTHORIZED_IMPORT_SOURCE&&(app.cfg.AUTHORIZED_IMPORT_SOURCE.featureService=!1),app.isPortal=!!app.portal.isPortal}function nt(){G(),app.isInitializing=!0,app.initScreenIsOpen=!0,B("notConfiguredMobile",null,!0),setTimeout(U,50)}function rt(){$("#initPopup").modal("hide"),app.initScreenIsOpen=!1}function it(){j("notConfiguredDesktop"),$("#loadingOverlay").css("top","0px"),$("#header").css("display","inherit"),$("#fatalError").css("display","block"),app.initScreenIsOpen=!1,U()}var x={environment:"TPL_ENV_PRODUCTION"},T=null,N=u.getUrlParams();return r.apply(),{init:C,isProd:et,appInitComplete:P,displayApp:H,loadWebMap:M,handleWindowResize:U,hasSwitchBuilderButton:z,initPopupPrepare:nt,initPopupComplete:rt,initPopupFail:it,zoomToDeviceLocation:I,getHeaderUserCfg:R,cleanLoadingTimeout:G,initError:B,prepareAppForWebmapReload:V,replaceInitErrorMessage:j,portalLogin:O}}),define("lib-build/css!storymaps/tpl/core/MainView",[],function(){}),define("text",{}),define("lib-build/tpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("lib-build/tpl!storymaps/tpl/ui/MainMediaContainerMap",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="mainMediaContainer">\r\n    <div class="mapContainer" data-webmapid="'+((__t=webmapid)==null?"":__t)+'" data-temporary="'+((__t=isTemporary)==null?"":__t)+'"></div>\r\n	<div class="overview"></div>\r\n	<div class="legend"></div>\r\n	<div class="geocoder"></div>\r\n	<div class="mainStageErrorContainer">\r\n		<div class="error"></div>\r\n	</div>\r\n</div>';return __p}}),define("lib-build/tpl!storymaps/tpl/ui/MainMediaContainerImage",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="mainMediaContainer">\r\n    <div class="imgContainer" data-src="'+((__t=url)==null?"":__t)+'" style="background-image: url('+((__t=url)==null?"":__t)+');"></div>\r\n</div>';return __p}}),define("lib-build/tpl!storymaps/tpl/ui/MainMediaContainerEmbed",[],function(){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="mainMediaContainer">\r\n    ',url?__p+='\r\n    	<iframe class="embedContainer" data-src="'+((__t=url)==null?"":__t)+'" data-unload="'+((__t=unload)==null?"":__t)+'" allowfullscreen="1"></iframe>\r\n    ':frameTag&&(__p+="\r\n    	"+((__t=frameTag)==null?"":__t)+"\r\n    "),__p+="\r\n</div>";return __p}}),define("lib-build/css!storymaps/tpl/ui/MainStage",[],function(){}),define("storymaps/tpl/core/WebApplicationData",["dojo/_base/lang"],function(e){var t={},n={values:{}};return{set:function(r){t=e.clone(r);if(!r||!r.values)return;n=r},get:function(){var t=e.clone(n);return t.values.template=t.values.template||{},t.values.template={name:t.values.template.name||app.cfg.TPL_NAME,createdWith:t.values.template.createdWith||app.version,editedWith:app.version},t},getOriginalData:function(){return t},isBlank:function(){return Object.keys(n.values).length<=1||app.data.getStorySections().length===0},getBlank:function(){return{values:{webmap:t.values.webmap}}},getSourceWebmap:function(){return t&&t.values?t.values.webmap:null},cleanWebAppAfterInitialization:function(){var e=!1,r=[t,n];for(var i=0;i<r.length;i++){var s=r[i];s&&s.values&&(s.values.order&&(delete s.values.order,e=!0),s.values.firstRecordAsIntro&&(delete s.values.firstRecordAsIntro,e=!0),s.values.fieldsOverride&&(delete s.values.fieldsOverride,e=!0),s.values.sourceLayer&&(delete s.values.sourceLayer,e=!0))}return e},restoreOriginalData:function(){this.set(t)},updateAfterSave:function(){t=e.clone(n)},getTemplateVersion:function(){return n.values.template?n.values.template.editedWith:null},getTemplateCreation:function(){return n.values.template?n.values.template.creaedWith:null},getWebmap:function(){return n.values.webmap},setWebmap:function(e){n.values.webmap=e},getTitle:function(){return app.isDirectCreationFirstSave&&this.getStorySections().length>0&&this.setTitle($("<div>"+this.getStorySections()[0].title+"</div>").text()),n.values.title},setTitle:function(e){n.values.title=e},getSubtitle:function(){return n.values.subtitle},setSubtitle:function(e){n.values.subtitle=e},getSettings:function(){return n.values.settings||{}},getLayout:function(){return this.getSettings().layout||{}},setLayout:function(e){n.values.settings=n.values.settings||{},n.values.settings.layout=e},getLayoutId:function(){return this.getLayout().id||app.cfg.LAYOUTS[0].id},getLayoutProperties:function(e){var t=e||this.getLayoutId(),n=$.grep(app.cfg.LAYOUTS,function(e){return e.id==t});return n&&n.length?n[0]:null},getLayoutOptions:function(){var t=e.clone(this.getSettings().layoutOptions)||{};return t.layoutCfg=this.getLayoutCfg(),t.socialLinks=t.socialLinks===undefined?!1:t.socialLinks,t},setLayoutOptions:function(e){n.values.settings=n.values.settings||{},n.values.settings.layoutOptions=e},getLocateBtn:function(){return this.getLayoutOptions().locateBtn||!1},getLayoutCfg:function(){var e={},t=(this.getSettings().layoutOptions||{}).layoutCfg||{},n=this.getLayoutProperties();return n?(n.sizes&&(e.sizeLbl=t.size||"medium",e.sizeVal=n.sizes[e.sizeLbl]),n.positions&&(e.position=t.position||n.positions[0]),e):null},getTheme:function(){return this.getSettings().theme||{}},setTheme:function(e){n.values.settings=n.values.settings||{},n.values.settings.theme=e},getColors:function(){var e=this.getTheme().colors;if(e&&e.name){var t=$.grep(this.getLayoutProperties().themes,function(t){return t.name==e.name});return t&&t.length?t[0]:e}return this.getLayoutProperties().themes[0]},getFonts:function(){var e={sectionTitle:app.cfg.FONTS.sectionTitle[0],sectionContent:app.cfg.FONTS.sectionContent[0]},t=this.getTheme().fonts||{};return t.sectionTitle&&(e.sectionTitle=$.grep(app.cfg.FONTS.sectionTitle,function(e){return e.id==t.sectionTitle.id})[0]||t.sectionTitle),t.sectionContent&&(e.sectionContent=$.grep(app.cfg.FONTS.sectionContent,function(e){return e.id==t.sectionContent.id})[0]||t.sectionContent),e},getHeader:function(){return this.getSettings().header||{}},setHeader:function(e){n.values.settings=n.values.settings||{},n.values.settings.header=e},getHeaderLinkText:function(){return this.getHeader().linkText===undefined?app.cfg.HEADER_LINK_TEXT:this.getHeader().linkText},getHeaderLinkURL:function(){return this.getHeader().linkURL===undefined?app.cfg.HEADER_LINK_URL:this.getHeader().linkURL},getLogoURL:function(){var e=this.getHeader().logoURL?this.getHeader().logoURL:app.cfg.HEADER_LOGO_URL;return e==app.cfg.HEADER_LOGO_URL&&this.getColors()&&this.getColors().esriLogo=="white"&&(e="resources/tpl/viewer/icons/esri-logo-white.png"),e},getLogoTarget:function(){return!this.getHeader().logoURL||this.getHeader().logoURL==app.cfg.HEADER_LOGO_URL?app.cfg.HEADER_LOGO_TARGET:this.getHeader().logoTarget},getSocial:function(){return this.getHeader().social},getStory:function(){return n.values.story||{}},getStorySections:function(){var e=this.getStory();return e.sections||[]},getStoryStorage:function(){return this.getStory().storage||"WEBAPP"},setStorySections:function(e,t){n.values.story=n.values.story||{},n.values.story.storage="WEBAPP",n.values.story.sections=e,n.values.story.reversed=t}}}),define("storymaps/tpl/ui/MainStage",["lib-build/tpl!./MainMediaContainerMap","lib-build/tpl!./MainMediaContainerImage","lib-build/tpl!./MainMediaContainerEmbed","lib-build/css!./MainStage","../core/WebApplicationData","dojo/has","esri/arcgis/utils","esri/renderers/UniqueValueRenderer","esri/geometry/Point","esri/geometry/Extent","esri/config","esri/geometry/webMercatorUtils","esri/symbols/SimpleMarkerSymbol","esri/tasks/QueryTask","esri/tasks/query","dojo/topic","dojo/on","dojo/aspect","dojo/_base/lang"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){return function(s,o,u){function l(t){$("#mainStagePanel .medias").append(e({webmapid:t,isTemporary:!0}))}function c(e,t,n){var r=$(".mainMediaContainer.active > iframe[data-unload=true]");r.length&&setTimeout(function(){r.attr("src",r.attr("src"))},500),$(".mainMediaContainer.active").fadeOut(),b(),e.type=="webmap"?w(e.webmap.id,t,n,e):e.type=="image"?C(e.image.url,e.image.display):e.type=="video"?k(e.video.url,e.video):e.type=="webpage"&&k(e.webpage.url||e.webpage.ts,e.webpage)}function m(){$("#mainStageLoadingIndicator").fadeIn()}function b(){$("#mainStageLoadingIndicator").fadeOut()}function w(e,t,n,r){var i=$('.mapContainer[data-webmapid="'+e+'"]');$(".mainMediaContainer").removeClass("active has-error"),i.parent().addClass("active");if(e)if(i.hasClass("map")){var s=app.map?app.map.extent:null;app.map=app.maps[e].response.map,app.mapItem=app.maps[e].response.itemInfo,app.mapConfig=app.maps[e],E(i,t,s,n,r,!0)}else{m();var l=r&&r.webmap?r.webmap.extent:null;if(l)try{l=new f(l)}catch(c){l=null}u.loadWebmap(e,i[0],l).then(y.hitch(a,function(s){var a=app.map?app.map.extent:null;app.maps[e]=u.getMapConfig(s,i),app.map=s.map,app.mapItem=app.maps[e].response.itemInfo,app.mapConfig=app.maps[e],E(i,t,a,n,r,!1);if(o){app.ignoreNextEvent=!1,g.before(app.map,"setExtent",function(e){console.log("Set extent:",e),app.ignoreNextEvent||(app.lastExtentSet=e,app.ignoreNextEvent=!0)});var f=app.map.on("update-end",function(){f.remove(),app.lastExtentSet=app.map.extent,app.map.mapJournalInitExtent=app.map.extent,app.ignoreNextEvent=!0}),l=function(e){app.ignoreNextEvent?app.ignoreNextEvent=!1:app.lastExtentSet=e.extent};app.map.on("zoom-end",l),app.map.on("pan-end",l)}app.map.infoWindow&&($(app.map.infoWindow.domNode).addClass("light"),app.map.infoWindow.markerSymbol=(new h).setSize(0)),setTimeout(function(){b()},50),i.parent().removeClass("has-error")}),y.hitch(a,function(){b(),i.parent().addClass("has-error"),i.parent().find(".error").html(i18n.viewer.errors.mapLoadingFail),v.publish("story-loaded-section",n),v.publish("ADDEDIT_LOAD_WEBMAP_FAIL")})),setTimeout(function(){v.publish("story-section-map-timeout")},2e3)}}function E(e,t,n,r,s,o){a.updateMainStageWithLayoutSettings(),N(),i.getLayoutId()=="float"?app.map.disableKeyboardNavigation():app.map.enableKeyboardNavigation();try{app.map.resize(),app.map.reposition()}catch(u){}if(t||s){var l=s&&s.webmap?s.webmap.layers:null,c=app.maps[s.webmap.id].response.itemInfo.itemData.operationalLayers;$.each(c,function(e,t){var n;t.layerObject?(n=$(l).filter(function(e,n){return n.id==t.layerObject.id}),t.layerObject.setVisibility(n.length?n[0].visibility:t.visibility)):t.featureCollection&&t.featureCollection.layers&&$.each(t.featureCollection.layers,function(e,t){n=$(l).filter(function(e,n){return n.id.split("_").slice(0,-1).join("_")==t.layerObject.id.split("_").slice(0,-1).join("_")}),t.layerObject.setVisibility(n.length?n[0].visibility:t.visibility)})});var h=s&&s.webmap?s.webmap.extent:null;if(h)try{h=new f(h)}catch(u){}!h&&o&&r===0&&(h=app.map._params.extent),h?app.map.setExtent(h).then(function(){S(s.webmap.popup,r),v.publish("story-loaded-section",r)}):v.publish("story-loaded-section",r);var p=s.webmap.overview||{},d=s.webmap.legend||{};r===null&&t.media&&t.media.webmap&&(p=t.media.webmap.overview||{},d=t.media.webmap.legend||{}),p.enable!==undefined&&(app.maps[s.webmap.id].overview.toggle(p.enable,i.getColors()),app.maps[s.webmap.id].overview.toggleExpanded(p.openByDefault),app.maps[s.webmap.id].overview.setSettings(p)),d.enable!==undefined&&(app.maps[s.webmap.id].legend.toggle(d.enable),app.maps[s.webmap.id].legend.toggleExpanded(d.openByDefault),app.maps[s.webmap.id].legend.setSettings(d)),h||S(s.webmap.popup,r)}else v.publish("ADDEDIT_WEBMAP_DONE")}function S(e,t){app.map.infoWindow.hide();if(e){var n=app.map.getLayer(e.layerId);app.map.infoWindow.clearFeatures();if(n)x(e,t);else var r=app.map.on("update-end",function(){S(e,t),r.remove()})}}function x(e,t){var n=app.map.getLayer(e.layerId);if(!n)return;if(n.url){var r=new p(n.url),i=new d;i.objectIds=[e.fieldValue],i.returnGeometry=!0,i.outFields=["*"],i.outSpatialReference=app.map.spatialReference,r.execute(i,function(e){var r=e.features[0];r&&(r.infoTemplate||r.setInfoTemplate(n.infoTemplate),r.MJlayerRef=n,T(r,t))})}else{var s=null;$.each(n.graphics,function(t,n){n.attributes[e.fieldName]==e.fieldValue&&(s=n)}),s&&T(s,t)}}function T(e,t){if(!e)return;var n=e.geometry,r=n.getExtent()?n.getExtent().getCenter():n;app.map.infoWindow.setFeatures([e]),app.map.infoWindow.show(r),app.map.extent.contains(r)||(app.map.centerAt(r),t===null&&$(".mediaBackContainer").show().css("marginLeft",-$(".mediaBackContainer .backButton").outerWidth()/2).css("marginRight",-$(".mediaBackContainer .backButton").outerWidth()/2))}function N(){if(app.mapConfig){var e=app.data.getWebAppData().getColors();app.mapConfig.overview.setColors(e),app.mapConfig.legend.setColors(e)}}function C(e,t){$(".mainMediaContainer").removeClass("active");var n=$('.imgContainer[data-src="'+e+'"]');n&&(n.removeClass("center fit fill stretch").addClass(t).css({left:0,right:0}).attr("src",n.data("src")),a.updateMainStageWithLayoutSettings(),n.parent().addClass("active"))}function k(e,t){$(".mainMediaContainer").removeClass("active");var n=$('.embedContainer[data-src="'+e+'"]');n.length||(n=$('.embedContainer[data-ts="'+e+'"]'),e=n.data("src"));if(n.length){n.removeClass("center fit fill stretch").addClass(t.display).attr("data-unload",t.unload===undefined||t.unload).css({left:0,right:0}),n.attr("src")||n.attr("src",e);var r=t.width||"560",i=t.height||"315";t.display=="fit"&&(r="",i=""),r&&(r.match(/[0-9]+%/)||(r+="px"),n.attr("width",r)),i&&(i.match(/[0-9]+%/)||(i+="px"),n.attr("height",i)),n.parent().addClass("active"),a.updateMainStageWithLayoutSettings()}}function L(){$(".mainMediaContainer.active iframe.embedContainer.fit").attr("height",$("#mainStagePanel").width()*9/16)}var a=this;this.updateMainMediaContainers=function(){var r=app.data.getWebmaps(),i=app.data.getImages(),s=app.data.getEmbeds();$.each(r,function(t,n){var r=$('.mapContainer[data-webmapid="'+n+'"]');r.length||$("#mainStagePanel .medias").append(e({webmapid:n,isTemporary:!1}))}),$(".mapContainer").each(function(){$.inArray($(this).data("webmapid"),r)==-1&&$(this).parent().remove()}),$.each(i,function(e,n){var r=$('.imgContainer[data-src="'+n+'"]');r.length||$("#mainStagePanel .medias").append(t({url:n}))}),$(".imgContainer").each(function(){$.inArray($(this).data("src"),i)==-1&&$(this).parent().remove()}),$.each(s,function(e,t){var r=$('.embedContainer[data-src="'+(t.url||t.ts)+'"]');if(!r.length){$("#mainStagePanel .medias").append(n({url:t.url,frameTag:t.frameTag,unload:t.unload===undefined||!!t.unload}));if(!!t.frameTag){var i=$("#mainStagePanel .medias .mainMediaContainer").last().find("iframe").first();i.addClass("embedContainer").attr("data-src",i.attr("src")).removeAttr("src").attr("data-ts",t.ts).attr("data-unload",t.unload===undefined||!!t.unload)}}}),$(".embedContainer").each(function(){var e=$(this).data("ts")||$(this).data("src"),t=$.grep(s,function(t){return e==t.url||e==t.ts}).length>0;t||$(this).parent().remove()}),N()},this.updateMainMediaWithStoryMainMedia=function(e){var t=app.data.getStoryByIndex(e);t&&t.media&&c(t.media,t,e)},this.updateMainMediaWithStoryAction=function(e){c(e,app.data.getCurrentSection(),null)},this.updateMainStageWithLayoutSettings=function(){var e=i.getLayoutId(),t=app.data.getWebAppData().getColors(),n=i.getLayoutCfg(),r=$("body").width();L(),s.css("background-color",t.media),N();if(e=="float"){var o=$("#contentPanel").width(),u=$("#floatingPanel").position(),a=$("#floatingPanel").width(),f=n.position=="left",l=f?o-(u.left+a):u.left;f?$(".mainMediaContainer.active .esriControlsBR").css({left:u.left+a+5,right:"inherit"}):$(".mainMediaContainer.active .esriControlsBR").css({left:"inherit",right:o-u.left+5}),f?$(".mapConfigOverlay.position, .mapConfigOverlay.popup, #mainStageLoadingIndicator, .mainStageErrorContainer").css("left",u.left+a+l/2):$(".mapConfigOverlay.position, .mapConfigOverlay.popup, #mainStageLoadingIndicator, .mainStageErrorContainer").css("left",l/2),$("body").hasClass("mobile-view")&&$("#mainStageLoadingIndicator, .mainStageErrorContainer").css("left","50%");var c=$("body").hasClass("layout-float-right"),h=c?"padding-right":"padding-left",p=c?"right":"left",d=$("#floatingPanel").position().left;c?d=r-d:d+=$("#floatingPanel").width(),$(".centerAlignOnFloat").css({paddingRight:0,paddingLeft:0}).css(h,d),$(".mediaBackContainer").css({left:"inherit",right:"inherit"}).css(p,d+l/2),r<=1067&&$("#builderHelp").css(h,0),$(".mainMediaContainer .imgContainer.center").css({left:0,right:0}).css(p,d),$(".mainMediaContainer .embedContainer.center").css({left:0,right:0}).css(p,d),$(".mainMediaContainer .embedContainer.custom").css({left:0,right:0}).css(p,d)}else $(".mainMediaContainer.active .esriControlsBR").css({left:"",right:""}),$(".mapConfigOverlay.position, .mapConfigOverlay.popup, #mainStageLoadingIndicator, .mainStageErrorContainer").css("left","50%"),$(".centerAlignOnFloat").css({paddingRight:0,paddingLeft:0}),$(".mediaBackContainer").css({left:"50%",right:"inherit"}),$(".mainMediaContainer .imgContainer.center").css({left:0,right:0}),$(".mainMediaContainer .embedContainer.center").css({left:0,right:0}),$(".mainMediaContainer .embedContainer.custom").css({left:0,right:0})},this.showWebmapById=function(e){w(e,null,null,null)},this.loadTmpWebmap=function(e){$('.mapContainer[data-webmapid="'+e+'"]').length||l(e),w(e,null,null,null)}}}),define("storymaps/tpl/core/Config",[],function(){var e="resources/tpl/viewer/icons/esri-logo.png",t="http://www.esri.com",n="A story map",r="http://storymaps.arcgis.com";return app.appCfg={supportWebmapPreviewAGOL:!1,useWebmapInApp:!1,useStandardHeader:!1,useAppTitleAsPageTitle:!1},app.appCfg.getLayoutThumnail=function(e){e=e||{};var t=e.layout||n.id,n=app.data.getLayoutStaticConfig(t),r=e.theme||n.themes[0],i=e.options||{position:n.positions[0],size:"medium"},s=e.selected||!1,o=e.separateNavBar||!1,u=e.contentStep||!1,a=e.contentStepIdx||1,f=e.contentSize||!1,l=e.contentLabel||!1,c="",h="",p="",d="";!o&&!u&&!f&&!l&&(o=!0),i.sizeLbl&&(i.size=i.sizeLbl),c+='<div class="layout-thumbnail layout-'+t+" size-"+i.size+" pos-"+i.position+(s?" selected":"")+"\" data-colors='"+JSON.stringify(r)+"'>",c+='<div class="layout-selected"></div>';if(t=="side"){h='<div class="layout-block" style="float: left; margin-left: 3%; width: $size$%; background-color:$color$; $styleOpt$"><span class="thumb-content $contentClass$" style="$contentStyle$">$content$</span></div>';var v=8,m=20,g=59;i.size=="small"?(v=8,m=15,g=64):i.size=="large"&&(v=8,m=35,g=44);if(o)i.position=="left"?(c+=h.replace("$size$",v).replace("$color$",r.dotNav).replace("$styleOpt$","").replace("$contentClass$","").replace("$content$",""),c+=h.replace("$size$",m).replace("$color$",r.panel).replace("$styleOpt$","").replace("$contentClass$","").replace("$content$",""),c+=h.replace("$size$",g).replace("$color$",r.media).replace("$styleOpt$","").replace("$contentClass$","").replace("$content$","")):(c+=h.replace("$size$",g).replace("$color$",r.media).replace("$styleOpt$","").replace("$contentClass$","").replace("$content$",""),c+=h.replace("$size$",m).replace("$color$",r.panel).replace("$styleOpt$","").replace("$contentClass$","").replace("$content$",""),c+=h.replace("$size$",v).replace("$color$",r.dotNav).replace("$styleOpt$","").replace("$contentClass$","").replace("$content$",""));else{var y=i.position=="right";p=h.replace("$size$",v+m).replace("$color$",r.panel).replace("$styleOpt$",y?"margin-right: 3%; float: right":""),d=h.replace("$size$",g+3).replace("$color$",r.media).replace("$styleOpt$",y?"float: right":""),l?(p=p.replace("$contentClass$","panel-lbl rotate").replace("$contentStyle$","color: "+r.text).replace("$content$",n.title),d=d.replace("$contentClass$","panel-lbl").replace("$content$",i18n.builder.layouts.mainStage)):f&&(p=p.replace("$contentStyle$","color: "+r.text))}}else if(t=="float"){var b=parseInt(app.data.getCurrentLayoutStaticConfig().sizes[i.size],10)-10,w=i.position=="left";i.size=="small"&&(b=18),h='<div class="layout-block layout-float $layout-left$" style="$basestyle$ width: $size$%; background-color:$color$; $styleOpt$"><span class="thumb-content $contentClass$" style="$contentStyle$">$content$</span></div>',h=h.replace("$layout-left$",w?"layout-left":""),p=h.replace("$basestyle$","margin: 0 4px;").replace("$size$",94).replace("$color$",r.media).replace("$styleOpt$",""),d=h.replace("$basestyle$","position: absolute; right: 10%; top: 6px;").replace("$size$",b).replace("$color$",r.panel).replace("$styleOpt$","border: none; bottom: 7px; height: auto; left: "+(w?"10%":"auto")),l?(p=p.replace("$contentClass$","panel-lbl").replace("$content$",i18n.builder.layouts.mainStage),d=d.replace("$contentClass$","panel-lbl rotate").replace("$contentStyle$","color: "+r.text).replace("$content$",n.title)):f&&(d=d.replace("$contentStyle$","color: "+r.text))}if(u)p=p.replace("$contentClass$","number number-step"+a+" "+(t=="side"?"number-2":"number-1")).replace("$content$",""),d=d.replace("$contentClass$","number number-step"+a+" "+(t=="side"?"number-1":"number-2")).replace("$content$","");else if(f){var E=app.data.getCurrentLayoutStaticConfig().sizes[i.size],S=100-parseInt(E,10)+"%";p=p.replace("$contentClass$","size").replace("$content$",t=="side"?E:S),d=d.replace("$contentClass$","size").replace("$content$",t=="side"?S:E)}else p=p.replace("$contentClass$","").replace("$content$",""),d=d.replace("$contentClass$","").replace("$content$","");return p=p.replace("$contentStyle$",""),d=d.replace("$contentStyle$",""),c+=p+d,c+="</div>",c},{checkConfigFileIsOK:function(){return app.cfg.HEADER_LOGO_URL=e,app.cfg.HEADER_LOGO_TARGET=t,app.cfg.HEADER_LINK_TEXT=n,app.cfg.HEADER_LINK_URL=r,app.cfg&&app.cfg.HEADER_LOGO_URL!==undefined&&app.cfg.HEADER_LOGO_TARGET!==undefined&&app.cfg.HEADER_LINK_TEXT!==undefined&&app.cfg.HEADER_LINK_URL!==undefined&&app.cfg.HEADER_SOCIAL&&app.cfg.MAX_NB_SECTIONS&&app.cfg.DOTNAV_GROUPSIZE&&app.cfg.TIMEOUT_VIEWER_LOAD&&app.cfg.TIMEOUT_VIEWER_REQUEST&&app.cfg.TIMEOUT_BUILDER_REQUEST&&app.cfg.SECTION_ACTION_ZOOM_MAP_MARKER&&app.cfg.LAYOUTS&&app.cfg.LAYOUTS.length&&app.cfg.FONTS&&app.cfg.HELP_URL&&app.cfg.TPL_NAME&&app.cfg.WEBAPP_TAG&&app.cfg.WEBAPP_KEYWORD_GENERIC&&app.cfg.WEBAPP_KEYWORD_APP&&app.cfg.AUTHORIZED_IMPORT_SOURCE&&app.cfg.FLICKR_API_KEY&&app.cfg.FACEBOOK_APP_ID&&app.cfg.CORS_SERVER&&app.cfg.DEFAULT_SHARING_URL&&app.cfg.DEFAULT_PROXY_URL}}}),define("storymaps/tpl/core/Data",["./WebApplicationData","storymaps/common/utils/CommonHelper","dojo/topic","esri/arcgis/utils"],function(e,t,n,r){return function(){function l(e){r.getItem(e).then(function(t){u[e]={title:t.item.title,sharing:t.item.access.toUpperCase()},n.publish("LOADED_WEBMAP_INFOS",{id:e,title:t.item.title,sharing:t.item.access.toUpperCase()})})}var s=null,o=null,u={};this.getWebMap=function(){return s},this.setWebMap=function(e){s=e},this.getWebAppItem=function(){return o||{}},this.setWebAppItem=function(e){o=e},this.getWebAppData=function(){return e},this.updateAfterSave=function(){e.updateAfterSave()},this.userIsAppOwner=function(){return app.portal&&app.portal.getPortalUser()&&app.portal.getPortalUser().username==this.getWebAppItem().owner||t.getPortalUser()!=null&&t.getPortalUser()==this.getWebAppItem().owner},this.userIsOrgaPublisher=function(){var e=app.portal?app.portal.getPortalUser():null;return e&&e.orgId&&(e.role=="org_admin"||e.role=="org_publisher")},this.isOrga=function(){return!app.portal||!app.portal.getPortalUser()?!1:!!app.portal.getPortalUser().orgId};var a=null,f=null;this.getStoryStorage=function(){return a},this.setStoryStorage=function(e){a=e},this.getStory=function(){return a=="WEBAPP"?e.getStory()||{}:{}},this.getStorySections=function(){var t=[],n=[];return a=="WEBAPP"&&(t=e.getStorySections()),t=t.slice(0,app.cfg.MAX_NB_SECTIONS),app.isInBuilder?t||[]:($.each(t||[],function(e,t){t.status=="PUBLISHED"&&t.pubDate<=Date.now()&&n.push(t)}),n)},this.getStoryLength=function(){return this.getStorySections().length},this.getStoryByIndex=function(e){return this.getStorySections()[e]},this.getCurrentSection=function(){return e.getStorySections()[f]},this.getCurrentSectionIndex=function(){return f},this.setCurrentSectionIndex=function(e){f=e},this.addStorySection=function(t){a=="WEBAPP"&&(this.getStory().reversed?(e.getStorySections().splice(1,0,t),this.setCurrentSectionIndex(this.getStoryLength()>=2?1:0)):(e.setStorySections(this.getStorySections().concat(t)),this.setCurrentSectionIndex(this.getStoryLength()-1)))},this.editSection=function(t,n){if(a=="WEBAPP"){var r=this.getStorySections();r[t]=n,e.setStorySections(r)}},this.organizeStory=function(t,n,r){a=="WEBAPP"&&e.setStorySections(t,r),n==-1&&(n=0),this.setCurrentSectionIndex(n)},this.getWebmaps=function(){var e=$.map(this.getStorySections(),function(e){return e.media&&e.media.type=="webmap"&&e.media.webmap?e.media.webmap.id:null});return $.each(this.getStorySections(),function(t,n){n.contentActions&&$.each(n.contentActions,function(t,n){n.type=="media"&&n.media.webmap&&e.push(n.media.webmap.id)})}),e=$.grep(e,function(t,n){return!t||t.length!=32?!1:n==$.inArray(t,e)}),e},this.getWebmapsInfo=function(){var t=[],n={},r=function(e,t,r){n[e]?n[e][t].push(r):(n[e]={sections:[],actions:[]},n[e][t].push(r))};$.each(this.getStorySections(),function(e,t){t.media&&t.media.type=="webmap"&&t.media.webmap&&r(t.media.webmap.id,"sections",e+1),t.contentActions&&$.each(t.contentActions,function(t,n){n.type=="media"&&n.media.webmap&&r(n.media.webmap.id,"actions",e+1)})});var i=e.getSourceWebmap();return i&&!n[i]&&(n[i]={}),$.each(Object.keys(n),function(e,r){var i=u[r];if(!i){if(app.maps[r]){u[r]={title:app.maps[r].response.itemInfo.item.title,sharing:app.maps[r].response.itemInfo.item.access.toUpperCase()},t.push({id:r,title:app.maps[r].response.itemInfo.item.title,sharing:app.maps[r].response.itemInfo.item.access.toUpperCase(),sections:n[r].sections,actions:n[r].actions});return}l(r)}t.push({id:r,title:i?i.title:null,sharing:i?i.sharing:null,sections:n[r].sections,actions:n[r].actions})}),t},this.getWebmapTitle=function(e){return u[e]?u[e].title:""},this.getWebmapSharing=function(e){return u[e]?u[e].sharing:""},this.getImages=function(){var e=$.map(this.getStorySections(),function(e){return e.media&&e.media.type=="image"&&e.media.image?e.media.image.url:null});return $.each(this.getStorySections(),function(t,n){n.contentActions&&$.each(n.contentActions,function(t,n){n.type=="media"&&n.media.image&&e.push(n.media.image.url)})}),e=$.grep(e,function(t,n){return n==$.inArray(t,e)}),e},this.getEmbeds=function(){var e=$.map(this.getStorySections(),function(e){return!e||!e.media||e.media.type!="video"&&e.media.type!="webpage"||!e.media[e.media.type]?null:e.media[e.media.type]});return $.each(this.getStorySections(),function(t,n){n.contentActions&&$.each(n.contentActions,function(t,n){if(n.type!="media"||!n.media.type||n.media.type!="video"&&n.media.type!="webpage"||!n.media[n.media.type])return;e.push(n.media[n.media.type])})}),e=$.grep(e,function(t,n){return n==$.inArray(t,e)}),e},this.getContentActions=function(){var e=[];return $.each(this.getStorySections(),function(t,n){$.each(n.contentActions,function(t,n){e.push(n)})}),e},this.getCurrentLayoutStaticConfig=function(){return this.getLayoutStaticConfig(e.getLayoutId())},this.getLayoutStaticConfig=function(e){var t=$.grep(app.cfg.LAYOUTS,function(t){return t.id==e});return!t||!t.length?null:t[0]},this.debug=function(){console.table&&console.table(app.data.getStorySections()),$.each(app.data.getStorySections(),function(e,t){console.log("%c%s","font-weight: bold; font-size: 18px;","["+e+"-"+t.title+"]"),console.log("%c%s","font-weight: bold; font-size: 16px;","> MEDIA"),console.log(JSON.stringify(t.media,null,"	")),console.log("%c%s","font-weight: bold; font-size: 16px;","> ACTIONS"),console.log(JSON.stringify(t.contentActions,null,"	"))})}}}),define("storymaps/tpl/core/Helper",[],function(){return{}}),define("lib-build/tpl!storymaps/tpl/ui/desktop/SidePanelSection",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=' <div class="section '+((__t=optHtmlClass)==null?"":__t)+'">\r\n 	<div class="title">'+((__t=title)==null?"":__t)+'</div>\r\n	<div class="content">'+((__t=content)==null?"":__t)+'</div>\r\n	<div class="social">\r\n		<span class="shareIcon share_facebook icon-facebook-squared" data-url="'+((__t=shareURL)==null?"":__t)+'"> Facebook</span>\r\n		<span class="shareIcon share_twitter icon-twitter" data-url="'+((__t=shareURL)==null?"":__t)+'"> Twitter</span>\r\n		<span class="shareIcon share_bitly icon-link" data-url="'+((__t=shareURL)==null?"":__t)+'"> '+((__t=lblShare)==null?"":__t)+"</span>\r\n	</div>\r\n</div>";return __p}}),define("lib-build/css!storymaps/tpl/ui/desktop/SidePanel",[],function(){}),define("lib-build/css!storymaps/common/builder/InlineFieldEdit",[],function(){}),define("lib-build/css!storymaps/tpl/ui/desktop/DotNavBar",[],function(){}),define("storymaps/tpl/ui/desktop/DotNavBar",["lib-build/css!./DotNavBar","storymaps/common/utils/CommonHelper"],function(e,t){return function(n,r){function a(e){var t="",r="",a="",l=parseInt(e/s,10),c=l*s;for(var h=c;h<u&&h<c+s;h++){var p=$("<div>"+o.sections[h].title+"</div>").text();h===0?t+='<div class="dot glyphicon glyphicon-home" title="'+p+'" data-index="0"></div>':t+='<div class="dot" title="'+p+'" data-index="'+h+'">&#9679;</div>'}if(u>s){if(l>0)for(var d=0;d<=c-s;d+=s)r+='<div class="navGroup" data-index="'+(d+s-1)+'">'+(d+1)+"-"+(d+s)+"</div>";if(l+s<u)for(var v=c+s;v<u;v+=s){var m=v+1,g=Math.min(v+s,u),y=m!=g?m+"-"+g:m,b="";m>=100&&g>100&&(b="font-size: 8px;"),a+='<div class="navGroup" data-index="'+v+'" style="'+b+'">'+y+"</div>"}}n.html('<div class="navDotsInner"> <div class="navDotsNav navDotsUp"></div> <div class="navGroups navGroupUp'+(r?"":" disabled")+'">'+r+" </div>"+' <div class="dots">'+t+" </div>"+' <div class="navGroups navGroupDown'+(a?"":" disabled")+'">'+a+" </div>"+' <div class="navDotsNav navDotsDown"></div>'+"</div>"),n.find(".dot").tooltip({placement:o.tooltipPosition}),f(),i.setActive(e)}function f(){n.css("background-color",o.bgColor),n.find(".dot, .navGroups").css("color",o.dotColor),t.addCSSRule(".navDots .tooltip-inner { background-color: "+o.tooltipBgColor+"; color: "+o.tooltipFontColor+"; }"),o.tooltipPosition&&o.tooltipPosition!="left"&&o.tooltipPosition!="right"?t.addCSSRule(".navDots .tooltip-arrow { border-top-color: "+o.tooltipBgColor+" !important; border-bottom-color: "+o.tooltipBgColor+" !important; }"):t.addCSSRule(".navDots .tooltip-arrow { border-left-color: "+o.tooltipBgColor+" !important; border-right-color: "+o.tooltipBgColor+" !important; }")}function l(){n.off("click").click(function(e){var t=$(e.target);t.hasClass("dot")&&r($(e.target).data("index")),t.hasClass("navDotsUp")&&!t.hasClass("disabled")&&r(n.find(".dot.active").data("index")-1),t.hasClass("navDotsDown")&&!t.hasClass("disabled")&&r(n.find(".dot.active").data("index")+1),t.hasClass("navGroup")&&r(t.data("index"))})}var i=this,s=app.cfg.DOTNAV_GROUPSIZE||15,o=null,u=null;this.init=function(e){o=e,o.sections=o.sections||[],o.tooltipPosition=o.tooltipPosition||"right",u=e.sections.length,a(e.sectionIndex||0),f(),l()},this.setActive=function(e){n.find(".navDotsNav").toggle(!!u);if(!u)return;if(!n.find(".dot[data-index="+e+"]").length){a(e);return}n.find(".dot").removeClass("active"),n.find(".dot[data-index="+e+"]").addClass("active"),n.find(".navDotsUp").toggleClass("disabled",e===0),n.find(".navDotsDown").toggleClass("disabled",e==u-1)},this.update=function(e){if(!o)return;e=e||{},o.bgColor=e.bgColor||o.bgColor,o.tooltipBgColor=e.tooltipBgColor||o.tooltipBgColor,o.tooltipFontColor=e.tooltipFontColor||o.tooltipFontColor,o.dotColor=e.dotColor||o.dotColor,f()},this.resize=function(){},this.destroy=function(){n.off("click"),n.empty()},this.updateTooltipPlacement=function(e){n.find(".dot").tooltip("destroy").tooltip({placement:e})}}}),function(e,t,n){function Q(n,r,i){var o=t.createElement(n);return r&&(o.id=s+r),i&&(o.style.cssText=i),e(o)}function G(){return n.innerHeight?n.innerHeight:e(n).height()}function Y(t,n){n!==Object(n)&&(n={}),this.cache={},this.el=t,this.value=function(t){var i;return this.cache[t]===undefined&&(i=e(this.el).attr("data-cbox-"+t),i!==undefined?this.cache[t]=i:n[t]!==undefined?this.cache[t]=n[t]:r[t]!==undefined&&(this.cache[t]=r[t])),this.cache[t]},this.get=function(t){var n=this.value(t);return e.isFunction(n)?n.call(this.el,this):n}}function Z(e){var t=E.length,n=(I+e)%t;return n<0?t+n:n}function et(e,t){return Math.round((/%/.test(e)?(t==="x"?S.width():G())/100:1)*parseInt(e,10))}function tt(e,t){return e.get("photo")||e.get("photoRegex").test(t)}function nt(e,t){return e.get("retinaUrl")&&n.devicePixelRatio>1?t.replace(e.get("photoRegex"),e.get("retinaSuffix")):t}function rt(e){"contains"in d[0]&&!d[0].contains(e.target)&&e.target!==p[0]&&(e.stopPropagation(),d.focus())}function it(e){it.str!==e&&(d.add(p).removeClass(it.str).addClass(e),it.str=e)}function st(){I=0,rel&&rel!=="nofollow"?(E=e("."+o).filter(function(){var t=e.data(this,i),n=new Y(this,t);return n.get("rel")===rel}),I=E.index(P.el),I===-1&&(E=E.add(P.el),I=E.length-1)):E=e(P.el)}function ot(n){e(t).trigger(n),D.triggerHandler(n)}function at(n){var r;z||(r=e(n).data("colorbox"),P=new Y(n,r),rel=P.get("rel"),st(),R||(R=U=!0,it(P.get("className")),d.css({visibility:"hidden",display:"block",opacity:""}),x=Q(V,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),m.css({width:"",height:""}).append(x),H=g.height()+w.height()+m.outerHeight(!0)-m.height(),B=y.width()+b.width()+m.outerWidth(!0)-m.width(),j=x.outerHeight(!0),F=x.outerWidth(!0),P.w=et(P.get("initialWidth"),"x"),P.h=et(P.get("initialHeight"),"y"),x.css({width:"",height:P.h}),X.position(),ot(u),P.get("onOpen"),_.add(C).hide(),d.focus(),P.get("trapFocus")&&t.addEventListener&&(t.addEventListener("focus",rt,!0),D.one(c,function(){t.removeEventListener("focus",rt,!0)})),P.get("returnFocus")&&D.one(c,function(){e(P.el).focus()})),p.css({opacity:parseFloat(P.get("opacity"))||"",cursor:P.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),P.get("closeButton")?M.html(P.get("close")).appendTo(m):M.appendTo("<div/>"),ct())}function ft(){!d&&t.body&&(K=!1,S=e(n),d=Q(V).attr({id:i,"class":e.support.opacity===!1?s+"IE":"",role:"dialog",tabindex:"-1"}).hide(),p=Q(V,"Overlay").hide(),N=e([Q(V,"LoadingOverlay")[0],Q(V,"LoadingGraphic")[0]]),v=Q(V,"Wrapper"),m=Q(V,"Content").append(C=Q(V,"Title"),k=Q(V,"Current"),O=e('<button type="button"/>').attr({id:s+"Previous"}),A=e('<button type="button"/>').attr({id:s+"Next"}),L=Q("button","Slideshow"),N),M=e('<button type="button"/>').attr({id:s+"Close"}),v.append(Q(V).append(Q(V,"TopLeft"),g=Q(V,"TopCenter"),Q(V,"TopRight")),Q(V,!1,"clear:left").append(y=Q(V,"MiddleLeft"),m,b=Q(V,"MiddleRight")),Q(V,!1,"clear:left").append(Q(V,"BottomLeft"),w=Q(V,"BottomCenter"),Q(V,"BottomRight"))).find("div div").css({"float":"left"}),T=Q(V,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),_=A.add(O).add(k).add(L),e(t.body).append(p,d.append(v,T)))}function lt(){function n(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),at(this))}return d?(K||(K=!0,A.click(function(){X.next()}),O.click(function(){X.prev()}),M.click(function(){X.close()}),p.click(function(){P.get("overlayClose")&&X.close()}),e(t).bind("keydown."+s,function(e){var t=e.keyCode;R&&P.get("escKey")&&t===27&&(e.preventDefault(),X.close()),R&&P.get("arrowKey")&&E[1]&&!e.altKey&&(t===37?(e.preventDefault(),O.click()):t===39&&(e.preventDefault(),A.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+s,"."+o,n):e("."+o).live("click."+s,n)),!0):!1}function ct(){var r,i,o=X.prep,u,f=++$;U=!0,q=!1,ot(h),ot(a),P.get("onLoad"),P.h=P.get("height")?et(P.get("height"),"y")-j-H:P.get("innerHeight")&&et(P.get("innerHeight"),"y"),P.w=P.get("width")?et(P.get("width"),"x")-F-B:P.get("innerWidth")&&et(P.get("innerWidth"),"x"),P.mw=P.w,P.mh=P.h,P.get("maxWidth")&&(P.mw=et(P.get("maxWidth"),"x")-F-B,P.mw=P.w&&P.w<P.mw?P.w:P.mw),P.get("maxHeight")&&(P.mh=et(P.get("maxHeight"),"y")-j-H,P.mh=P.h&&P.h<P.mh?P.h:P.mh),r=P.get("href"),W=setTimeout(function(){N.show()},100),P.get("inline")?(u=Q(V).hide().insertBefore(e(r)[0]),D.one(h,function(){u.replaceWith(x.children())}),o(e(r))):P.get("iframe")?o(" "):P.get("html")?o(P.get("html")):tt(P,r)?(r=nt(P,r),q=t.createElement("img"),e(q).addClass(s+"Photo").bind("error",function(){o(Q(V,"Error").html(P.get("imgError")))}).one("load",function(){var t;if(f!==$)return;e.each(["alt","longdesc","aria-describedby"],function(t,n){var r=e(P.el).attr(n)||e(P.el).attr("data-"+n);r&&q.setAttribute(n,r)}),P.get("retinaImage")&&n.devicePixelRatio>1&&(q.height=q.height/n.devicePixelRatio,q.width=q.width/n.devicePixelRatio),P.get("scalePhotos")&&(i=function(){q.height-=q.height*t,q.width-=q.width*t},P.mw&&q.width>P.mw&&(t=(q.width-P.mw)/q.width,i()),P.mh&&q.height>P.mh&&(t=(q.height-P.mh)/q.height,i())),P.h&&(q.style.marginTop=Math.max(P.mh-q.height,0)/2+"px"),E[1]&&(P.get("loop")||E[I+1])&&(q.style.cursor="pointer",q.onclick=function(){X.next()}),q.style.width=q.width+"px",q.style.height=q.height+"px",setTimeout(function(){o(q)},1)}),setTimeout(function(){q.src=r},1)):r&&T.load(r,P.get("data"),function(t,n){f===$&&o(n==="error"?Q(V,"Error").html(P.get("xhrError")):e(this).contents())})}var r={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return e(this).attr("href")},title:function(){return this.title}},i="colorbox",s="cbox",o=s+"Element",u=s+"_open",a=s+"_load",f=s+"_complete",l=s+"_cleanup",c=s+"_closed",h=s+"_purge",p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D=e("<a/>"),P,H,B,j,F,I,q,R,U,z,W,X,V="div",$=0,J={},K,ut=function(){function i(){clearTimeout(r)}function o(){if(P.get("loop")||E[I+1])i(),r=setTimeout(X.next,P.get("slideshowSpeed"))}function u(){L.html(P.get("slideshowStop")).unbind(n).one(n,c),D.bind(f,o).bind(a,i),d.removeClass(t+"off").addClass(t+"on")}function c(){i(),D.unbind(f,o).unbind(a,i),L.html(P.get("slideshowStart")).unbind(n).one(n,function(){X.next(),u()}),d.removeClass(t+"on").addClass(t+"off")}function h(){e=!1,L.hide(),i(),D.unbind(f,o).unbind(a,i),d.removeClass(t+"off "+t+"on")}var e,t=s+"Slideshow_",n="click."+s,r;return function(){e?P.get("slideshow")||(D.unbind(l,h),h()):P.get("slideshow")&&E[1]&&(e=!0,D.one(l,h),P.get("slideshowAuto")?u():c(),L.show())}}();if(e.colorbox)return;e(ft),X=e.fn[i]=e[i]=function(t,n){var r,s=this;t=t||{};if(e.isFunction(s))s=e("<a/>"),t.open=!0;else if(!s[0])return s;return s[0]?(ft(),lt()&&(n&&(t.onComplete=n),s.each(function(){var n=e.data(this,i)||{};e.data(this,i,e.extend(n,t))}).addClass(o),r=new Y(s[0],t),r.get("open")&&at(s[0])),s):s},X.position=function(t,n){function l(){g[0].style.width=w[0].style.width=m[0].style.width=parseInt(d[0].style.width,10)-B+"px",m[0].style.height=y[0].style.height=b[0].style.height=parseInt(d[0].style.height,10)-H+"px"}var r,i=0,o=0,u=d.offset(),a,f;S.unbind("resize."+s),d.css({top:-9e4,left:-9e4}),a=S.scrollTop(),f=S.scrollLeft(),P.get("fixed")?(u.top-=a,u.left-=f,d.css({position:"fixed"})):(i=a,o=f,d.css({position:"absolute"})),P.get("right")!==!1?o+=Math.max(S.width()-P.w-F-B-et(P.get("right"),"x"),0):P.get("left")!==!1?o+=et(P.get("left"),"x"):o+=Math.round(Math.max(S.width()-P.w-F-B,0)/2),P.get("bottom")!==!1?i+=Math.max(G()-P.h-j-H-et(P.get("bottom"),"y"),0):P.get("top")!==!1?i+=et(P.get("top"),"y"):i+=Math.round(Math.max(G()-P.h-j-H,0)/2),d.css({top:u.top,left:u.left,visibility:"visible"}),v[0].style.width=v[0].style.height="9999px",r={width:P.w+F+B,height:P.h+j+H,top:i,left:o};if(t){var c=0;e.each(r,function(e){if(r[e]!==J[e]){c=t;return}}),t=c}J=r,t||d.css(r),d.dequeue().animate(r,{duration:t||0,complete:function(){l(),U=!1,v[0].style.width=P.w+F+B+"px",v[0].style.height=P.h+j+H+"px",P.get("reposition")&&setTimeout(function(){S.bind("resize."+s,X.position)},1),n&&n()},step:l})},X.resize=function(e){var t;R&&(e=e||{},e.width&&(P.w=et(e.width,"x")-F-B),e.innerWidth&&(P.w=et(e.innerWidth,"x")),x.css({width:P.w}),e.height&&(P.h=et(e.height,"y")-j-H),e.innerHeight&&(P.h=et(e.innerHeight,"y")),!e.innerHeight&&!e.height&&(t=x.scrollTop(),x.css({height:"auto"}),P.h=x.height()),x.css({height:P.h}),t&&x.scrollTop(t),X.position(P.get("transition")==="none"?0:P.get("speed")))},X.prep=function(n){function u(){return P.w=P.w||x.width(),P.w=P.mw&&P.mw<P.w?P.mw:P.w,P.w}function a(){return P.h=P.h||x.height(),P.h=P.mh&&P.mh<P.h?P.mh:P.h,P.h}if(!R)return;var r,o=P.get("transition")==="none"?0:P.get("speed");x.remove(),x=Q(V,"LoadedContent").append(n),x.hide().appendTo(T.show()).css({width:u(),overflow:P.get("scrolling")?"auto":"hidden"}).css({height:a()}).prependTo(m),T.hide(),e(q).css({"float":"none"}),it(P.get("className")),r=function(){function a(){e.support.opacity===!1&&d[0].style.removeAttribute("filter")}var n=E.length,r,u;if(!R)return;u=function(){clearTimeout(W),N.hide(),ot(f),P.get("onComplete")},C.html(P.get("title")).show(),x.show(),n>1?(typeof P.get("current")=="string"&&k.html(P.get("current").replace("{current}",I+1).replace("{total}",n)).show(),A[P.get("loop")||I<n-1?"show":"hide"]().html(P.get("next")),O[P.get("loop")||I?"show":"hide"]().html(P.get("previous")),ut(),P.get("preloading")&&e.each([Z(-1),Z(1)],function(){var n,r=E[this],s=new Y(r,e.data(r,i)),o=s.get("href");o&&tt(s,o)&&(o=nt(s,o),n=t.createElement("img"),n.src=o)})):_.hide(),P.get("iframe")?(r=t.createElement("iframe"),"frameBorder"in r&&(r.frameBorder=0),"allowTransparency"in r&&(r.allowTransparency="true"),P.get("scrolling")||(r.scrolling="no"),e(r).attr({src:P.get("href"),name:(new Date).getTime(),"class":s+"Iframe",allowFullScreen:!0}).one("load",u).appendTo(x),D.one(h,function(){r.src="//about:blank"}),P.get("fastIframe")&&e(r).trigger("load")):u(),P.get("transition")==="fade"?d.fadeTo(o,1,a):a()},P.get("transition")==="fade"?d.fadeTo(o,0,function(){X.position(0,r)}):X.position(o,r)},X.next=function(){!U&&E[1]&&(P.get("loop")||E[I+1])&&(I=Z(1),at(E[I]))},X.prev=function(){!U&&E[1]&&(P.get("loop")||I)&&(I=Z(-1),at(E[I]))},X.close=function(){R&&!z&&(z=!0,R=!1,ot(l),P.get("onCleanup"),S.unbind("."+s),p.fadeTo(P.get("fadeOut")||0,0),d.stop().fadeTo(P.get("fadeOut")||0,0,function(){d.hide(),p.hide(),ot(h),x.remove(),setTimeout(function(){z=!1,ot(c),P.get("onClosed")},1)}))},X.remove=function(){if(!d)return;d.stop(),e.colorbox.close(),d.stop().remove(),p.remove(),z=!1,d=null,e("."+o).removeData(i).removeClass(o),e(t).unbind("click."+s)},X.element=function(){return e(P.el)},X.settings=r}(jQuery,document,window),define("lib-app/colorbox/jquery.colorbox",function(){}),define("lib-build/css!lib-app/colorbox/colorbox",[],function(){}),define("storymaps/tpl/ui/StoryText",["dojo/topic","esri/layers/GraphicsLayer","esri/graphic","esri/geometry/Point","esri/geometry/ScreenPoint","esri/symbols/PictureMarkerSymbol","lib-app/colorbox/jquery.colorbox","lib-build/css!lib-app/colorbox/colorbox"],function(e,t,n,r,i,s){function u(e){var t=$(e);return t.find("iframe").each(function(e,t){var n=$(t),r=n.attr("data-unload");n.attr("data-src",n.attr("src")).attr("data-unload",r===undefined||r=="true").removeAttr("src")}),t}function a(e){e.find("iframe").each(function(e,t){var n=$(t);n.attr("src")||n.attr("src",n.data("src"))})}function f(){l($("#sidePanel .sections"),$("#sidePanel .sections").width()-40),l($("#floatingPanel .sections"),$("#floatingPanel .sections").width()-34),l($("#mobileView .swiper-wrapper"),$("#mobileView").width()-30)}function l(e,t){e.find(".iframe-container.fit iframe").attr("height",t*9/16)}function c(){$.each(app.data.getContentActions(),function(e,t){$("a[data-storymaps="+t.id+"]").off("click").click(function(){v(t)})}),$("#mainStagePanel").find(".backLbl").html(i18n.viewer.mainStage.back)}function h(e){var t=$(e.target),n=t.is("img")?t:t.siblings("img");o=!0,$.colorbox({href:n.attr("src"),photo:!0,title:n.parents("figure").find("figcaption").html()||n.attr("title"),scalePhotos:!0,maxWidth:"90%",maxHeight:"90%"}),setTimeout(function(){o=!1},800)}function p(){$(".sections img").each(function(e,t){var n=!!$(t).attr("width"),r=$(t).css("float")=="right";$(t).parent().css("position","relative").addClass(n?"has-width":"no-width").addClass(r?"float-right":""),$(t).after($('<span class="btn-fullscreen"></span>').click(h)).click(h)}),$(document).unbind("cbox_complete",d).bind("cbox_complete",d)}function d(){$("#cboxLoadedContent img").click(function(){if(o)return;$.colorbox.close()})}function v(o){var u=app.data.getCurrentSection()&&app.data.getCurrentSection().media,a=u&&u.type=="webmap",f=a?app.map.extent:null,l=a?u.webmap.id:null;$(".mediaBackContainer").hide();if(o.type=="media"){var c=o.media.type=="webmap",h=!!c&&!!o.media.webmap.extent,p=!!c&&!!o.media.webmap.layers,d=!!c&&!!o.media.webmap.popup;e.publish("story-perform-action-media",o.media);if(h&&!p&&!d&&l==o.media.webmap.id)var v=e.subscribe("story-loaded-section",function(){v.remove(),setTimeout(function(){var e=app.map.on("update-end",function(){e.remove(),$(".mediaBackContainer").fadeOut().off("click")});$(".mediaBackContainer").click(function(){e.remove()})},800)});$(".backButton").off("click").click(function(){if(a&&(!c||l!=o.media.webmap.id))e.publish("ADDEDIT_SHOW_WEBMAP",l);else if(a&&c&&l==o.media.webmap.id){(h||d)&&app.map.setExtent(f).then(function(){app.map.infoWindow.reposition()}),d&&app.map.infoWindow.hide();if(p){var t=app.maps[l].response.itemInfo.itemData.operationalLayers,n=u.webmap.layers||[];$.each(t,function(e,t){var r=t.layerObject||(t.featureCollection?t.featureCollection.layers[0].layerObject:null),i=$(n).filter(function(e,t){return t.id==r.id});r.setVisibility(i.length?i[0].visibility:t.visibility)})}}else e.publish("story-perform-action-media",app.data.getCurrentSection().media);$(".mediaBackContainer").hide()}),d||$(".mediaBackContainer").show().css("marginLeft",-$(".mediaBackContainer .backButton").outerWidth()/2).css("marginRight",-$(".mediaBackContainer .backButton").outerWidth()/2)}else if(o.type=="zoom"){var m=null;if(!a)return;o.zoom.mapMarker&&(m=new t,m.add(new n(new r(o.zoom.center),new s(app.cfg.SECTION_ACTION_ZOOM_MAP_MARKER,32,32))),app.map.addLayer(m)),app.map.centerAndZoom(o.zoom.center,o.zoom.level).then(function(){if($("body").hasClass("layout-float")){var e=app.map.toScreen(m.graphics[0].geometry),t=null,n=null;$("body").hasClass("layout-float-right")?(t=$("#floatingPanel").position().left,e.x>=t&&(n=app.map.toMap(new i(app.map.width/2+e.x-t/2,$("#floatingPanel").height()/2)))):$("body").hasClass("layout-float-left")&&(t=$("#floatingPanel").position().left+$("#floatingPanel").width(),e.x<=t&&(n=app.map.toMap(new i(app.map.width/2-e.x+t/2,$("#floatingPanel").height()/2)))),n&&app.map.centerAt(n)}}),$(".mediaBackContainer").show().css("marginLeft",-$(".mediaBackContainer .backButton").outerWidth()/2).css("marginRight",-$(".mediaBackContainer .backButton").outerWidth()/2),$(".backButton").off("click").click(function(){app.map.setExtent(f),m&&app.map.removeLayer(m),$(".mediaBackContainer").hide()})}}var o=!1;return{createMainMediaActionLink:c,createMediaFullScreenButton:p,performAction:v,styleSectionPanelContent:f,prepareSectionPanelContent:u,loadSectionIframe:a}}),define("storymaps/common/utils/SocialSharing",["dojo/Deferred"],function(e){return{shareFacebook:function(e,t,n,r){var i="&p[title]="+encodeURIComponent(e)+"&p[summary]="+t+"&p[url]="+this.cleanURL(r||document.location.href);n?i+="&p[images][0]="+encodeURIComponent(n):i+="&p[images][0]="+encodeURIComponent($("meta[property='og:image']").attr("content")),window.open("http://www.facebook.com/sharer.php?s=100"+i,"","toolbar=0,status=0,width=626,height=436")},shareTwitter:function(e,t){var n="text="+encodeURIComponent(e)+"&url="+this.cleanURL(t||document.location.href)+"&related=EsriStoryMaps"+"&hashtags=storymap";window.open("https://twitter.com/intent/tweet?"+n,"","toolbar=0,status=0,width=626,height=436")},requestBitly:function(t){var n=["http://api.bitly.com/v3/shorten?callback=?","https://api-ssl.bitly.com/v3/shorten?callback=?"],r=location.protocol=="http:"?n[0]:n[1],i=this.cleanURL(t||document.location.href,!0),s=new e;return $.getJSON(r,{format:"json",apiKey:app.cfg.HEADER_SOCIAL.bitly.key,login:app.cfg.HEADER_SOCIAL.bitly.login,longUrl:i},function(e){!e||!e||!e.data.url?s.reject():s.resolve(e.data.url)}),s},cleanURL:function(e,t){return e=e.replace(/\?edit(=.*)*&/,"?"),e=e.replace(/\&edit(=.*)*/,""),e=e.replace(/\?edit/,""),t?e:encodeURIComponent(e)}}}),define("lib-build/tpl!storymaps/common/ui/share/ShareDialog",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal-dialog">\r\n	<div class="modal-content">\r\n		<div class="modal-logo"></div>\r\n		<div class="modal-header">\r\n			<h4 class="modal-title"></h4>\r\n		</div>\r\n\r\n		<div class="modal-body">\r\n			<div class="share-url-panel"></div>\r\n			\r\n			<div class="embed-title"></div>\r\n			<div class="share-embed-panel"></div>\r\n		</div>\r\n\r\n		<div class="modal-footer">\r\n			<button type="button" class="btn btnCancel btn-naked btn-close" data-dismiss="modal"></button>\r\n		</div>\r\n	</div>\r\n</div>';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareDialog",[],function(){}),define("lib-build/tpl!storymaps/common/ui/share/ShareURLPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="share-url-container">\r\n	<input type="text" class="form-control bitlylink"/>\r\n	<a class="btn btn-primary btn-bitlylink-copy" id="toto"></a>\r\n	<a class="btn btn-primary btn-bitlylink-open" target="_blank"></a>\r\n</div>';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareURLPanel",[],function(){}),function(e,t){var n=e,r=n.document,i=n.navigator,s=n.setTimeout,o=n.encodeURIComponent,u=n.ActiveXObject,a=n.Error,f=n.Number.parseInt||n.parseInt,l=n.Number.parseFloat||n.parseFloat,c=n.Number.isNaN||n.isNaN,h=n.Math.round,p=n.Date.now,d=n.Object.keys,v=n.Object.defineProperty,m=n.Object.prototype.hasOwnProperty,g=n.Array.prototype.slice,y=function(e){return g.call(e,0)},b=function(){var e,n,r,i,s,o,u=y(arguments),a=u[0]||{};for(e=1,n=u.length;e<n;e++)if((r=u[e])!=null)for(i in r)m.call(r,i)&&(s=a[i],o=r[i],a!==o&&o!==t&&(a[i]=o));return a},w=function(e){var t,n,r,i;if(typeof e!="object"||e==null)t=e;else if(typeof e.length=="number"){t=[];for(n=0,r=e.length;n<r;n++)m.call(e,n)&&(t[n]=w(e[n]))}else{t={};for(i in e)m.call(e,i)&&(t[i]=w(e[i]))}return t},E=function(e,t){var n={};for(var r=0,i=t.length;r<i;r++)t[r]in e&&(n[t[r]]=e[t[r]]);return n},S=function(e,t){var n={};for(var r in e)t.indexOf(r)===-1&&(n[r]=e[r]);return n},x=function(e){if(e)for(var t in e)m.call(e,t)&&delete e[t];return e},T=function(e,t){if(e&&e.nodeType===1&&e.ownerDocument&&t&&(t.nodeType===1&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||t.nodeType===9&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},N=function(e){var t;return typeof e=="string"&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},C=function(e){var t,n;return typeof e=="string"&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},k=function(){var e,t;try{throw new a}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||C(t.stack)),e},L=function(){var e,n,i;if(r.currentScript&&(e=r.currentScript.src))return e;n=r.getElementsByTagName("script");if(n.length===1)return n[0].src||t;if("readyState"in n[0])for(i=n.length;i--;)if(n[i].readyState==="interactive"&&(e=n[i].src))return e;return r.readyState==="loading"&&(e=n[n.length-1].src)?e:(e=k())?e:t},A=function(){var e,n,i,s=r.getElementsByTagName("script");for(e=s.length;e--;){if(!(i=s[e].src)){n=null;break}i=N(i);if(n==null)n=i;else if(n!==i){n=null;break}}return n||t},O=function(){var e=N(L())||A()||"";return e+"ZeroClipboard.swf"},M={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},_="11.0.0",D={},P,H={},B=null,j={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},F={swfPath:O(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},I=function(e){if(typeof e=="object"&&e!==null)for(var t in e)if(m.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))F[t]=e[t];else if(M.bridge==null)if(t==="containerId"||t==="swfObjectId"){if(!et(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");F[t]=e[t]}else F[t]=e[t];if(typeof e=="string"&&e){if(m.call(F,e))return F[e];return}return w(F)},q=function(){return{browser:E(i,["userAgent","platform","appName"]),flash:S(M,["bridge"]),zeroclipboard:{version:At.version,config:At.config()}}},R=function(){return!!(M.disabled||M.outdated||M.unavailable||M.deactivated)},U=function(e,t){var n,r,i,s={};if(typeof e=="string"&&e)i=e.toLowerCase().split(/\s+/);else if(typeof e=="object"&&e&&typeof t=="undefined")for(n in e)m.call(e,n)&&typeof n=="string"&&n&&typeof e[n]=="function"&&At.on(n,e[n]);if(i&&i.length){for(n=0,r=i.length;n<r;n++)e=i[n].replace(/^on/,""),s[e]=!0,D[e]||(D[e]=[]),D[e].push(t);s.ready&&M.ready&&At.emit({type:"ready"});if(s.error){var o=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=o.length;n<r;n++)if(M[o[n]]===!0){At.emit({type:"error",name:"flash-"+o[n]});break}}}return At},z=function(e,t){var n,r,i,s,o;if(arguments.length===0)s=d(D);else if(typeof e=="string"&&e)s=e.split(/\s+/);else if(typeof e=="object"&&e&&typeof t=="undefined")for(n in e)m.call(e,n)&&typeof n=="string"&&n&&typeof e[n]=="function"&&At.off(n,e[n]);if(s&&s.length)for(n=0,r=s.length;n<r;n++){e=s[n].toLowerCase().replace(/^on/,""),o=D[e];if(o&&o.length)if(t){i=o.indexOf(t);while(i!==-1)o.splice(i,1),i=o.indexOf(t,i)}else o.length=0}return At},W=function(e){var t;return typeof e=="string"&&e?t=w(D[e])||null:t=w(D),t},X=function(e){var t,n,r;e=tt(e);if(!e)return;if(ut(e))return;return e.type==="ready"&&M.overdue===!0?At.emit({type:"error",name:"flash-overdue"}):(t=b({},e),ot.call(this,t),e.type==="copy"&&(r=pt(H),n=r.data,B=r.formatMap),n)},V=function(){typeof M.ready!="boolean"&&(M.ready=!1);if(!At.isFlashUnusable()&&M.bridge===null){var e=F.flashLoadTimeout;typeof e=="number"&&e>=0&&s(function(){typeof M.deactivated!="boolean"&&(M.deactivated=!0),M.deactivated===!0&&At.emit({type:"error",name:"flash-deactivated"})},e),M.overdue=!1,ct()}},$=function(){At.clearData(),At.blur(),At.emit("destroy"),ht(),At.off()},J=function(e,t){var n;if(typeof e=="object"&&e&&typeof t=="undefined")n=e,At.clearData();else{if(typeof e!="string"||!e)return;n={},n[e]=t}for(var r in n)typeof r=="string"&&r&&m.call(n,r)&&typeof n[r]=="string"&&n[r]&&(H[r]=n[r])},K=function(e){typeof e=="undefined"?(x(H),B=null):typeof e=="string"&&m.call(H,e)&&delete H[e]},Q=function(e){if(typeof e=="undefined")return w(H);if(typeof e=="string"&&m.call(H,e))return H[e]},G=function(e){if(!e||e.nodeType!==1)return;P&&(Et(P,F.activeClass),P!==e&&Et(P,F.hoverClass)),P=e,wt(e,F.hoverClass);var t=e.getAttribute("title")||F.title;if(typeof t=="string"&&t){var n=lt(M.bridge);n&&n.setAttribute("title",t)}var r=F.forceHandCursor===!0||St(e,"cursor")==="pointer";Ct(r),Nt()},Y=function(){var e=lt(M.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.top="1px"),P&&(Et(P,F.hoverClass),Et(P,F.activeClass),P=null)},Z=function(){return P||null},et=function(e){return typeof e=="string"&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},tt=function(e){var t;typeof e=="string"&&e?(t=e,e={}):typeof e=="object"&&e&&typeof e.type=="string"&&e.type&&(t=e.type);if(!t)return;b(e,{type:t.toLowerCase(),target:e.target||P||null,relatedTarget:e.relatedTarget||null,currentTarget:M&&M.bridge||null,timeStamp:e.timeStamp||p()||null});var n=j[e.type];return e.type==="error"&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),e.type==="ready"&&b(e,{target:null,version:M.version}),e.type==="error"&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(e.name)&&b(e,{target:null,minimumVersion:_}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(e.name)&&b(e,{version:M.version})),e.type==="copy"&&(e.clipboardData={setData:At.setData,clearData:At.clearData}),e.type==="aftercopy"&&(e=dt(e,B)),e.target&&!e.relatedTarget&&(e.relatedTarget=nt(e.target)),e=rt(e),e},nt=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?r.getElementById(t):null},rt=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var i=e.target,s=e.type==="_mouseover"&&e.relatedTarget?e.relatedTarget:t,o=e.type==="_mouseout"&&e.relatedTarget?e.relatedTarget:t,u=Tt(i),a=n.screenLeft||n.screenX||0,f=n.screenTop||n.screenY||0,l=r.body.scrollLeft+r.documentElement.scrollLeft,c=r.body.scrollTop+r.documentElement.scrollTop,h=u.left+(typeof e._stageX=="number"?e._stageX:0),p=u.top+(typeof e._stageY=="number"?e._stageY:0),d=h-l,v=p-c,m=a+d,g=f+v,y=typeof e.movementX=="number"?e.movementX:0,w=typeof e.movementY=="number"?e.movementY:0;delete e._stageX,delete e._stageY,b(e,{srcElement:i,fromElement:s,toElement:o,screenX:m,screenY:g,pageX:h,pageY:p,clientX:d,clientY:v,x:d,y:v,movementX:y,movementY:w,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},it=function(e){var t=e&&typeof e.type=="string"&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},st=function(e,t,n,r){r?s(function(){e.apply(t,n)},0):e.apply(t,n)},ot=function(e){if(typeof e!="object"||!e||!e.type)return;var t=it(e),r=D["*"]||[],i=D[e.type]||[],s=r.concat(i);if(s&&s.length){var o,u,a,f,l,c=this;for(o=0,u=s.length;o<u;o++)a=s[o],f=c,typeof a=="string"&&typeof n[a]=="function"&&(a=n[a]),typeof a=="object"&&a&&typeof a.handleEvent=="function"&&(f=a,a=a.handleEvent),typeof a=="function"&&(l=b({},e),st(a,f,[l],t))}return this},ut=function(e){var t=e.target||P||null,n=e._source==="swf";delete e._source;var r=["flash-disabled","flash-outdated","flash-unavailable","flash-deactivated","flash-overdue"];switch(e.type){case"error":r.indexOf(e.name)!==-1&&b(M,{disabled:e.name==="flash-disabled",outdated:e.name==="flash-outdated",unavailable:e.name==="flash-unavailable",deactivated:e.name==="flash-deactivated",overdue:e.name==="flash-overdue",ready:!1});break;case"ready":var i=M.deactivated===!0;b(M,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:i,ready:!i});break;case"copy":var s,o,u=e.relatedTarget;!H["text/html"]&&!H["text/plain"]&&u&&(o=u.value||u.outerHTML||u.innerHTML)&&(s=u.value||u.textContent||u.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",s),o!==s&&e.clipboardData.setData("text/html",o)):!H["text/plain"]&&e.target&&(s=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",s));break;case"aftercopy":At.clearData(),t&&t!==bt()&&t.focus&&t.focus();break;case"_mouseover":At.focus(t),F.bubbleEvents===!0&&n&&(t&&t!==e.relatedTarget&&!T(e.relatedTarget,t)&&at(b({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),at(b({},e,{type:"mouseover"})));break;case"_mouseout":At.blur(),F.bubbleEvents===!0&&n&&(t&&t!==e.relatedTarget&&!T(e.relatedTarget,t)&&at(b({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),at(b({},e,{type:"mouseout"})));break;case"_mousedown":wt(t,F.activeClass),F.bubbleEvents===!0&&n&&at(b({},e,{type:e.type.slice(1)}));break;case"_mouseup":Et(t,F.activeClass),F.bubbleEvents===!0&&n&&at(b({},e,{type:e.type.slice(1)}));break;case"_click":case"_mousemove":F.bubbleEvents===!0&&n&&at(b({},e,{type:e.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type))return!0},at=function(e){if(!e||typeof e.type!="string"||!e)return;var t,i=e.target||null,s=i&&i.ownerDocument||r,o={view:s.defaultView||n,canBubble:!0,cancelable:!0,detail:e.type==="click"?1:0,button:typeof e.which=="number"?e.which-1:typeof e.button=="number"?e.button:s.createEvent?0:1},u=b(o,e);if(!i)return;s.createEvent&&i.dispatchEvent&&(u=[u.type,u.canBubble,u.cancelable,u.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget],t=s.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,u),t._source="js",i.dispatchEvent(t)))},ft=function(){var e=r.createElement("div");return e.id=F.containerId,e.className=F.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+kt(F.zIndex),e},lt=function(e){var t=e&&e.parentNode;while(t&&t.nodeName==="OBJECT"&&t.parentNode)t=t.parentNode;return t||null},ct=function(){var e,t=M.bridge,i=lt(t);if(!t){var s=yt(n.location.host,F),o=s==="never"?"none":"all",u=mt(F),a=F.swfPath+vt(F.swfPath,F);i=ft();var f=r.createElement("div");i.appendChild(f),r.body.appendChild(i);var l=r.createElement("div"),c=M.pluginType==="activex";l.innerHTML='<object id="'+F.swfObjectId+'" name="'+F.swfObjectId+'" '+'width="100%" height="100%" '+(c?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+a+'"')+">"+(c?'<param name="movie" value="'+a+'"/>':"")+'<param name="allowScriptAccess" value="'+s+'"/>'+'<param name="allowNetworking" value="'+o+'"/>'+'<param name="menu" value="false"/>'+'<param name="wmode" value="transparent"/>'+'<param name="flashvars" value="'+u+'"/>'+"</object>",t=l.firstChild,l=null,t.ZeroClipboard=At,i.replaceChild(t,f)}return t||(t=r[F.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&i&&(t=i.firstChild)),M.bridge=t||null,t},ht=function(){var e=M.bridge;if(e){var t=lt(e);t&&(M.pluginType==="activex"&&"readyState"in e?(e.style.display="none",function n(){if(e.readyState===4){for(var r in e)typeof e[r]=="function"&&(e[r]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else s(n,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),M.ready=null,M.bridge=null,M.deactivated=null}},pt=function(e){var t={},n={};if(typeof e!="object"||!e)return;for(var r in e)if(r&&m.call(e,r)&&typeof e[r]=="string"&&e[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[r],n.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[r],n.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[r],n.rtf=r;break;default:}return{data:t,formatMap:n}},dt=function(e,t){if(typeof e!="object"||!e||typeof t!="object"||!t)return e;var n={};for(var r in e)if(m.call(e,r)){if(r!=="success"&&r!=="data"){n[r]=e[r];continue}n[r]={};var i=e[r];for(var s in i)s&&m.call(i,s)&&m.call(t,s)&&(n[r][t[s]]=i[s])}return n},vt=function(e,t){var n=t==null||t&&t.cacheBust===!0;return n?(e.indexOf("?")===-1?"?":"&")+"noCache="+p():""},mt=function(e){var t,r,i,s,u="",a=[];e.trustedDomains&&(typeof e.trustedDomains=="string"?s=[e.trustedDomains]:typeof e.trustedDomains=="object"&&"length"in e.trustedDomains&&(s=e.trustedDomains));if(s&&s.length)for(t=0,r=s.length;t<r;t++)if(m.call(s,t)&&s[t]&&typeof s[t]=="string"){i=gt(s[t]);if(!i)continue;if(i==="*"){a.length=0,a.push(i);break}a.push.apply(a,[i,"//"+i,n.location.protocol+"//"+i])}return a.length&&(u+="trustedOrigins="+o(a.join(","))),e.forceEnhancedClipboard===!0&&(u+=(u?"&":"")+"forceEnhancedClipboard=true"),typeof e.swfObjectId=="string"&&e.swfObjectId&&(u+=(u?"&":"")+"swfObjectId="+o(e.swfObjectId)),u},gt=function(e){if(e==null||e==="")return null;e=e.replace(/^\s+|\s+$/g,"");if(e==="")return null;var t=e.indexOf("//");e=t===-1?e:e.slice(t+2);var n=e.indexOf("/");return e=n===-1?e:t===-1||n===0?null:e.slice(0,n),e&&e.slice(-4).toLowerCase()===".swf"?null:e||null},yt=function(){var e=function(e){var t,n,r,i=[];typeof e=="string"&&(e=[e]);if(typeof e!="object"||!e||typeof e.length!="number")return i;for(t=0,n=e.length;t<n;t++)if(m.call(e,t)&&(r=gt(e[t]))){if(r==="*"){i.length=0,i.push("*");break}i.indexOf(r)===-1&&i.push(r)}return i};return function(t,n){var r=gt(n.swfPath);r===null&&(r=t);var i=e(n.trustedDomains),s=i.length;if(s>0){if(s===1&&i[0]==="*")return"always";if(i.indexOf(t)!==-1)return s===1&&t===r?"sameDomain":"always"}return"never"}}(),bt=function(){try{return r.activeElement}catch(e){return null}},wt=function(e,t){if(!e||e.nodeType!==1)return e;if(e.classList)return e.classList.contains(t)||e.classList.add(t),e;if(t&&typeof t=="string"){var n=(t||"").split(/\s+/);if(e.nodeType===1)if(!e.className)e.className=t;else{var r=" "+e.className+" ",i=e.className;for(var s=0,o=n.length;s<o;s++)r.indexOf(" "+n[s]+" ")<0&&(i+=" "+n[s]);e.className=i.replace(/^\s+|\s+$/g,"")}}return e},Et=function(e,t){if(!e||e.nodeType!==1)return e;if(e.classList)return e.classList.contains(t)&&e.classList.remove(t),e;if(typeof t=="string"&&t){var n=t.split(/\s+/);if(e.nodeType===1&&e.className){var r=(" "+e.className+" ").replace(/[\n\t]/g," ");for(var i=0,s=n.length;i<s;i++)r=r.replace(" "+n[i]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}}return e},St=function(e,t){var r=n.getComputedStyle(e,null).getPropertyValue(t);return t!=="cursor"||!!r&&r!=="auto"||e.nodeName!=="A"?r:"pointer"},xt=function(){var e,t,n,i=1;return typeof r.body.getBoundingClientRect=="function"&&(e=r.body.getBoundingClientRect(),t=e.right-e.left,n=r.body.offsetWidth,i=h(t/n*100)/100),i},Tt=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),s,o,u;"pageXOffset"in n&&"pageYOffset"in n?(s=n.pageXOffset,o=n.pageYOffset):(u=xt(),s=h(r.documentElement.scrollLeft/u),o=h(r.documentElement.scrollTop/u));var a=r.documentElement.clientLeft||0,f=r.documentElement.clientTop||0;t.left=i.left+s-a,t.top=i.top+o-f,t.width="width"in i?i.width:i.right-i.left,t.height="height"in i?i.height:i.bottom-i.top}return t},Nt=function(){var e;if(P&&(e=lt(M.bridge))){var t=Tt(P);b(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+kt(F.zIndex)})}},Ct=function(e){M.ready===!0&&(M.bridge&&typeof M.bridge.setHandCursor=="function"?M.bridge.setHandCursor(e):M.ready=!1)},kt=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return typeof e=="number"&&!c(e)?t=e:typeof e=="string"&&(t=kt(f(e,10))),typeof t=="number"?t:"auto"},Lt=function(e){function f(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function c(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||e.slice(-13)==="chrome.plugin")}function h(e){e&&(s=!0,e.version&&(a=f(e.version)),!a&&e.description&&(a=f(e.description)),e.filename&&(u=c(e.filename)))}var t,n,r,s=!1,o=!1,u=!1,a="";if(i.plugins&&i.plugins.length)t=i.plugins["Shockwave Flash"],h(t),i.plugins["Shockwave Flash 2.0"]&&(s=!0,a="2.0.0.11");else if(i.mimeTypes&&i.mimeTypes.length)r=i.mimeTypes["application/x-shockwave-flash"],t=r&&r.enabledPlugin,h(t);else if(typeof e!="undefined"){o=!0;try{n=new e("ShockwaveFlash.ShockwaveFlash.7"),s=!0,a=f(n.GetVariable("$version"))}catch(p){try{n=new e("ShockwaveFlash.ShockwaveFlash.6"),s=!0,a="6.0.21"}catch(d){try{n=new e("ShockwaveFlash.ShockwaveFlash"),s=!0,a=f(n.GetVariable("$version"))}catch(v){o=!1}}}}M.disabled=s!==!0,M.outdated=a&&l(a)<l(_),M.version=a||"0.0.0",M.pluginType=u?"pepper":o?"activex":s?"netscape":"unknown"};Lt(u);var At=function(){if(!(this instanceof At))return new At;typeof At._createClient=="function"&&At._createClient.apply(this,y(arguments))};try{v(At,"version",{value:"2.1.3",writable:!1,configurable:!0,enumerable:!0})}catch(Ot){}At.config=function(){return I.apply(this,y(arguments))},At.state=function(){return q.apply(this,y(arguments))},At.isFlashUnusable=function(){return R.apply(this,y(arguments))},At.on=function(){return U.apply(this,y(arguments))},At.off=function(){return z.apply(this,y(arguments))},At.handlers=function(){return W.apply(this,y(arguments))},At.emit=function(){return X.apply(this,y(arguments))},At.create=function(){return V.apply(this,y(arguments))},At.destroy=function(){return $.apply(this,y(arguments))},At.setData=function(){return J.apply(this,y(arguments))},At.clearData=function(){return K.apply(this,y(arguments))},At.getData=function(){return Q.apply(this,y(arguments))},At.focus=At.activate=function(){return G.apply(this,y(arguments))},At.blur=At.deactivate=function(){return Y.apply(this,y(arguments))},At.activeElement=function(){return Z.apply(this,y(arguments))};var Mt=0,_t={},Dt=0,Pt={},Ht={};b(F,{autoActivate:!0});var Bt=function(e){var t=this;t.id=""+Mt++,_t[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),At.on("*",function(e){return t.emit(e)}),At.on("destroy",function(){t.destroy()}),At.create()},jt=function(e,t){var n,r,i,s={},o=_t[this.id]&&_t[this.id].handlers;if(typeof e=="string"&&e)i=e.toLowerCase().split(/\s+/);else if(typeof e=="object"&&e&&typeof t=="undefined")for(n in e)m.call(e,n)&&typeof n=="string"&&n&&typeof e[n]=="function"&&this.on(n,e[n]);if(i&&i.length){for(n=0,r=i.length;n<r;n++)e=i[n].replace(/^on/,""),s[e]=!0,o[e]||(o[e]=[]),o[e].push(t);s.ready&&M.ready&&this.emit({type:"ready",client:this});if(s.error){var u=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=u.length;n<r;n++)if(M[u[n]]){this.emit({type:"error",name:"flash-"+u[n],client:this});break}}}return this},Ft=function(e,t){var n,r,i,s,o,u=_t[this.id]&&_t[this.id].handlers;if(arguments.length===0)s=d(u);else if(typeof e=="string"&&e)s=e.split(/\s+/);else if(typeof e=="object"&&e&&typeof t=="undefined")for(n in e)m.call(e,n)&&typeof n=="string"&&n&&typeof e[n]=="function"&&this.off(n,e[n]);if(s&&s.length)for(n=0,r=s.length;n<r;n++){e=s[n].toLowerCase().replace(/^on/,""),o=u[e];if(o&&o.length)if(t){i=o.indexOf(t);while(i!==-1)o.splice(i,1),i=o.indexOf(t,i)}else o.length=0}return this},It=function(e){var t=null,n=_t[this.id]&&_t[this.id].handlers;return n&&(typeof e=="string"&&e?t=n[e]?n[e].slice(0):[]:t=w(n)),t},qt=function(e){if(Xt.call(this,e)){typeof e=="object"&&e&&typeof e.type=="string"&&e.type&&(e=b({},e));var t=b({},tt(e),{client:this});Vt.call(this,t)}return this},Rt=function(e){e=$t(e);for(var t=0;t<e.length;t++)if(m.call(e,t)&&e[t]&&e[t].nodeType===1){e[t].zcClippingId?Pt[e[t].zcClippingId].indexOf(this.id)===-1&&Pt[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Dt++,Pt[e[t].zcClippingId]=[this.id],F.autoActivate===!0&&Jt(e[t]));var n=_t[this.id]&&_t[this.id].elements;n.indexOf(e[t])===-1&&n.push(e[t])}return this},Ut=function(e){var t=_t[this.id];if(!t)return this;var n=t.elements,r;typeof e=="undefined"?e=n.slice(0):e=$t(e);for(var i=e.length;i--;)if(m.call(e,i)&&e[i]&&e[i].nodeType===1){r=0;while((r=n.indexOf(e[i],r))!==-1)n.splice(r,1);var s=Pt[e[i].zcClippingId];if(s){r=0;while((r=s.indexOf(this.id,r))!==-1)s.splice(r,1);s.length===0&&(F.autoActivate===!0&&Kt(e[i]),delete e[i].zcClippingId)}}return this},zt=function(){var e=_t[this.id];return e&&e.elements?e.elements.slice(0):[]},Wt=function(){this.unclip(),this.off(),delete _t[this.id]},Xt=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=_t[this.id]&&_t[this.id].elements,n=!!t&&t.length>0,r=!e.target||n&&t.indexOf(e.target)!==-1,i=e.relatedTarget&&n&&t.indexOf(e.relatedTarget)!==-1,s=e.client&&e.client===this;return r||i||s?!0:!1},Vt=function(e){if(typeof e!="object"||!e||!e.type)return;var t=it(e),r=_t[this.id]&&_t[this.id].handlers["*"]||[],i=_t[this.id]&&_t[this.id].handlers[e.type]||[],s=r.concat(i);if(s&&s.length){var o,u,a,f,l,c=this;for(o=0,u=s.length;o<u;o++)a=s[o],f=c,typeof a=="string"&&typeof n[a]=="function"&&(a=n[a]),typeof a=="object"&&a&&typeof a.handleEvent=="function"&&(f=a,a=a.handleEvent),typeof a=="function"&&(l=b({},e),st(a,f,[l],t))}return this},$t=function(e){return typeof e=="string"&&(e=[]),typeof e.length!="number"?[e]:e},Jt=function(e){if(!e||e.nodeType!==1)return;var t=function(e){if(!e&&!(e=n.event))return;e._source!=="js"&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source},r=function(r){if(!r&&!(r=n.event))return;t(r),At.focus(e)};e.addEventListener("mouseover",r,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Ht[e.zcClippingId]={mouseover:r,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}},Kt=function(e){if(!e||e.nodeType!==1)return;var t=Ht[e.zcClippingId];if(typeof t!="object"||!t)return;var n,r,i=["move","leave","enter","out","over"];for(var s=0,o=i.length;s<o;s++)n="mouse"+i[s],r=t[n],typeof r=="function"&&e.removeEventListener(n,r,!1);delete Ht[e.zcClippingId]};At._createClient=function(){Bt.apply(this,y(arguments))},At.prototype.on=function(){return jt.apply(this,y(arguments))},At.prototype.off=function(){return Ft.apply(this,y(arguments))},At.prototype.handlers=function(){return It.apply(this,y(arguments))},At.prototype.emit=function(){return qt.apply(this,y(arguments))},At.prototype.clip=function(){return Rt.apply(this,y(arguments))},At.prototype.unclip=function(){return Ut.apply(this,y(arguments))},At.prototype.elements=function(){return zt.apply(this,y(arguments))},At.prototype.destroy=function(){return Wt.apply(this,y(arguments))},At.prototype.setText=function(e){return At.setData("text/plain",e),this},At.prototype.setHtml=function(e){return At.setData("text/html",e),this},At.prototype.setRichText=function(e){return At.setData("application/rtf",e),this},At.prototype.setData=function(){return At.setData.apply(this,y(arguments)),this},At.prototype.clearData=function(){return At.clearData.apply(this,y(arguments)),this},At.prototype.getData=function(){return At.getData.apply(this,y(arguments))},typeof define=="function"&&define.amd?define("lib-app/ZeroClipboard/ZeroClipboard.min",[],function(){return At}):typeof module=="object"&&module&&typeof module.exports=="object"&&module.exports?module.exports=At:e.ZeroClipboard=At}(function(){return this||window}()),define("storymaps/common/ui/share/ShareURLPanel",["lib-build/tpl!./ShareURLPanel","lib-build/css!./ShareURLPanel","../../utils/SocialSharing","dojo/has","lib-app/ZeroClipboard/ZeroClipboard.min"],function(e,t,n,r,i){return function(s){function u(e){o.val(e),s.find(".btn-bitlylink-open").attr("href",e),n.requestBitly(e).then(function(e){o.val(e).select()}),i.config({swfPath:(app.isProduction?"resources/lib/":"lib-app")+"/ZeroClipboard/ZeroClipboard.swf"});var t=new i(s.find(".btn-bitlylink-copy"));t.on("copy",function(e){var t=e.clipboardData;t.setData("text/plain",s.find(".bitlylink").val()),s.find(".btn-bitlylink-copy").html(i18n.viewer.shareFromCommon.copied),s.find(".bitlylink").focus(),setTimeout(function(){s.find(".btn-bitlylink-copy").html(i18n.viewer.shareFromCommon.copy)},4e3)})}s.append(e({}));var o=s.find(".bitlylink");this.present=function(e){u(e),s.find(".btn-bitlylink-copy").html(i18n.viewer.shareFromCommon.copy),s.find(".btn-bitlylink-open").html(i18n.viewer.shareFromCommon.open),s.find(".btn-bitlylink-copy").toggle(!r("touch"))},this.focus=function(){o.select()}}}),define("lib-build/tpl!storymaps/common/ui/share/ShareEmbedPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="share-embed-container">\r\n	<div class="embed-explain"></div>\r\n	\r\n	<textarea class="embedTextarea"></textarea>\r\n	\r\n	<div>\r\n		<span class="embed-lbl-size"></span>\r\n		<div class="btn-group">\r\n			<button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">\r\n				<span class="embed-sizes-btn"></span>&nbsp;<span class="caret"></span>\r\n			</button>\r\n			<ul class="dropdown-menu embed-sizes" role="menu"></ul>\r\n		</div>\r\n	</div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareEmbedPanel",[],function(){}),define("storymaps/common/ui/share/ShareEmbedPanel",["lib-build/tpl!./ShareEmbedPanel","lib-build/css!./ShareEmbedPanel"],function(e){return function(n){function o(){$.each(i,function(e,t){n.find(".embed-sizes").append('<li><a data-width="'+t.width+'" data-height="'+t.height+'">'+t.width+" / "+t.height+"</a></li>")}),n.find(".embed-sizes a").click(function(){var e=$(this);e.parents(".btn-group").find(".embed-sizes-btn").text(e.text()),u(e.data("width"),e.data("height"))})}function u(e,t){n.find(".embedTextarea").val(r.replace("%URL%",s).replace("%WIDTH%",e).replace("%HEIGHT%",t))}var r='<iframe width="%WIDTH%" height="%HEIGHT%" src="%URL%" frameborder="0" scrolling="no"></iframe>',i=[{width:"100%",height:"800px"},{width:"100%",height:"640px"},{width:"800px",height:"600px"},{width:"640px",height:"480px"}],s=null;n.append(e({})),o(),this.present=function(e){s=e,n.find(".embed-explain").html(i18n.viewer.shareFromCommon.embedExplain),n.find(".embed-lbl-size").html(i18n.viewer.shareFromCommon.size),n.find(".embed-sizes a").eq(0).click()}}}),define("storymaps/common/ui/share/ShareDialog",["lib-build/tpl!./ShareDialog","lib-build/css!./ShareDialog","./ShareURLPanel","./ShareEmbedPanel"],function(e,t,n,r){return function(i){i.append(e({}));var s=new n(i.find(".share-url-panel")),o=new r(i.find(".share-embed-panel"));i.on("shown.bs.modal",function(){s.focus()}),this.present=function(e){s.present(e),o.present(e),i.find(".modal-title").html(i18n.viewer.headerFromCommon.share),i.find(".embed-title").html(i18n.viewer.shareFromCommon.embed),i.find(".btn-close").html(i18n.viewer.common.close),i.modal({keyboard:!0})}}}),define("storymaps/common/utils/HeaderHelper",["./SocialSharing","../ui/share/ShareDialog"],function(e,t){function r(e){e.find(".linkContainer").css("width",(e.find(".logoContainer").position()||{left:186}).left-e.find(".linkContainer").parent().position().left-e.find(".shareBtns").outerWidth()-($(".logoContainer").width()>1?14:4))}var n=new t($("#shareDialog"));return{setLogo:function(e,t){!t.logoURL||t.logoURL=="NO_LOGO"?(e.find(".logoImg").hide(),r(e)):(e.find(".logoLink").css("cursor",t.logoTarget?"pointer":"default"),t.logoTarget&&e.find(".logoLink").attr("href",t.logoTarget),r(e),e.find(".logoImg")[0].onload=function(){r(e)},e.find(".logoImg")[0].onerror=function(){r(e)},e.find(".logoImg").attr("src",t.logoURL).show())},setLink:function(e,t){t.linkURL&&t.linkText?e.find(".linkContainer").html('<a href="'+t.linkURL+'" class="link" target="_blank">'+t.linkText+"</a>"):e.find(".linkContainer").html(t.linkText)},setSocial:function(e,t){var n=t.socialBtn;e.find(".share_facebook").toggleClass("active",app.cfg.HEADER_SOCIAL&&app.cfg.HEADER_SOCIAL.facebook&&(!n||n.facebook)),e.find(".share_twitter").toggleClass("active",app.cfg.HEADER_SOCIAL&&app.cfg.HEADER_SOCIAL.twitter&&(!n||n.twitter)),e.find(".share_bitly").toggleClass("active",app.cfg.HEADER_SOCIAL&&app.cfg.HEADER_SOCIAL.bitly&&app.cfg.HEADER_SOCIAL.bitly.enable&&app.cfg.HEADER_SOCIAL.bitly.login&&app.cfg.HEADER_SOCIAL.bitly.key&&(!n||n.bitly))},initEvents:function(t){t.find(".share_facebook").off("click").click(function(){var t=$("<div>"+app.data.getWebAppData().getTitle()+"</div>").text(),n=$("<div>"+app.data.getWebAppData().getSubtitle()+"</div>").text();e.shareFacebook(t,n,null,$(this).data("url"))}),t.find(".share_twitter").off("click").click(function(){var t=$("<div>"+app.data.getWebAppData().getTitle()+"</div>").text();e.shareTwitter(t,$(this).data("url"))}),t.find(".share_bitly").off("click").click(function(){var t=$(this).data("url")||document.location.href;n.present(e.cleanURL(t,!0))}),$(window).resize(function(){r(t)})}}}),define("storymaps/tpl/ui/desktop/SidePanel",["lib-build/tpl!./SidePanelSection","lib-build/css!./SidePanel","lib-build/css!storymaps/common/builder/InlineFieldEdit","./DotNavBar","../StoryText","storymaps/common/utils/HeaderHelper","storymaps/common/utils/CommonHelper"],function(e,t,n,r,i,s,o){var u=!0;return function(n,a,f){function d(e){n.toggleClass("section-social-links",e.socialLinks),n.css("width",e.layoutCfg.sizeVal),$("body").removeClass("layout-side-left layout-side-right").addClass(e.layoutCfg.position=="left"?"layout-side-left":"layout-side-right")}function v(e,t){var r="";$.each(e,function(e,t){r+=m(e,t.status,t.content,t.title,t.OBJECTID)}),n.find(".appTitle").html(e.length?e[0].title:""),n.find(".sections").html(i.prepareSectionPanelContent(r)),n.find(".section").click(b).eq(t).addClass("active"),n.find(".panelEditBtn").toggle(!!(a&&e&&e.length)),n.show(),setTimeout(function(){n.find(".sections").focus(),E()},0)}function m(t,n,r,i){var s="";return n!="PUBLISHED"&&(s="hidden-section"),e({optHtmlClass:s,title:i,content:r,lblShare:i18n.viewer.headerFromCommon.share,shareURL:o.getAppViewModeURL()+"&section="+(t+1)})}function g(e){if(n.find(".sections")[0].scrollHeight<=n.outerHeight()-n.find(".header").outerHeight()+1)return;n.find(".scroll").show(),n.find(".scrollInner").tooltip({title:i18n.viewer.sideLayout.scroll}),o.addCSSRule(".scroll .tooltip-inner { background-color: "+e.text+"; color: "+e.panel+"; }"),o.addCSSRule(".scroll .tooltip-arrow { border-top-color: "+e.text+" !important; }"),n.find(".scroll").click(function(){n.find(".scroll .tooltip").remove(),T(),n.find(".sections").scrollTop(400)}).on("mousewheel",function(){n.find(".scroll .tooltip").remove(),n.find(".sections").scrollTop(100)})}function y(e){if(!p)return;l.showSectionNumber(e,!0,!1),f(e)}function b(){var e=$(this).index();if(c==e)return;l.showSectionNumber(e),f(e)}function w(){if(!p)return;var e=n.find(".sections"),t=e.eq(0)[0].scrollTop,r=e.height(),i=-1;x(),T();if(t===0)i=0;else{var s=-1,o=-1;n.find(".section").each(function(){var e=$(this).position().top;e<r/2.5&&(s=$(this).index()),o=e}),Math.round(o+n.find(".section").last().outerHeight())==r?i=n.find(".section").length-1:s==-1&&o>0?i=0:s==-1?i=n.find(".section").length-1:i=s}i!=c?(l.showSectionNumber(i,!1,!0),f(i)):(E(),a&&S())}function E(){var e=n.find(".sections"),t=e.height(),r=n.find(".section").length,s=[],o=null,u=null,a=!1;o=c;while(o>0){u=n.find(".section").eq(--o),a=u.position().top+u.outerHeight()>8;if(!a)break;s.push(o)}o=c;while(o<r-1){u=n.find(".section").eq(++o),a=u.position().top<t;if(!a)break;s.push(o)}s.sort(),$.each(s,function(e,t){i.loadSectionIframe(n.find(".section").eq(t))})}function S(e){var t=n.find(".section").eq(e!==undefined?e:c).position().top;n.find(".panelEditBtn").css("top",t<6?6:t)}function x(){var e=n.find(".sections"),t=e.eq(0)[0].scrollTop,r=n.find(".title:eq(0)").height(),i=t>=r,s=n.find(".appTitle").hasClass("anchored");i!=s&&(n.find(".appTitle").toggleClass("anchored",i),n.find(".header").toggleClass("titleanchored",i),setTimeout(function(){l.resize({height:n.height()})},300))}function T(){n.find(".scroll").slideUp()}function N(e){h.update({bgColor:e.dotNav,tooltipBgColor:e.text,tooltipFontColor:e.panel}),n.css("background-color",e.panel),n.find(".scroll").css("background-color",e.panel),n.find(".sections").css("color",e.text),n.find(".panelEditBtn").css("background-color",e.panel)}function C(e){s.setLogo(n,e),s.setLink(n,e),s.setSocial(n,e),s.initEvents(n,"bottom")}function k(){app.builder.openEditPopup({sectionIndex:c,displayTab:"content"})}function L(){n.find(".sections").scroll(w),a&&n.find(".panelEditBtn").click(k)}var l=this,c=0,h=new r(n.find(".navDots"),y),p=!1;this.init=function(e,t,r,i,s){c=0,d(r),N(s),C(i),v(e,t),L(),h.init({sections:e,sectionIndex:t,bgColor:s.dotNav,tooltipBgColor:s.text,tooltipFontColor:s.panel,dotColor:s.softBtn,tooltipPosition:r.layoutCfg.position=="left"?"right":"left"}),a||(setTimeout(function(){g(s)},0),e.length==1&&(n.find(".navDots").hide(),n.find("#sidePanelInner, .scroll").css({paddingLeft:0,paddingRight:0}))),setTimeout(function(){n.find(".sections")[0].scrollTop=0,u&&(p=!0),u=!1},0),setTimeout(function(){n.find(".sectionsWrapper").addClass("ie11fix"),setTimeout(function(){n.find(".sectionsWrapper").removeClass("ie11fix")},0)},0)},this.update=function(e,t,n){d(e),N(n),C(t),h.updateTooltipPlacement(e.layoutCfg.position=="left"?"right":"left")},this.resize=function(e){$("#sidePanel .sections").height(e.height-$("#sidePanel .sectionsWrapper").position().top-$(".builder-content-panel:visible").outerHeight()),x()},this.showSectionNumber=function(e,t,r){if(!n.is(":visible")||!p)return;if(c!=e){var s=n.find(".section.active .content iframe[data-unload=true]");s.length&&setTimeout(function(){s.each(function(e,t){var n=$(t);n.attr("src","")})},150)}i.loadSectionIframe(n.find(".section").eq(e));if(c!=e||t){p=!1,n.find(".section").removeClass("active").eq(e).addClass("active"),h.setActive(e);if(!r){if(!n.find(".sections").length||!n.find(".section").length){p=!0;return}var o=n.find(".sections").eq(0)[0].scrollTop,u=n.find(".sections")[0].scrollHeight,f=n.find(".sections").height(),l=n.find(".section").eq(e).position().top,d=l<=0||o+f<u;setTimeout(function(){n.find(".sections").animate({scrollTop:o+l},{duration:d?500:0,complete:function(){x(!0),T(),a&&S(e),setTimeout(function(){p=!0,c=e},100),E()},progress:function(){x(),T()}})},0)}else c=e,p=!0,a&&S()}},this.getSectionNumber=function(){return c},this.destroy=function(){n.hide()},this.toggleSwitchBuilderButton=function(e){n.find(".switchBuilder").html('<span class="glyphicon glyphicon-cog"></span>'+i18n.viewer.headerFromCommon.builderButton).off("click").click(o.switchToBuilder).toggle(e)}}}),define("lib-build/tpl!storymaps/tpl/ui/desktop/FloatingPanelSection",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="section swiper-slide '+((__t=optHtmlClass)==null?"":__t)+'">\r\n	<div class="section-inner">\r\n		<h1 class="title">'+((__t=title)==null?"":__t)+'</h1>\r\n		<div class="content">'+((__t=content)==null?"":__t)+'</div>\r\n		<div class="social">\r\n			<span class="shareIcon share_facebook icon-facebook-squared" data-url="'+((__t=shareURL)==null?"":__t)+'"> Facebook</span>\r\n			<span class="shareIcon share_twitter icon-twitter" data-url="'+((__t=shareURL)==null?"":__t)+'"> Twitter</span>\r\n			<span class="shareIcon share_bitly icon-link" data-url="'+((__t=shareURL)==null?"":__t)+'"> '+((__t=lblShare)==null?"":__t)+"</span>\r\n		</div>\r\n	</div>\r\n</div>";return __p}}),define("lib-build/css!storymaps/tpl/ui/desktop/FloatingPanel",[],function(){}),define("lib-build/css!storymaps/tpl/ui/desktop/Common",[],function(){}),function(e,t){function n(){if(!r.READY){r.event.determineEventTypes();for(var e in r.gestures)r.gestures.hasOwnProperty(e)&&r.detection.register(r.gestures[e]);r.event.onTouch(r.DOCUMENT,r.EVENT_MOVE,r.detection.detect),r.event.onTouch(r.DOCUMENT,r.EVENT_END,r.detection.detect),r.READY=!0}}var r=function(e,t){return new r.Instance(e,t||{})};r.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,r.HAS_TOUCHEVENTS="ontouchstart"in e,r.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,r.NO_MOUSEEVENTS=r.HAS_TOUCHEVENTS&&navigator.userAgent.match(r.MOBILE_REGEX),r.EVENT_TYPES={},r.DIRECTION_DOWN="down",r.DIRECTION_LEFT="left",r.DIRECTION_UP="up",r.DIRECTION_RIGHT="right",r.POINTER_MOUSE="mouse",r.POINTER_TOUCH="touch",r.POINTER_PEN="pen",r.EVENT_START="start",r.EVENT_MOVE="move",r.EVENT_END="end",r.DOCUMENT=document,r.plugins={},r.READY=!1,r.Instance=function(e,t){var i=this;return n(),this.element=e,this.enabled=!0,this.options=r.utils.extend(r.utils.extend({},r.defaults),t||{}),this.options.stop_browser_behavior&&r.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),r.event.onTouch(e,r.EVENT_START,function(e){i.enabled&&r.detection.startDetect(i,e)}),this},r.Instance.prototype={on:function(e,t){for(var n=e.split(" "),r=0;n.length>r;r++)this.element.addEventListener(n[r],t,!1);return this},off:function(e,t){for(var n=e.split(" "),r=0;n.length>r;r++)this.element.removeEventListener(n[r],t,!1);return this},trigger:function(e,t){var n=r.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var i=this.element;return r.utils.hasParent(t.target,i)&&(i=t.target),i.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this}};var i=null,s=!1,o=!1;r.event={bindDom:function(e,t,n){for(var r=t.split(" "),i=0;r.length>i;i++)e.addEventListener(r[i],n,!1)},onTouch:function(e,t,n){var u=this;this.bindDom(e,r.EVENT_TYPES[t],function(f){var l=f.type.toLowerCase();if(!l.match(/mouse/)||!o){(l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&1===f.which)&&(s=!0),l.match(/touch|pointer/)&&(o=!0);var c=0;s&&(r.HAS_POINTEREVENTS&&t!=r.EVENT_END?c=r.PointerEvent.updatePointer(t,f):l.match(/touch/)?c=f.touches.length:o||(c=l.match(/up/)?0:1),c>0&&t==r.EVENT_END?t=r.EVENT_MOVE:c||(t=r.EVENT_END),c||null===i?i=f:f=i,n.call(r.detection,u.collectEventData(e,t,f)),r.HAS_POINTEREVENTS&&t==r.EVENT_END&&(c=r.PointerEvent.updatePointer(t,f))),c||(i=null,s=!1,o=!1,r.PointerEvent.reset())}})},determineEventTypes:function(){var e;e=r.HAS_POINTEREVENTS?r.PointerEvent.getEvents():r.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],r.EVENT_TYPES[r.EVENT_START]=e[0],r.EVENT_TYPES[r.EVENT_MOVE]=e[1],r.EVENT_TYPES[r.EVENT_END]=e[2]},getTouchList:function(e){return r.HAS_POINTEREVENTS?r.PointerEvent.getTouchList():e.touches?e.touches:[{identifier:1,pageX:e.pageX,pageY:e.pageY,target:e.target}]},collectEventData:function(e,t,n){var i=this.getTouchList(n,t),s=r.POINTER_TOUCH;return(n.type.match(/mouse/)||r.PointerEvent.matchType(r.POINTER_MOUSE,n))&&(s=r.POINTER_MOUSE),{center:r.utils.getCenter(i),timeStamp:(new Date).getTime(),target:n.target,touches:i,eventType:t,pointerType:s,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return r.detection.stopDetect()}}}},r.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(e,t){return e==r.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var n={};return n[r.POINTER_MOUSE]=t.pointerType==t.MSPOINTER_TYPE_MOUSE||t.pointerType==r.POINTER_MOUSE,n[r.POINTER_TOUCH]=t.pointerType==t.MSPOINTER_TYPE_TOUCH||t.pointerType==r.POINTER_TOUCH,n[r.POINTER_PEN]=t.pointerType==t.MSPOINTER_TYPE_PEN||t.pointerType==r.POINTER_PEN,n[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},r.utils={extend:function(e,n,r){for(var i in n)e[i]!==t&&r||(e[i]=n[i]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],n=[],r=0,i=e.length;i>r;r++)t.push(e[r].pageX),n.push(e[r].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,r=t.pageX-e.pageX;return 180*Math.atan2(n,r)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.pageX-t.pageX),i=Math.abs(e.pageY-t.pageY);return n>=i?e.pageX-t.pageX>0?r.DIRECTION_LEFT:r.DIRECTION_RIGHT:e.pageY-t.pageY>0?r.DIRECTION_UP:r.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==r.DIRECTION_UP||e==r.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){var n,r=["webkit","khtml","moz","ms","o",""];if(t&&e.style){for(var i=0;r.length>i;i++)for(var s in t)t.hasOwnProperty(s)&&(n=s,r[i]&&(n=r[i]+n.substring(0,1).toUpperCase()+n.substring(1)),e.style[n]=t[s]);"none"==t.userSelect&&(e.onselectstart=function(){return!1})}}},r.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:r.utils.extend({},t),lastEvent:!1,name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);for(var t=this.current.inst.options,n=0,i=this.gestures.length;i>n;n++){var s=this.gestures[n];if(!this.stopped&&t[s.name]!==!1&&s.handler.call(s,e,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=e),e.eventType==r.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function(){this.previous=r.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(e){var t=this.current.startEvent;if(t&&(e.touches.length!=t.touches.length||e.touches===t.touches)){t.touches=[];for(var n=0,i=e.touches.length;i>n;n++)t.touches.push(r.utils.extend({},e.touches[n]))}var s=e.timeStamp-t.timeStamp,o=e.center.pageX-t.center.pageX,u=e.center.pageY-t.center.pageY,a=r.utils.getVelocity(s,o,u);return r.utils.extend(e,{deltaTime:s,deltaX:o,deltaY:u,velocityX:a.x,velocityY:a.y,distance:r.utils.getDistance(t.center,e.center),angle:r.utils.getAngle(t.center,e.center),direction:r.utils.getDirection(t.center,e.center),scale:r.utils.getScale(t.touches,e.touches),rotation:r.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),r.utils.extend(r.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},r.gestures=r.gestures||{},r.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(e,t){switch(e.eventType){case r.EVENT_START:clearTimeout(this.timer),r.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==r.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case r.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case r.EVENT_END:clearTimeout(this.timer)}}},r.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(e,t){if(e.eventType==r.EVENT_END){var n=r.detection.previous,i=!1;if(e.deltaTime>t.options.tap_max_touchtime||e.distance>t.options.tap_max_distance)return;n&&"tap"==n.name&&e.timeStamp-n.lastEvent.timeStamp<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),i=!0),(!i||t.options.tap_always)&&(r.detection.current.name="tap",t.trigger(r.detection.current.name,e))}}},r.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(e,t){if(e.eventType==r.EVENT_END){if(t.options.swipe_max_touches>0&&e.touches.length>t.options.swipe_max_touches)return;(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},r.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,n){if(r.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",e),this.triggered=!1,t;if(!(n.options.drag_max_touches>0&&e.touches.length>n.options.drag_max_touches))switch(e.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:if(e.distance<n.options.drag_min_distance&&r.detection.current.name!=this.name)return;r.detection.current.name=this.name,(r.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var i=r.detection.current.lastEvent.direction;e.drag_locked_to_axis&&i!==e.direction&&(e.direction=r.utils.isVertical(i)?0>e.deltaY?r.DIRECTION_UP:r.DIRECTION_DOWN:0>e.deltaX?r.DIRECTION_LEFT:r.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",e),this.triggered=!0),n.trigger(this.name,e),n.trigger(this.name+e.direction,e),(n.options.drag_block_vertical&&r.utils.isVertical(e.direction)||n.options.drag_block_horizontal&&!r.utils.isVertical(e.direction))&&e.preventDefault();break;case r.EVENT_END:this.triggered&&n.trigger(this.name+"end",e),this.triggered=!1}}},r.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(e,n){if(r.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",e),this.triggered=!1,t;if(!(2>e.touches.length))switch(n.options.transform_always_block&&e.preventDefault(),e.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:var i=Math.abs(1-e.scale),s=Math.abs(e.rotation);if(n.options.transform_min_scale>i&&n.options.transform_min_rotation>s)return;r.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",e),this.triggered=!0),n.trigger(this.name,e),s>n.options.transform_min_rotation&&n.trigger("rotate",e),i>n.options.transform_min_scale&&(n.trigger("pinch",e),n.trigger("pinch"+(1>e.scale?"in":"out"),e));break;case r.EVENT_END:this.triggered&&n.trigger(this.name+"end",e),this.triggered=!1}}},r.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,n){return n.options.prevent_mouseevents&&e.pointerType==r.POINTER_MOUSE?(e.stopDetect(),t):(n.options.prevent_default&&e.preventDefault(),e.eventType==r.EVENT_START&&n.trigger(this.name,e),t)}},r.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==r.EVENT_END&&t.trigger(this.name,e)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=r:(e.Hammer=r,"function"==typeof e.define&&e.define.amd&&e.define("hammer",[],function(){return r}))}(this),function(e,t){e!==t&&(Hammer.event.bindDom=function(n,r,i){e(n).on(r,function(e){var n=e.originalEvent||e;n.pageX===t&&(n.pageX=e.pageX,n.pageY=e.pageY),n.target||(n.target=e.target),n.which===t&&(n.which=n.button),n.preventDefault||(n.preventDefault=e.preventDefault),n.stopPropagation||(n.stopPropagation=e.stopPropagation),i.call(this,n)})},Hammer.Instance.prototype.on=function(t,n){return e(this.element).on(t,n)},Hammer.Instance.prototype.off=function(t,n){return e(this.element).off(t,n)},Hammer.Instance.prototype.trigger=function(t,n){var r=e(this.element);return r.has(n.target).length&&(r=e(n.target)),r.trigger({type:t,gesture:n})},e.fn.hammer=function(t){return this.each(function(){var n=e(this),r=n.data("hammer");r?r&&t&&Hammer.utils.extend(r.options,t):n.data("hammer",new Hammer(this,t||{}))})})}(window.jQuery||window.Zepto),define("lib-app/jquery.hammer.min",function(){});var Swiper=function(e,t){function r(e,t){return document.querySelectorAll?(t||document).querySelectorAll(e):jQuery(e,t)}function b(e){return Object.prototype.toString.apply(e)==="[object Array]"?!0:!1}function x(){var e=u-l;return t.freeMode&&(e=u-l),t.slidesPerView>i.slides.length&&!t.centeredSlides&&(e=0),e<0&&(e=0),e}function T(){function o(e){var n=new Image;n.onload=function(){i&&i.imagesLoaded!==undefined&&i.imagesLoaded++,i.imagesLoaded===i.imagesToLoad.length&&(i.reInit(),t.onImagesReady&&i.fireCallback(t.onImagesReady,i))},n.src=e}var e=i.h.addEventListener,n=t.eventTarget==="wrapper"?i.wrapper:i.container;!i.browser.ie10&&!i.browser.ie11?(i.support.touch&&(e(n,"touchstart",I),e(n,"touchmove",U),e(n,"touchend",z)),t.simulateTouch&&(e(n,"mousedown",I),e(document,"mousemove",U),e(document,"mouseup",z))):(e(n,i.touchEvents.touchStart,I),e(document,i.touchEvents.touchMove,U),e(document,i.touchEvents.touchEnd,z)),t.autoResize&&e(window,"resize",i.resizeFix),N(),i._wheelEvent=!1;if(t.mousewheelControl){document.onmousewheel!==undefined&&(i._wheelEvent="mousewheel");if(!i._wheelEvent)try{new WheelEvent("wheel"),i._wheelEvent="wheel"}catch(s){}i._wheelEvent||(i._wheelEvent="DOMMouseScroll"),i._wheelEvent&&e(i.container,i._wheelEvent,A)}t.keyboardControl&&e(document,"keydown",k);if(t.updateOnImagesReady){i.imagesToLoad=r("img",i.container);for(var u=0;u<i.imagesToLoad.length;u++)o(i.imagesToLoad[u].getAttribute("src"))}}function N(){var e=i.h.addEventListener,n;if(t.preventLinks){var s=r("a",i.container);for(n=0;n<s.length;n++)e(s[n],"click",P)}if(t.releaseFormElements){var o=r("input, textarea, select",i.container);for(n=0;n<o.length;n++)e(o[n],i.touchEvents.touchStart,H,!0)}if(t.onSlideClick)for(n=0;n<i.slides.length;n++)e(i.slides[n],"click",M);if(t.onSlideTouch)for(n=0;n<i.slides.length;n++)e(i.slides[n],i.touchEvents.touchStart,_)}function C(){var e=i.h.removeEventListener,n;if(t.onSlideClick)for(n=0;n<i.slides.length;n++)e(i.slides[n],"click",M);if(t.onSlideTouch)for(n=0;n<i.slides.length;n++)e(i.slides[n],i.touchEvents.touchStart,_);if(t.releaseFormElements){var s=r("input, textarea, select",i.container);for(n=0;n<s.length;n++)e(s[n],i.touchEvents.touchStart,H,!0)}if(t.preventLinks){var o=r("a",i.container);for(n=0;n<o.length;n++)e(o[n],"click",P)}}function k(e){var t=e.keyCode||e.charCode;if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)return;if(t===37||t===39||t===38||t===40){var n=!1,r=i.h.getOffset(i.container),s=i.h.windowScroll().left,o=i.h.windowScroll().top,u=i.h.windowWidth(),a=i.h.windowHeight(),f=[[r.left,r.top],[r.left+i.width,r.top],[r.left,r.top+i.height],[r.left+i.width,r.top+i.height]];for(var l=0;l<f.length;l++){var c=f[l];c[0]>=s&&c[0]<=s+u&&c[1]>=o&&c[1]<=o+a&&(n=!0)}if(!n)return}if(d){if(t===37||t===39)e.preventDefault?e.preventDefault():e.returnValue=!1;t===39&&i.swipeNext(),t===37&&i.swipePrev()}else{if(t===38||t===40)e.preventDefault?e.preventDefault():e.returnValue=!1;t===40&&i.swipeNext(),t===38&&i.swipePrev()}}function A(e){var n=i._wheelEvent,r=0;if(e.detail)r=-e.detail;else if(n==="mousewheel")if(t.mousewheelControlForceToAxis)if(d){if(!(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)))return;r=e.wheelDeltaX}else{if(!(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)))return;r=e.wheelDeltaY}else r=e.wheelDelta;else if(n==="DOMMouseScroll")r=-e.detail;else if(n==="wheel")if(t.mousewheelControlForceToAxis)if(d){if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)))return;r=-e.deltaX}else{if(!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))return;r=-e.deltaY}else r=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;if(!t.freeMode)(new Date).getTime()-L>60&&(r<0?i.swipeNext():i.swipePrev()),L=(new Date).getTime();else{var s=i.getWrapperTranslate()+r;s>0&&(s=0),s<-x()&&(s=-x()),i.setWrapperTransition(0),i.setWrapperTranslate(s),i.updateActiveSlide(s);if(s===0||s===-x())return}return t.autoplay&&i.stopAutoplay(!0),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}function M(e){i.allowSlideClick&&(D(e),i.fireCallback(t.onSlideClick,i,e))}function _(e){D(e),i.fireCallback(t.onSlideTouch,i,e)}function D(e){if(!e.currentTarget){var n=e.srcElement;do{if(n.className.indexOf(t.slideClass)>-1)break;n=n.parentNode}while(n);i.clickedSlide=n}else i.clickedSlide=e.currentTarget;i.clickedTarget=e.target,i.clickedSlideIndex=i.slides.indexOf(i.clickedSlide),i.clickedSlideLoopIndex=i.clickedSlideIndex-(i.loopedSlides||0)}function P(e){if(!i.allowLinks)return e.preventDefault?e.preventDefault():e.returnValue=!1,t.preventLinksPropagation&&"stopPropagation"in e&&e.stopPropagation(),!1}function H(e){return e.stopPropagation?e.stopPropagation():e.returnValue=!1,!1}function I(e){t.preventLinks&&(i.allowLinks=!0);if(i.isTouched||t.onlyExternal)return!1;if(t.noSwiping&&(e.target||e.srcElement)&&W(e.target||e.srcElement))return!1;F=!1,i.isTouched=!0,B=e.type==="touchstart";if(!B||e.targetTouches.length===1){i.callPlugins("onTouchStartBegin"),!B&&!i.isAndroid&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var n=B?e.targetTouches[0].pageX:e.pageX||e.clientX,r=B?e.targetTouches[0].pageY:e.pageY||e.clientY;i.touches.startX=i.touches.currentX=n,i.touches.startY=i.touches.currentY=r,i.touches.start=i.touches.current=d?n:r,i.setWrapperTransition(0),i.positions.start=i.positions.current=i.getWrapperTranslate(),i.setWrapperTranslate(i.positions.start),i.times.start=(new Date).getTime(),f=undefined,t.moveStartThreshold>0&&(j=!1),t.onTouchStart&&i.fireCallback(t.onTouchStart,i,e),i.callPlugins("onTouchStartEnd")}}function U(e){if(!i.isTouched||t.onlyExternal)return;if(B&&e.type==="mousemove")return;var n=B?e.targetTouches[0].pageX:e.pageX||e.clientX,r=B?e.targetTouches[0].pageY:e.pageY||e.clientY;typeof f=="undefined"&&d&&(f=!!(f||Math.abs(r-i.touches.startY)>Math.abs(n-i.touches.startX))),typeof f=="undefined"&&!d&&(f=!!(f||Math.abs(r-i.touches.startY)<Math.abs(n-i.touches.startX)));if(f){i.isTouched=!1;return}if(e.assignedToSwiper){i.isTouched=!1;return}e.assignedToSwiper=!0,t.preventLinks&&(i.allowLinks=!1),t.onSlideClick&&(i.allowSlideClick=!1),t.autoplay&&i.stopAutoplay(!0);if(!B||e.touches.length===1){i.isMoved||(i.callPlugins("onTouchMoveStart"),t.loop&&(i.fixLoop(),i.positions.start=i.getWrapperTranslate()),t.onTouchMoveStart&&i.fireCallback(t.onTouchMoveStart,i)),i.isMoved=!0,e.preventDefault?e.preventDefault():e.returnValue=!1,i.touches.current=d?n:r,i.positions.current=(i.touches.current-i.touches.start)*t.touchRatio+i.positions.start,i.positions.current>0&&t.onResistanceBefore&&i.fireCallback(t.onResistanceBefore,i,i.positions.current),i.positions.current<-x()&&t.onResistanceAfter&&i.fireCallback(t.onResistanceAfter,i,Math.abs(i.positions.current+x()));if(t.resistance&&t.resistance!=="100%"){var s;i.positions.current>0&&(s=1-i.positions.current/l/2,s<.5?i.positions.current=l/2:i.positions.current=i.positions.current*s);if(i.positions.current<-x()){var o=(i.touches.current-i.touches.start)*t.touchRatio+(x()+i.positions.start);s=(l+o)/l;var u=i.positions.current-o*(1-s)/2,a=-x()-l/2;u<a||s<=0?i.positions.current=a:i.positions.current=u}}t.resistance&&t.resistance==="100%"&&(i.positions.current>0&&(!t.freeMode||!!t.freeModeFluid)&&(i.positions.current=0),i.positions.current<-x()&&(!t.freeMode||!!t.freeModeFluid)&&(i.positions.current=-x()));if(!t.followFinger)return;if(!t.moveStartThreshold)i.setWrapperTranslate(i.positions.current);else if(Math.abs(i.touches.current-i.touches.start)>t.moveStartThreshold||j){if(!j){j=!0,i.touches.start=i.touches.current;return}i.setWrapperTranslate(i.positions.current)}else i.positions.current=i.positions.start;return(t.freeMode||t.watchActiveIndex)&&i.updateActiveSlide(i.positions.current),t.grabCursor&&(i.container.style.cursor="move",i.container.style.cursor="grabbing",i.container.style.cursor="-moz-grabbin",i.container.style.cursor="-webkit-grabbing"),q||(q=i.touches.current),R||(R=(new Date).getTime()),i.velocity=(i.touches.current-q)/((new Date).getTime()-R)/2,Math.abs(i.touches.current-q)<2&&(i.velocity=0),q=i.touches.current,R=(new Date).getTime(),i.callPlugins("onTouchMoveEnd"),t.onTouchMove&&i.fireCallback(t.onTouchMove,i,e),!1}}function z(e){f&&i.swipeReset();if(t.onlyExternal||!i.isTouched)return;i.isTouched=!1,t.grabCursor&&(i.container.style.cursor="move",i.container.style.cursor="grab",i.container.style.cursor="-moz-grab",i.container.style.cursor="-webkit-grab"),!i.positions.current&&i.positions.current!==0&&(i.positions.current=i.positions.start),t.followFinger&&i.setWrapperTranslate(i.positions.current),i.times.end=(new Date).getTime(),i.touches.diff=i.touches.current-i.touches.start,i.touches.abs=Math.abs(i.touches.diff),i.positions.diff=i.positions.current-i.positions.start,i.positions.abs=Math.abs(i.positions.diff);var n=i.positions.diff,r=i.positions.abs,s=i.times.end-i.times.start;r<5&&s<300&&i.allowLinks===!1&&(!t.freeMode&&r!==0&&i.swipeReset(),t.preventLinks&&(i.allowLinks=!0),t.onSlideClick&&(i.allowSlideClick=!0)),setTimeout(function(){t.preventLinks&&(i.allowLinks=!0),t.onSlideClick&&(i.allowSlideClick=!0)},100);var u=x();if(!i.isMoved&&t.freeMode){i.isMoved=!1,t.onTouchEnd&&i.fireCallback(t.onTouchEnd,i,e),i.callPlugins("onTouchEnd");return}if(!i.isMoved||i.positions.current>0||i.positions.current<-u){i.swipeReset(),t.onTouchEnd&&i.fireCallback(t.onTouchEnd,i,e),i.callPlugins("onTouchEnd");return}i.isMoved=!1;if(t.freeMode){if(t.freeModeFluid){var c=1e3*t.momentumRatio,h=i.velocity*c,p=i.positions.current+h,v=!1,m,g=Math.abs(i.velocity)*20*t.momentumBounceRatio;p<-u&&(t.momentumBounce&&i.support.transitions?(p+u<-g&&(p=-u-g),m=-u,v=!0,F=!0):p=-u),p>0&&(t.momentumBounce&&i.support.transitions?(p>g&&(p=g),m=0,v=!0,F=!0):p=0),i.velocity!==0&&(c=Math.abs((p-i.positions.current)/i.velocity)),i.setWrapperTranslate(p),i.setWrapperTransition(c),t.momentumBounce&&v&&i.wrapperTransitionEnd(function(){if(!F)return;t.onMomentumBounce&&i.fireCallback(t.onMomentumBounce,i),i.callPlugins("onMomentumBounce"),i.setWrapperTranslate(m),i.setWrapperTransition(300)}),i.updateActiveSlide(p)}(!t.freeModeFluid||s>=300)&&i.updateActiveSlide(i.positions.current),t.onTouchEnd&&i.fireCallback(t.onTouchEnd,i,e),i.callPlugins("onTouchEnd");return}a=n<0?"toNext":"toPrev",a==="toNext"&&s<=300&&(r<30||!t.shortSwipes?i.swipeReset():i.swipeNext(!0)),a==="toPrev"&&s<=300&&(r<30||!t.shortSwipes?i.swipeReset():i.swipePrev(!0));var y=0;if(t.slidesPerView==="auto"){var b=Math.abs(i.getWrapperTranslate()),w=0,E;for(var S=0;S<i.slides.length;S++){E=d?i.slides[S].getWidth(!0,t.roundLengths):i.slides[S].getHeight(!0,t.roundLengths),w+=E;if(w>b){y=E;break}}y>l&&(y=l)}else y=o*t.slidesPerView;a==="toNext"&&s>300&&(r>=y*t.longSwipesRatio?i.swipeNext(!0):i.swipeReset()),a==="toPrev"&&s>300&&(r>=y*t.longSwipesRatio?i.swipePrev(!0):i.swipeReset()),t.onTouchEnd&&i.fireCallback(t.onTouchEnd,i,e),i.callPlugins("onTouchEnd")}function W(e){var n=!1;do e.className.indexOf(t.noSwipingClass)>-1&&(n=!0),e=e.parentElement;while(!n&&e.parentElement&&e.className.indexOf(t.wrapperClass)===-1);return!n&&e.className.indexOf(t.wrapperClass)>-1&&e.className.indexOf(t.noSwipingClass)>-1&&(n=!0),n}function X(e,t){var n=document.createElement("div"),r;return n.innerHTML=t,r=n.firstChild,r.className+=" "+e,r.outerHTML}function V(e,n,r){function u(){var s=+(new Date),h=s-o;a+=f*h/(1e3/60),c=l==="toNext"?a>e:a<e,c?(i.setWrapperTranslate(Math.round(a)),i._DOMAnimating=!0,window.setTimeout(function(){u()},1e3/60)):(t.onSlideChangeEnd&&(n==="to"?r.runCallbacks===!0&&i.fireCallback(t.onSlideChangeEnd,i):i.fireCallback(t.onSlideChangeEnd,i)),i.setWrapperTranslate(e),i._DOMAnimating=!1)}var s=n==="to"&&r.speed>=0?r.speed:t.speed,o=+(new Date);if(i.support.transitions||!t.DOMAnimation)i.setWrapperTranslate(e),i.setWrapperTransition(s);else{var a=i.getWrapperTranslate(),f=Math.ceil((e-a)/s*(1e3/60)),l=a>e?"toNext":"toPrev",c=l==="toNext"?a>e:a<e;if(i._DOMAnimating)return;u()}i.updateActiveSlide(e),t.onSlideNext&&n==="next"&&i.fireCallback(t.onSlideNext,i,e),t.onSlidePrev&&n==="prev"&&i.fireCallback(t.onSlidePrev,i,e),t.onSlideReset&&n==="reset"&&i.fireCallback(t.onSlideReset,i,e),(n==="next"||n==="prev"||n==="to"&&r.runCallbacks===!0)&&$(n)}function $(e){i.callPlugins("onSlideChangeStart");if(t.onSlideChangeStart)if(t.queueStartCallbacks&&i.support.transitions){if(i._queueStartCallbacks)return;i._queueStartCallbacks=!0,i.fireCallback(t.onSlideChangeStart,i,e),i.wrapperTransitionEnd(function(){i._queueStartCallbacks=!1})}else i.fireCallback(t.onSlideChangeStart,i,e);if(t.onSlideChangeEnd)if(i.support.transitions)if(t.queueEndCallbacks){if(i._queueEndCallbacks)return;i._queueEndCallbacks=!0,i.wrapperTransitionEnd(function(n){i.fireCallback(t.onSlideChangeEnd,n,e)})}else i.wrapperTransitionEnd(function(n){i.fireCallback(t.onSlideChangeEnd,n,e)});else t.DOMAnimation||setTimeout(function(){i.fireCallback(t.onSlideChangeEnd,i,e)},10)}function J(){var e=i.paginationButtons;if(e)for(var t=0;t<e.length;t++)i.h.removeEventListener(e[t],"click",Q)}function K(){var e=i.paginationButtons;if(e)for(var t=0;t<e.length;t++)i.h.addEventListener(e[t],"click",Q)}function Q(e){var t,n=e.target||e.srcElement,r=i.paginationButtons;for(var s=0;s<r.length;s++)n===r[s]&&(t=s);i.swipeTo(t)}function Z(){G=setTimeout(function(){t.loop?(i.fixLoop(),i.swipeNext(!0)):i.swipeNext(!0)||(t.autoplayStopOnLast?(clearTimeout(G),G=undefined):i.swipeTo(0)),i.wrapperTransitionEnd(function(){typeof G!="undefined"&&Z()})},t.autoplay)}function et(){i.calcSlides(),t.loader.slides.length>0&&i.slides.length===0&&i.loadSlides(),t.loop&&i.createLoop(),i.init(),T(),t.pagination&&i.createPagination(!0),t.loop||t.initialSlide>0?i.swipeTo(t.initialSlide,0,!1):i.updateActiveSlide(0),t.autoplay&&i.startAutoplay(),i.centerIndex=i.activeIndex,t.onSwiperCreated&&i.fireCallback(t.onSwiperCreated,i),i.callPlugins("onSwiperCreated")}if(document.body.__defineGetter__&&HTMLElement){var n=HTMLElement.prototype;n.__defineGetter__&&n.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return t==="float"&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1});if(!document.querySelectorAll&&!window.jQuery)return;if(typeof e=="undefined")return;if(!e.nodeType&&r(e).length===0)return;var i=this;i.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0},i.positions={start:0,abs:0,diff:0,current:0},i.times={start:0,end:0},i.id=(new Date).getTime(),i.container=e.nodeType?e:r(e)[0],i.isTouched=!1,i.isMoved=!1,i.activeIndex=0,i.centerIndex=0,i.activeLoaderIndex=0,i.activeLoopIndex=0,i.previousIndex=null,i.velocity=0,i.snapGrid=[],i.slidesGrid=[],i.imagesToLoad=[],i.imagesLoaded=0,i.wrapperLeft=0,i.wrapperRight=0,i.wrapperTop=0,i.wrapperBottom=0,i.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>=0;var s,o,u,a,f,l,c={eventTarget:"wrapper",mode:"horizontal",touchRatio:1,speed:300,freeMode:!1,freeModeFluid:!1,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,slidesPerViewFit:!0,simulateTouch:!0,followFinger:!0,shortSwipes:!0,longSwipesRatio:.5,moveStartThreshold:!1,onlyExternal:!1,createPagination:!0,pagination:!1,paginationElement:"span",paginationClickable:!1,paginationAsRange:!0,resistance:!0,scrollContainer:!1,preventLinks:!0,preventLinksPropagation:!1,noSwiping:!1,noSwipingClass:"swiper-no-swiping",initialSlide:0,keyboardControl:!1,mousewheelControl:!1,mousewheelControlForceToAxis:!1,useCSS3Transforms:!0,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,loop:!1,loopAdditionalSlides:0,roundLengths:!1,calculateHeight:!1,cssWidthAndHeight:!1,updateOnImagesReady:!0,releaseFormElements:!0,watchActiveIndex:!1,visibilityFullFit:!1,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:!1,queueStartCallbacks:!1,queueEndCallbacks:!1,autoResize:!0,resizeReInit:!1,DOMAnimation:!0,loader:{slides:[],slidesHTMLType:"inner",surroundGroups:1,logic:"reload",loadAllSlides:!1},slideElement:"div",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",wrapperClass:"swiper-wrapper",paginationElementClass:"swiper-pagination-switch",paginationActiveClass:"swiper-active-switch",paginationVisibleClass:"swiper-visible-switch"};t=t||{};for(var h in c)if(h in t&&typeof t[h]=="object")for(var p in c[h])p in t[h]||(t[h][p]=c[h][p]);else h in t||(t[h]=c[h]);i.params=t,t.scrollContainer&&(t.freeMode=!0,t.freeModeFluid=!0),t.loop&&(t.resistance="100%");var d=t.mode==="horizontal",v=["mousedown","mousemove","mouseup"];i.browser.ie10&&(v=["MSPointerDown","MSPointerMove","MSPointerUp"]),i.browser.ie11&&(v=["pointerdown","pointermove","pointerup"]),i.touchEvents={touchStart:i.support.touch||!t.simulateTouch?"touchstart":v[0],touchMove:i.support.touch||!t.simulateTouch?"touchmove":v[1],touchEnd:i.support.touch||!t.simulateTouch?"touchend":v[2]};for(var m=i.container.childNodes.length-1;m>=0;m--)if(i.container.childNodes[m].className){var g=i.container.childNodes[m].className.split(/\s+/);for(var y=0;y<g.length;y++)g[y]===t.wrapperClass&&(s=i.container.childNodes[m])}i.wrapper=s,i._extendSwiperSlide=function(e){return e.append=function(){return t.loop?e.insertAfter(i.slides.length-i.loopedSlides):(i.wrapper.appendChild(e),i.reInit()),e},e.prepend=function(){return t.loop?(i.wrapper.insertBefore(e,i.slides[i.loopedSlides]),i.removeLoopedSlides(),i.calcSlides(),i.createLoop()):i.wrapper.insertBefore(e,i.wrapper.firstChild),i.reInit(),e},e.insertAfter=function(n){if(typeof n=="undefined")return!1;var r;return t.loop?(r=i.slides[n+1+i.loopedSlides],r?i.wrapper.insertBefore(e,r):i.wrapper.appendChild(e),i.removeLoopedSlides(),i.calcSlides(),i.createLoop()):(r=i.slides[n+1],i.wrapper.insertBefore(e,r)),i.reInit(),e},e.clone=function(){return i._extendSwiperSlide(e.cloneNode(!0))},e.remove=function(){i.wrapper.removeChild(e),i.reInit()},e.html=function(t){return typeof t=="undefined"?e.innerHTML:(e.innerHTML=t,e)},e.index=function(){var t;for(var n=i.slides.length-1;n>=0;n--)e===i.slides[n]&&(t=n);return t},e.isActive=function(){return e.index()===i.activeIndex?!0:!1},e.swiperSlideDataStorage||(e.swiperSlideDataStorage={}),e.getData=function(t){return e.swiperSlideDataStorage[t]},e.setData=function(t,n){return e.swiperSlideDataStorage[t]=n,e},e.data=function(t,n){return typeof n=="undefined"?e.getAttribute("data-"+t):(e.setAttribute("data-"+t,n),e)},e.getWidth=function(t,n){return i.h.getWidth(e,t,n)},e.getHeight=function(t,n){return i.h.getHeight(e,t,n)},e.getOffset=function(){return i.h.getOffset(e)},e},i.calcSlides=function(e){var n=i.slides?i.slides.length:!1;i.slides=[],i.displaySlides=[];for(var r=0;r<i.wrapper.childNodes.length;r++)if(i.wrapper.childNodes[r].className){var s=i.wrapper.childNodes[r].className,o=s.split(/\s+/);for(var u=0;u<o.length;u++)o[u]===t.slideClass&&i.slides.push(i.wrapper.childNodes[r])}for(r=i.slides.length-1;r>=0;r--)i._extendSwiperSlide(i.slides[r]);if(n===!1)return;if(n!==i.slides.length||e)C(),N(),i.updateActiveSlide(),i.params.pagination&&i.createPagination(),i.callPlugins("numberOfSlidesChanged")},i.createSlide=function(e,n,r){n=n||i.params.slideClass,r=r||t.slideElement;var s=document.createElement(r);return s.innerHTML=e||"",s.className=n,i._extendSwiperSlide(s)},i.appendSlide=function(e,t,n){if(!e)return;return e.nodeType?i._extendSwiperSlide(e).append():i.createSlide(e,t,n).append()},i.prependSlide=function(e,t,n){if(!e)return;return e.nodeType?i._extendSwiperSlide(e).prepend():i.createSlide(e,t,n).prepend()},i.insertSlideAfter=function(e,t,n,r){return typeof e=="undefined"?!1:t.nodeType?i._extendSwiperSlide(t).insertAfter(e):i.createSlide(t,n,r).insertAfter(e)},i.removeSlide=function(e){if(i.slides[e]){if(t.loop){if(!i.slides[e+i.loopedSlides])return!1;i.slides[e+i.loopedSlides].remove(),i.removeLoopedSlides(),i.calcSlides(),i.createLoop()}else i.slides[e].remove();return!0}return!1},i.removeLastSlide=function(){return i.slides.length>0?(t.loop?(i.slides[i.slides.length-1-i.loopedSlides].remove(),i.removeLoopedSlides(),i.calcSlides(),i.createLoop()):i.slides[i.slides.length-1].remove(),!0):!1},i.removeAllSlides=function(){for(var e=i.slides.length-1;e>=0;e--)i.slides[e].remove()},i.getSlide=function(e){return i.slides[e]},i.getLastSlide=function(){return i.slides[i.slides.length-1]},i.getFirstSlide=function(){return i.slides[0]},i.activeSlide=function(){return i.slides[i.activeIndex]},i.fireCallback=function(){var e=arguments[0];if(Object.prototype.toString.call(e)==="[object Array]")for(var n=0;n<e.length;n++)typeof e[n]=="function"&&e[n](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);else Object.prototype.toString.call(e)==="[object String]"?t["on"+e]&&i.fireCallback(t["on"+e],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):e(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},i.addCallback=function(e,t){var n=this,r;if(!n.params["on"+e])return this.params["on"+e]=[],this.params["on"+e].push(t);if(b(this.params["on"+e]))return this.params["on"+e].push(t);if(typeof this.params["on"+e]=="function")return r=this.params["on"+e],this.params["on"+e]=[],this.params["on"+e].push(r),this.params["on"+e].push(t)},i.removeCallbacks=function(e){i.params["on"+e]&&(i.params["on"+e]=null)};var w=[];for(var E in i.plugins)if(t[E]){var S=i.plugins[E](i,t[E]);S&&w.push(S)}i.callPlugins=function(e,t){t||(t={});for(var n=0;n<w.length;n++)e in w[n]&&w[n][e](t)},(i.browser.ie10||i.browser.ie11)&&!t.onlyExternal&&i.wrapper.classList.add("swiper-wp8-"+(d?"horizontal":"vertical")),t.freeMode&&(i.container.className+=" swiper-free-mode"),i.initialized=!1,i.init=function(e,n){var r=i.h.getWidth(i.container,!1,t.roundLengths),s=i.h.getHeight(i.container,!1,t.roundLengths);if(r===i.width&&s===i.height&&!e)return;i.width=r,i.height=s;var a,f,c,h,p,v,m;l=d?r:s;var g=i.wrapper;e&&i.calcSlides(n);if(t.slidesPerView==="auto"){var y=0,b=0;t.slidesOffset>0&&(g.style.paddingLeft="",g.style.paddingRight="",g.style.paddingTop="",g.style.paddingBottom=""),g.style.width="",g.style.height="",t.offsetPxBefore>0&&(d?i.wrapperLeft=t.offsetPxBefore:i.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(d?i.wrapperRight=t.offsetPxAfter:i.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(d?(i.wrapperLeft=(l-this.slides[0].getWidth(!0,t.roundLengths))/2,i.wrapperRight=(l-i.slides[i.slides.length-1].getWidth(!0,t.roundLengths))/2):(i.wrapperTop=(l-i.slides[0].getHeight(!0,t.roundLengths))/2,i.wrapperBottom=(l-i.slides[i.slides.length-1].getHeight(!0,t.roundLengths))/2)),d?(i.wrapperLeft>=0&&(g.style.paddingLeft=i.wrapperLeft+"px"),i.wrapperRight>=0&&(g.style.paddingRight=i.wrapperRight+"px")):(i.wrapperTop>=0&&(g.style.paddingTop=i.wrapperTop+"px"),i.wrapperBottom>=0&&(g.style.paddingBottom=i.wrapperBottom+"px")),v=0;var w=0;i.snapGrid=[],i.slidesGrid=[],c=0;for(m=0;m<i.slides.length;m++){a=i.slides[m].getWidth(!0,t.roundLengths),f=i.slides[m].getHeight(!0,t.roundLengths),t.calculateHeight&&(c=Math.max(c,f));var E=d?a:f;if(t.centeredSlides){var S=m===i.slides.length-1?0:i.slides[m+1].getWidth(!0,t.roundLengths),x=m===i.slides.length-1?0:i.slides[m+1].getHeight(!0,t.roundLengths),T=d?S:x;if(E>l){if(t.slidesPerViewFit)i.snapGrid.push(v+i.wrapperLeft),i.snapGrid.push(v+E-l+i.wrapperLeft);else for(var N=0;N<=Math.floor(E/(l+i.wrapperLeft));N++)N===0?i.snapGrid.push(v+i.wrapperLeft):i.snapGrid.push(v+i.wrapperLeft+l*N);i.slidesGrid.push(v+i.wrapperLeft)}else i.snapGrid.push(w),i.slidesGrid.push(w);w+=E/2+T/2}else{if(E>l)if(t.slidesPerViewFit)i.snapGrid.push(v),i.snapGrid.push(v+E-l);else if(l!==0)for(var C=0;C<=Math.floor(E/l);C++)i.snapGrid.push(v+l*C);else i.snapGrid.push(v);else i.snapGrid.push(v);i.slidesGrid.push(v)}v+=E,y+=a,b+=f}t.calculateHeight&&(i.height=c),d?(u=y+i.wrapperRight+i.wrapperLeft,g.style.width=y+"px",g.style.height=i.height+"px"):(u=b+i.wrapperTop+i.wrapperBottom,g.style.width=i.width+"px",g.style.height=b+"px")}else if(t.scrollContainer)g.style.width="",g.style.height="",h=i.slides[0].getWidth(!0,t.roundLengths),p=i.slides[0].getHeight(!0,t.roundLengths),u=d?h:p,g.style.width=h+"px",g.style.height=p+"px",o=d?h:p;else{if(t.calculateHeight){c=0,p=0,d||(i.container.style.height=""),g.style.height="";for(m=0;m<i.slides.length;m++)i.slides[m].style.height="",c=Math.max(i.slides[m].getHeight(!0),c),d||(p+=i.slides[m].getHeight(!0));f=c,i.height=f,d?p=f:(l=f,i.container.style.height=l+"px")}else f=d?i.height:i.height/t.slidesPerView,t.roundLengths&&(f=Math.round(f)),p=d?i.height:i.slides.length*f;a=d?i.width/t.slidesPerView:i.width,t.roundLengths&&(a=Math.round(a)),h=d?i.slides.length*a:i.width,o=d?a:f,t.offsetSlidesBefore>0&&(d?i.wrapperLeft=o*t.offsetSlidesBefore:i.wrapperTop=o*t.offsetSlidesBefore),t.offsetSlidesAfter>0&&(d?i.wrapperRight=o*t.offsetSlidesAfter:i.wrapperBottom=o*t.offsetSlidesAfter),t.offsetPxBefore>0&&(d?i.wrapperLeft=t.offsetPxBefore:i.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(d?i.wrapperRight=t.offsetPxAfter:i.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(d?(i.wrapperLeft=(l-o)/2,i.wrapperRight=(l-o)/2):(i.wrapperTop=(l-o)/2,i.wrapperBottom=(l-o)/2)),d?(i.wrapperLeft>0&&(g.style.paddingLeft=i.wrapperLeft+"px"),i.wrapperRight>0&&(g.style.paddingRight=i.wrapperRight+"px")):(i.wrapperTop>0&&(g.style.paddingTop=i.wrapperTop+"px"),i.wrapperBottom>0&&(g.style.paddingBottom=i.wrapperBottom+"px")),u=d?h+i.wrapperRight+i.wrapperLeft:p+i.wrapperTop+i.wrapperBottom,t.cssWidthAndHeight||(parseFloat(h)>0&&(g.style.width=h+"px"),parseFloat(p)>0&&(g.style.height=p+"px")),v=0,i.snapGrid=[],i.slidesGrid=[];for(m=0;m<i.slides.length;m++)i.snapGrid.push(v),i.slidesGrid.push(v),v+=o,t.cssWidthAndHeight||(parseFloat(a)>0&&(i.slides[m].style.width=a+"px"),parseFloat(f)>0&&(i.slides[m].style.height=f+"px"))}i.initialized?(i.callPlugins("onInit"),t.onInit&&i.fireCallback(t.onInit,i)):(i.callPlugins("onFirstInit"),t.onFirstInit&&i.fireCallback(t.onFirstInit,i)),i.initialized=!0},i.reInit=function(e){i.init(!0,e)},i.resizeFix=function(e){i.callPlugins("beforeResizeFix"),i.init(t.resizeReInit||e),t.freeMode?i.getWrapperTranslate()<-x()&&(i.setWrapperTransition(0),i.setWrapperTranslate(-x())):(i.swipeTo(t.loop?i.activeLoopIndex:i.activeIndex,0,!1),t.autoplay&&(i.support.transitions&&typeof G!="undefined"?typeof G!="undefined"&&(clearTimeout(G),G=undefined,i.startAutoplay()):typeof Y!="undefined"&&(clearInterval(Y),Y=undefined,i.startAutoplay()))),i.callPlugins("afterResizeFix")},i.destroy=function(){var e=i.h.removeEventListener,n=t.eventTarget==="wrapper"?i.wrapper:i.container;!i.browser.ie10&&!i.browser.ie11?(i.support.touch&&(e(n,"touchstart",I),e(n,"touchmove",U),e(n,"touchend",z)),t.simulateTouch&&(e(n,"mousedown",I),e(document,"mousemove",U),e(document,"mouseup",z))):(e(n,i.touchEvents.touchStart,I),e(document,i.touchEvents.touchMove,U),e(document,i.touchEvents.touchEnd,z)),t.autoResize&&e(window,"resize",i.resizeFix),C(),t.paginationClickable&&J(),t.mousewheelControl&&i._wheelEvent&&e(i.container,i._wheelEvent,A),t.keyboardControl&&e(document,"keydown",k),t.autoplay&&i.stopAutoplay(),i.callPlugins("onDestroy"),i=null},i.disableKeyboardControl=function(){t.keyboardControl=!1,i.h.removeEventListener(document,"keydown",k)},i.enableKeyboardControl=function(){t.keyboardControl=!0,i.h.addEventListener(document,"keydown",k)};var L=(new Date).getTime();i.disableMousewheelControl=function(){return i._wheelEvent?(t.mousewheelControl=!1,i.h.removeEventListener(i.container,i._wheelEvent,A),!0):!1},i.enableMousewheelControl=function(){return i._wheelEvent?(t.mousewheelControl=!0,i.h.addEventListener(i.container,i._wheelEvent,A),!0):!1};if(t.grabCursor){var O=i.container.style;O.cursor="move",O.cursor="grab",O.cursor="-moz-grab",O.cursor="-webkit-grab"}i.allowSlideClick=!0,i.allowLinks=!0;var B=!1,j,F=!0,q,R;i.swipeNext=function(e){!e&&t.loop&&i.fixLoop(),!e&&t.autoplay&&i.stopAutoplay(!0),i.callPlugins("onSwipeNext");var n=i.getWrapperTranslate(),r=n;if(t.slidesPerView==="auto"){for(var s=0;s<i.snapGrid.length;s++)if(-n>=i.snapGrid[s]&&-n<i.snapGrid[s+1]){r=-i.snapGrid[s+1];break}}else{var u=o*t.slidesPerGroup;r=-(Math.floor(Math.abs(n)/Math.floor(u))*u+u)}return r<-x()&&(r=-x()),r===n?!1:(V(r,"next"),!0)},i.swipePrev=function(e){!e&&t.loop&&i.fixLoop(),!e&&t.autoplay&&i.stopAutoplay(!0),i.callPlugins("onSwipePrev");var n=Math.ceil(i.getWrapperTranslate()),r;if(t.slidesPerView==="auto"){r=0;for(var s=1;s<i.snapGrid.length;s++){if(-n===i.snapGrid[s]){r=-i.snapGrid[s-1];break}if(-n>i.snapGrid[s]&&-n<i.snapGrid[s+1]){r=-i.snapGrid[s];break}}}else{var u=o*t.slidesPerGroup;r=-(Math.ceil(-n/u)-1)*u}return r>0&&(r=0),r===n?!1:(V(r,"prev"),!0)},i.swipeReset=function(){i.callPlugins("onSwipeReset");var e=i.getWrapperTranslate(),n=o*t.slidesPerGroup,r,s=-x();if(t.slidesPerView==="auto"){r=0;for(var u=0;u<i.snapGrid.length;u++){if(-e===i.snapGrid[u])return;if(-e>=i.snapGrid[u]&&-e<i.snapGrid[u+1]){i.positions.diff>0?r=-i.snapGrid[u+1]:r=-i.snapGrid[u];break}}-e>=i.snapGrid[i.snapGrid.length-1]&&(r=-i.snapGrid[i.snapGrid.length-1]),e<=-x()&&(r=-x())}else r=e<0?Math.round(e/n)*n:0;return t.scrollContainer&&(r=e<0?e:0),r<-x()&&(r=-x()),t.scrollContainer&&l>o&&(r=0),r===e?!1:(V(r,"reset"),!0)},i.swipeTo=function(e,n,r){e=parseInt(e,10),i.callPlugins("onSwipeTo",{index:e,speed:n}),t.loop&&(e+=i.loopedSlides);var s=i.getWrapperTranslate();if(e>i.slides.length-1||e<0)return;var u;return t.slidesPerView==="auto"?u=-i.slidesGrid[e]:u=-e*o,u<-x()&&(u=-x()),u===s?!1:(r=r===!1?!1:!0,V(u,"to",{index:e,speed:n,runCallbacks:r}),!0)},i._queueStartCallbacks=!1,i._queueEndCallbacks=!1,i.updateActiveSlide=function(e){if(!i.initialized)return;if(i.slides.length===0)return;i.previousIndex=i.activeIndex,typeof e=="undefined"&&(e=i.getWrapperTranslate()),e>0&&(e=0);var n;if(t.slidesPerView==="auto"){var r=0;i.activeIndex=i.slidesGrid.indexOf(-e);if(i.activeIndex<0){for(n=0;n<i.slidesGrid.length-1;n++)if(-e>i.slidesGrid[n]&&-e<i.slidesGrid[n+1])break;var s=Math.abs(i.slidesGrid[n]+e),u=Math.abs(i.slidesGrid[n+1]+e);s<=u?i.activeIndex=n:i.activeIndex=n+1}}else i.activeIndex=Math[t.visibilityFullFit?"ceil":"round"](-e/o);i.activeIndex===i.slides.length&&(i.activeIndex=i.slides.length-1),i.activeIndex<0&&(i.activeIndex=0);if(!i.slides[i.activeIndex])return;i.calcVisibleSlides(e);if(i.support.classList){var a;for(n=0;n<i.slides.length;n++)a=i.slides[n],a.classList.remove(t.slideActiveClass),i.visibleSlides.indexOf(a)>=0?a.classList.add(t.slideVisibleClass):a.classList.remove(t.slideVisibleClass);i.slides[i.activeIndex].classList.add(t.slideActiveClass)}else{var f=new RegExp("\\s*"+t.slideActiveClass),l=new RegExp("\\s*"+t.slideVisibleClass);for(n=0;n<i.slides.length;n++)i.slides[n].className=i.slides[n].className.replace(f,"").replace(l,""),i.visibleSlides.indexOf(i.slides[n])>=0&&(i.slides[n].className+=" "+t.slideVisibleClass);i.slides[i.activeIndex].className+=" "+t.slideActiveClass}if(t.loop){var c=i.loopedSlides;i.activeLoopIndex=i.activeIndex-c,i.activeLoopIndex>=i.slides.length-c*2&&(i.activeLoopIndex=i.slides.length-c*2-i.activeLoopIndex),i.activeLoopIndex<0&&(i.activeLoopIndex=i.slides.length-c*2+i.activeLoopIndex),i.activeLoopIndex<0&&(i.activeLoopIndex=0)}else i.activeLoopIndex=i.activeIndex;t.pagination&&i.updatePagination(e)},i.createPagination=function(e){t.paginationClickable&&i.paginationButtons&&J(),i.paginationContainer=t.pagination.nodeType?t.pagination:r(t.pagination)[0];if(t.createPagination){var n="",s=i.slides.length,o=s;t.loop&&(o-=i.loopedSlides*2);for(var u=0;u<o;u++)n+="<"+t.paginationElement+' class="'+t.paginationElementClass+'"></'+t.paginationElement+">";i.paginationContainer.innerHTML=n}i.paginationButtons=r("."+t.paginationElementClass,i.paginationContainer),e||i.updatePagination(),i.callPlugins("onCreatePagination"),t.paginationClickable&&K()},i.updatePagination=function(e){if(!t.pagination)return;if(i.slides.length<1)return;var n=r("."+t.paginationActiveClass,i.paginationContainer);if(!n)return;var s=i.paginationButtons;if(s.length===0)return;for(var o=0;o<s.length;o++)s[o].className=t.paginationElementClass;var u=t.loop?i.loopedSlides:0;if(t.paginationAsRange){i.visibleSlides||i.calcVisibleSlides(e);var a=[],f;for(f=0;f<i.visibleSlides.length;f++){var l=i.slides.indexOf(i.visibleSlides[f])-u;t.loop&&l<0&&(l=i.slides.length-i.loopedSlides*2+l),t.loop&&l>=i.slides.length-i.loopedSlides*2&&(l=i.slides.length-i.loopedSlides*2-l,l=Math.abs(l)),a.push(l)}for(f=0;f<a.length;f++)s[a[f]]&&(s[a[f]].className+=" "+t.paginationVisibleClass);t.loop?s[i.activeLoopIndex]!==undefined&&(s[i.activeLoopIndex].className+=" "+t.paginationActiveClass):s[i.activeIndex].className+=" "+t.paginationActiveClass}else t.loop?s[i.activeLoopIndex]&&(s[i.activeLoopIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass):s[i.activeIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass},i.calcVisibleSlides=function(e){var n=[],r=0,s=0,u=0;d&&i.wrapperLeft>0&&(e+=i.wrapperLeft),!d&&i.wrapperTop>0&&(e+=i.wrapperTop);for(var a=0;a<i.slides.length;a++){r+=s,t.slidesPerView==="auto"?s=d?i.h.getWidth(i.slides[a],!0,t.roundLengths):i.h.getHeight(i.slides[a],!0,t.roundLengths):s=o,u=r+s;var f=!1;t.visibilityFullFit?(r>=-e&&u<=-e+l&&(f=!0),r<=-e&&u>=-e+l&&(f=!0)):(u>-e&&u<=-e+l&&(f=!0),r>=-e&&r<-e+l&&(f=!0),r<-e&&u>-e+l&&(f=!0)),f&&n.push(i.slides[a])}n.length===0&&(n=[i.slides[i.activeIndex]]),i.visibleSlides=n};var G,Y;i.startAutoplay=function(){if(i.support.transitions){if(typeof G!="undefined")return!1;if(!t.autoplay)return;i.callPlugins("onAutoplayStart"),t.onAutoplayStart&&i.fireCallback(t.onAutoplayStart,i),Z()}else{if(typeof Y!="undefined")return!1;if(!t.autoplay)return;i.callPlugins("onAutoplayStart"),t.onAutoplayStart&&i.fireCallback(t.onAutoplayStart,i),Y=setInterval(function(){t.loop?(i.fixLoop(),i.swipeNext(!0)):i.swipeNext(!0)||(t.autoplayStopOnLast?(clearInterval(Y),Y=undefined):i.swipeTo(0))},t.autoplay)}},i.stopAutoplay=function(e){if(i.support.transitions){if(!G)return;G&&clearTimeout(G),G=undefined,e&&!t.autoplayDisableOnInteraction&&i.wrapperTransitionEnd(function(){Z()}),i.callPlugins("onAutoplayStop"),t.onAutoplayStop&&i.fireCallback(t.onAutoplayStop,i)}else Y&&clearInterval(Y),Y=undefined,i.callPlugins("onAutoplayStop"),t.onAutoplayStop&&i.fireCallback(t.onAutoplayStop,i)},i.loopCreated=!1,i.removeLoopedSlides=function(){if(i.loopCreated)for(var e=0;e<i.slides.length;e++)i.slides[e].getData("looped")===!0&&i.wrapper.removeChild(i.slides[e])},i.createLoop=function(){if(i.slides.length===0)return;t.slidesPerView==="auto"?i.loopedSlides=t.loopedSlides||1:i.loopedSlides=t.slidesPerView+t.loopAdditionalSlides,i.loopedSlides>i.slides.length&&(i.loopedSlides=i.slides.length);var e="",n="",r,o="",u=i.slides.length,a=Math.floor(i.loopedSlides/u),f=i.loopedSlides%u;for(r=0;r<a*u;r++){var l=r;if(r>=u){var c=Math.floor(r/u);l=r-u*c}o+=i.slides[l].outerHTML}for(r=0;r<f;r++)n+=X(t.slideDuplicateClass,i.slides[r].outerHTML);for(r=u-f;r<u;r++)e+=X(t.slideDuplicateClass,i.slides[r].outerHTML);var h=e+o+s.innerHTML+o+n;s.innerHTML=h,i.loopCreated=!0,i.calcSlides();for(r=0;r<i.slides.length;r++)(r<i.loopedSlides||r>=i.slides.length-i.loopedSlides)&&i.slides[r].setData("looped",!0);i.callPlugins("onCreateLoop")},i.fixLoop=function(){var e;if(i.activeIndex<i.loopedSlides)e=i.slides.length-i.loopedSlides*3+i.activeIndex,i.swipeTo(e,0,!1);else if(t.slidesPerView==="auto"&&i.activeIndex>=i.loopedSlides*2||i.activeIndex>i.slides.length-t.slidesPerView*2)e=-i.slides.length+i.activeIndex+i.loopedSlides,i.swipeTo(e,0,!1)},i.loadSlides=function(){var e="";i.activeLoaderIndex=0;var n=t.loader.slides,r=t.loader.loadAllSlides?n.length:t.slidesPerView*(1+t.loader.surroundGroups);for(var s=0;s<r;s++)t.loader.slidesHTMLType==="outer"?e+=n[s]:e+="<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+s+'">'+n[s]+"</"+t.slideElement+">";i.wrapper.innerHTML=e,i.calcSlides(!0),t.loader.loadAllSlides||i.wrapperTransitionEnd(i.reloadSlides,!0)},i.reloadSlides=function(){var e=t.loader.slides,n=parseInt(i.activeSlide().data("swiperindex"),10);if(n<0||n>e.length-1)return;i.activeLoaderIndex=n;var r=Math.max(0,n-t.slidesPerView*t.loader.surroundGroups),s=Math.min(n+t.slidesPerView*(1+t.loader.surroundGroups)-1,e.length-1);if(n>0){var u=-o*(n-r);i.setWrapperTranslate(u),i.setWrapperTransition(0)}var a;if(t.loader.logic==="reload"){i.wrapper.innerHTML="";var f="";for(a=r;a<=s;a++)f+=t.loader.slidesHTMLType==="outer"?e[a]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+a+'">'+e[a]+"</"+t.slideElement+">";i.wrapper.innerHTML=f}else{var l=1e3,c=0;for(a=0;a<i.slides.length;a++){var h=i.slides[a].data("swiperindex");h<r||h>s?i.wrapper.removeChild(i.slides[a]):(l=Math.min(h,l),c=Math.max(h,c))}for(a=r;a<=s;a++){var p;a<l&&(p=document.createElement(t.slideElement),p.className=t.slideClass,p.setAttribute("data-swiperindex",a),p.innerHTML=e[a],i.wrapper.insertBefore(p,i.wrapper.firstChild)),a>c&&(p=document.createElement(t.slideElement),p.className=t.slideClass,p.setAttribute("data-swiperindex",a),p.innerHTML=e[a],i.wrapper.appendChild(p))}}i.reInit(!0)},et()};Swiper.prototype={plugins:{},wrapperTransitionEnd:function(e,t){function o(){e(n),n.params.queueEndCallbacks&&(n._queueEndCallbacks=!1);if(!t)for(s=0;s<i.length;s++)n.h.removeEventListener(r,i[s],o)}var n=this,r=n.wrapper,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],s;if(e)for(s=0;s<i.length;s++)n.h.addEventListener(r,i[s],o)},getWrapperTranslate:function(e){var t=this.wrapper,n,r,i,s;return typeof e=="undefined"&&(e=this.params.mode==="horizontal"?"x":"y"),this.support.transforms&&this.params.useCSS3Transforms?(i=window.getComputedStyle(t,null),window.WebKitCSSMatrix?s=new WebKitCSSMatrix(i.webkitTransform==="none"?"":i.webkitTransform):(s=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),e==="x"&&(window.WebKitCSSMatrix?r=s.m41:n.length===16?r=parseFloat(n[12]):r=parseFloat(n[4])),e==="y"&&(window.WebKitCSSMatrix?r=s.m42:n.length===16?r=parseFloat(n[13]):r=parseFloat(n[5]))):(e==="x"&&(r=parseFloat(t.style.left,10)||0),e==="y"&&(r=parseFloat(t.style.top,10)||0)),r||0},setWrapperTranslate:function(e,t,n){var r=this.wrapper.style,i={x:0,y:0,z:0},s;arguments.length===3?(i.x=e,i.y=t,i.z=n):(typeof t=="undefined"&&(t=this.params.mode==="horizontal"?"x":"y"),i[t]=e),this.support.transforms&&this.params.useCSS3Transforms?(s=this.support.transforms3d?"translate3d("+i.x+"px, "+i.y+"px, "+i.z+"px)":"translate("+i.x+"px, "+i.y+"px)",r.webkitTransform=r.MsTransform=r.msTransform=r.MozTransform=r.OTransform=r.transform=s):(r.left=i.x+"px",r.top=i.y+"px"),this.callPlugins("onSetWrapperTransform",i),this.params.onSetWrapperTransform&&this.fireCallback(this.params.onSetWrapperTransform,this,i)},setWrapperTransition:function(e){var t=this.wrapper.style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e/1e3+"s",this.callPlugins("onSetWrapperTransition",{duration:e}),this.params.onSetWrapperTransition&&this.fireCallback(this.params.onSetWrapperTransition,this,e)},h:{getWidth:function(e,t,n){var r=window.getComputedStyle(e,null).getPropertyValue("width"),i=parseFloat(r);if(isNaN(i)||r.indexOf("%")>0)i=e.offsetWidth-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"));return t&&(i+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),n?Math.round(i):i},getHeight:function(e,t,n){if(t)return e.offsetHeight;var r=window.getComputedStyle(e,null).getPropertyValue("height"),i=parseFloat(r);if(isNaN(i)||r.indexOf("%")>0)i=e.offsetHeight-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"));return t&&(i+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),n?Math.round(i):i},getOffset:function(e){var t=e.getBoundingClientRect(),n=document.body,r=e.clientTop||n.clientTop||0,i=e.clientLeft||n.clientLeft||0,s=window.pageYOffset||e.scrollTop,o=window.pageXOffset||e.scrollLeft;return document.documentElement&&!window.pageYOffset&&(s=document.documentElement.scrollTop,o=document.documentElement.scrollLeft),{top:t.top+s-r,left:t.left+o-i}},windowWidth:function(){if(window.innerWidth)return window.innerWidth;if(document.documentElement&&document.documentElement.clientWidth)return document.documentElement.clientWidth},windowHeight:function(){if(window.innerHeight)return window.innerHeight;if(document.documentElement&&document.documentElement.clientHeight)return document.documentElement.clientHeight},windowScroll:function(){if(typeof pageYOffset!="undefined")return{left:window.pageXOffset,top:window.pageYOffset};if(document.documentElement)return{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}},addEventListener:function(e,t,n,r){typeof r=="undefined"&&(r=!1),e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n,r){typeof r=="undefined"&&(r=!1),e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}},setTransform:function(e,t){var n=e.style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=t},setTranslate:function(e,t){var n=e.style,r={x:t.x||0,y:t.y||0,z:t.z||0},i=this.support.transforms3d?"translate3d("+r.x+"px,"+r.y+"px,"+r.z+"px)":"translate("+r.x+"px,"+r.y+"px)";n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=i,this.support.transforms||(n.left=r.x+"px",n.top=r.y+"px")},setTransition:function(e,t){var n=e.style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=t+"ms"},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),transforms:window.Modernizr&&Modernizr.csstransforms===!0||function(){var e=document.createElement("div").style;return"transform"in e||"WebkitTransform"in e||"MozTransform"in e||"msTransform"in e||"MsTransform"in e||"OTransform"in e}(),transitions:window.Modernizr&&Modernizr.csstransitions===!0||function(){var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"MsTransition"in e||"OTransition"in e}(),classList:function(){var e=document.createElement("div").style;return"classList"in e}()},browser:{ie8:function(){var e=-1;if(navigator.appName==="Microsoft Internet Explorer"){var t=navigator.userAgent,n=new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/);n.exec(t)!==null&&(e=parseFloat(RegExp.$1))}return e!==-1&&e<9}(),ie10:window.navigator.msPointerEnabled,ie11:window.navigator.pointerEnabled}},(window.jQuery||window.Zepto)&&function(e){e.fn.swiper=function(t){var n=new Swiper(e(this)[0],t);return e(this).data("swiper",n),n}}(window.jQuery||window.Zepto),typeof module!="undefined"&&(module.exports=Swiper),typeof define=="function"&&define.amd&&define("lib-app/swiper/idangerous.swiper",[],function(){return Swiper}),define("lib-build/css!lib-app/swiper/idangerous.swiper",[],function(){}),function(e){typeof define=="function"&&define.amd?define("lib-app/jquery.mousewheel",["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function a(t){var n=t?t.originalEvent||t:window.event,s=r.call(arguments,1);return t=u._fix(n),s.unshift(t),i&&clearTimeout(i),i=setTimeout(f,200),e.event.dispatch.apply(this,s)}function f(){s=null}function l(e,t){return u.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}function c(e,t){e.preventDefault===!0&&t.preventDefault(),e.stopPropagation===!0&&t.stopPropagation()}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice,i,s;for(var o=t.length;o;)e.event.fixHooks[t[--o]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"4.0.0-pre",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],a,!1);else this.onmousewheel=a;e.data(this,"mousewheel-line-height",u._getLineHeight(this)),e.data(this,"mousewheel-page-height",u._getPageHeight(this))},add:function(e){var t=e.data,n=t&&t.mousewheel;n&&(("throttle"in n||"debounce"in n)&&u._delayHandler.call(this,e),"intent"in n&&u._intentHandler.call(this,e))},trigger:function(e,t){return t||(t=e,e=null),a.call(this,t),!1},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],a,!1);else this.onmousewheel=null},_getLineHeight:function(t){return parseInt(e(t).offsetParent().css("fontSize"),10)},_getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0},trigger:function(e,t){return t||(t=e,e=null),a.call(this,t),!1},_fix:function(t){var n=0,r=0,i=0,o=e.event.fix(t);"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=t.wheelDelta*-1),"wheelDeltaY"in t&&(r=t.wheelDeltaY*-1),"wheelDeltaX"in t&&(n=t.wheelDeltaX*-1),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(n=r,r=0),"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(n=t.deltaX);if(r===0&&n===0)return;if(t.deltaMode===1){var u=e.data(this,"mousewheel-line-height")||1;r*=u,n*=u}else if(t.deltaMode===2){var a=e.data(this,"mousewheel-page-height");r*=a,n*=a}i=Math.max(Math.abs(r),Math.abs(n));if(!s||i<s)s=i,l(t,i)&&(s/=40);return l(t,i)&&(delta/=40,n/=40,r/=40),n=Math[n>=1?"floor":"ceil"](n/s),r=Math[r>=1?"floor":"ceil"](r/s),o.deltaX=n,o.deltaY=r,o.deltaFactor=s,o.deltaMode=0,o.type="mousewheel",o},_intentHandler:function(t){var n,r,i,s,o,u=!1,a=this,f=t.data.mousewheel.intent,l=f.interval||100,h=f.sensitivity||7,p=t.handler,d=function(e){s=e.pageX,o=e.pageY},v=function(){Math.abs(r-s)+Math.abs(i-o)<h?(e(a).off("mousemove",d),u=!0):(r=s,i=o,n=setTimeout(v,l))},m=function(e){if(u)return p.apply(a,arguments);c(f,e)};e(a).on("mouseenter",function(){r=event.pageX,i=event.pageY,e(a).on("mousemove",d),n=setTimeout(v,l)}).on("mouseleave",function(){n&&clearTimeout(n),e(a).off("mousemove",d),u=!1}),t.handler=m},_delayHandler:function(e){var t,n,r,i=this,s="throttle"in e.data.mousewheel?"throttle":"debounce",o=e.data.mousewheel[s],u="leading"in o?o.leading:s==="debounce"?!1:!0,a="trailing"in o?o.trailing:!0,f=o.delay||100,l=s==="throttle"?f:o.maxDelay,h=e.handler,p=function(e){var p=arguments,d=function(){n&&clearTimeout(n),t=null,n=null,r=null},v=function(){return r=+(new Date),h.apply(i,p)},m=function(){return n=null,v()},g=function(){d();if(a)return v()},y;return t?clearTimeout(t):u&&(y=v()),t=setTimeout(g,f),s==="throttle"?l&&+(new Date)-r>=l&&(y=m()):l&&!n&&(n=setTimeout(m,l)),c(o,e),y};e.handler=p}}}),define("storymaps/tpl/ui/desktop/FloatingPanel",["lib-build/tpl!./FloatingPanelSection","lib-build/css!./FloatingPanel","lib-build/css!./Common","lib-build/css!storymaps/common/builder/InlineFieldEdit","./DotNavBar","../StoryText","storymaps/common/utils/HeaderHelper","storymaps/common/utils/CommonHelper","dojo/has","lib-app/jquery.hammer.min","lib-app/jquery","lib-app/swiper/idangerous.swiper","lib-build/css!lib-app/swiper/idangerous.swiper","lib-app/jquery.mousewheel"],function(e,t,n,r,i,s,o,u,a){return function(n,r,f){function y(e,t){var i="";$.each(e,function(e,t){i+=b(e,t.status,t.content,t.title,t.OBJECTID)}),n.find(".appTitle").html(e.length?e[0].title:""),n.find(".swiper-wrapper").html(s.prepareSectionPanelContent(i)),n.show(),w(t),l.resize(),c.resizeFix(),setTimeout(function(){n.find(".section").eq(0).find(".title").css("margin-top",n.find(".section").eq(0).find(".title").css("margin-top"))},200),n.find(".panelEditBtn").toggle(!!(r&&e&&e.length))}function b(t,n,r,i){var s="";return n!="PUBLISHED"&&(s="hidden-section"),e({optHtmlClass:s,title:i,content:r,lblShare:i18n.viewer.headerFromCommon.share,shareURL:u.getAppViewModeURL()+"&section="+(t+1),scroll:i18n.viewer.floatLayout.scroll})}function w(e){c=new Swiper(n.find(".swiper-container")[0],{mode:"vertical",loop:!1,keyboardControl:!0,cssWidthAndHeight:!0,onlyExternal:!0,onSlideNext:function(e){if(e.activeIndex==1)return!1;D(),S(n.find(".swiper-slide").eq(e.previousIndex)),k()},onSlidePrev:function(e){D(),S(n.find(".swiper-slide").eq(e.previousIndex)),k()},onSlideChangeEnd:function(e){m!=e.activeIndex&&(S(n.find(".swiper-slide").eq(m)),s.loadSectionIframe(n.find(".section").eq(e.activeIndex)),f(e.activeIndex))},onSlideClick:function(){},initialSlide:e})}function E(e){n.toggleClass("section-social-links",e.socialLinks),n.css("width",e.layoutCfg.sizeVal),$("body").removeClass("layout-float-left layout-float-right").addClass(e.layoutCfg.position=="right"?"layout-float-right":"layout-float-left")}function S(e){var t=e.find(".content iframe[data-unload=true]");t.length&&setTimeout(function(){t.each(function(e,t){var n=$(t);n.attr("src","")})},150)}function x(e){o.setLogo(n,e),o.setLink(n,e),o.setSocial(n,e),o.initEvents(n,"bottom")}function T(e){g.update({bgColor:e.dotNav,tooltipBgColor:e.text,tooltipFontColor:e.panel}),n.find(".backdrop, .panelEditBtn").css("background-color",e.panel),n.css("color",e.text)}function N(e,t){var r=n.find(".swiper-container").height();if(t&&n.find(".swiper-slide-active .section-inner").height()<r)return;v=!0,C(),n.find(".scroll").show(),n.find(".scrollInner").tooltip({title:i18n.viewer.sideLayout.scroll}),u.addCSSRule(".scroll .tooltip-inner { background-color: "+e.text+"; color: "+e.panel+"; }"),u.addCSSRule(".scroll .tooltip-arrow { border-top-color: "+e.text+" !important; }"),n.find(".scroll").click(function(){n.find(".scroll .tooltip").remove(),A({deltaY:1},!0)})}function C(){var e=n.find(".swiper-container").height();n.find(".swiper-wrapper").css({height:n.find(".swiper-slide-active").position().top+e-n.find(".scroll").outerHeight(),overflow:"hidden"})}function k(){v&&(n.find(".scroll").slideUp(),setTimeout(function(){n.find(".swiper-wrapper").css({height:"initial",overflow:"initial"})},200),v=!1)}function L(e){S(n.find(".swiper-slide-visible")),k(),l.showSectionNumber(e,!0),f(e)}function A(e,t){var r=e.deltaY*-1,i=!1;a("mac")&&(r/=40);if(n.find(".builder-mask").is(":visible"))return!1;k();if(h){var s=n.find(".swiper-slide.swiper-slide-active"),o=s.outerHeight(),u=s.scrollTop(),f=s.prop("scrollHeight");r<0&&o+u>=f?(p||t?(c.swipeNext(),M()):O(),s.index()==s.parent().children().length-1&&(i=!0)):r>0&&u===0?(p?(c.swipePrev(),M()):O(),s.index()===0&&(i=!0)):(p=!1,s.scrollTop(u-30*r))}return i}function O(){p=!0,h=!1,setTimeout(function(){h=!0},a("mac")?1400:500)}function M(){a("mac")&&(h=!1,setTimeout(function(){h=!0},1200))}function _(){p=!0,h=!1,setTimeout(function(){h=!0},700)}function D(){var e=$(".swiper-slide-active").index()>0,t=n.find(".appTitle").hasClass("anchored");e!=t&&(n.find(".appTitle").toggleClass("anchored",e),n.find(".header").toggleClass("titleanchored",e),setTimeout(function(){l.resize()},250))}function P(e){if(!c)return;e.keyCode==34?c.swipeNext():e.keyCode==33?c.swipePrev():e.keyCode==36?c.swipeTo(0):e.keyCode==35&&c.swipeTo(n.find(".swiper-slide").length-1)}function H(){}function B(){app.builder.openEditPopup({sectionIndex:l.getSectionNumber(),displayTab:"content"})}function j(){n.on("mousewheel",A),a("touch")&&(Hammer(n.find(".swiper-container")[0],{}).on("dragstart",function(){d=0,p=!1}),Hammer(n.find(".swiper-container")[0],{}).on("drag",function(e){var t=n.find(".swiper-slide.swiper-slide-active"),r=t.outerHeight(),i=t.scrollTop(),s=t.prop("scrollHeight");if(!h)return;n.find(".swiper-slide.swiper-slide-active").scrollTop(n.find(".swiper-slide.swiper-slide-active").scrollTop()-e.gesture.deltaY+d),r+i>=s&&e.gesture.deltaY<0?p||d===0?c.swipeNext():_():i===0&&e.gesture.deltaY>0&&(p||d===0?c.swipePrev():_()),d=e.gesture.deltaY})),o.initEvents(n),app.map&&app.map.disableKeyboardNavigation(),r&&n.find(".panelEditBtn").click(B),$(document).keyup(P)}var l=this,c=null,h=!0,p=!0,d=null,v=!1,m=null,g=new i(n.find(".navDots"),L);this.init=function(e,t,i,s,o){c!=null&&this.destroy(),m=null,E(i),T(o),x(s),j(),y(e,t),r&&H(),g.init({sections:e,sectionIndex:t,bgColor:o.dotNav,tooltipBgColor:o.text,tooltipFontColor:o.panel,dotColor:o.softBtn,tooltipPosition:i.layoutCfg.position=="left"?"right":"left"}),r||(setTimeout(function(){N(o,t==e.length-1)},50),e.length==1&&(n.find(".navDots").hide(),n.find(".sections").css(i.layoutCfg.position=="left"?"padding-left":"padding-right","3%")))},this.update=function(e,t,n){E(e),T(n),x(t),g.updateTooltipPlacement(e.layoutCfg.position=="left"?"right":"left")},this.resize=function(){var e=n.height()-n.find(".separator").position().top-(r?n.find(".builder-content-panel").outerHeight()+12:3);v&&C(),n.find(".swiper-container, .sections, .section").css("height",e),n.find(".sections").css("bottom",r?n.find(".builder-content-panel").outerHeight()+4:1),c&&c.resizeFix()},this.showSectionNumber=function(e,t){if(!c)return;if(!n.is(":visible"))return;if(m!=e||t)s.loadSectionIframe(n.find(".section").eq(e)),g.setActive(e),c.swipeTo(e),m=e,n.find(".swiper-slide-visible").length&&(n.find(".swiper-slide-visible")[0].scrollTop=0);D()},this.getSectionNumber=function(){return c?c.activeIndex:null},this.destroy=function(){c=null,h=!0,p=!0,g.destroy(),n.off("mousewheel"),$(document).unbind("keyup",P),app.map&&(app.map.enableScrollWheelZoom(),app.map.enableKeyboardNavigation()),n.find(".share_facebook").off("click"),n.find(".share_twitter").off("click"),n.find(".share_bitly").off("click"),n.hide()},this.toggleSwitchBuilderButton=function(e){n.find(".switchBuilder").html('<span class="glyphicon glyphicon-cog"></span>'+i18n.viewer.headerFromCommon.builderButton).off("click").click(u.switchToBuilder).toggle(e)},this.enableSwiperKeybordEvent=function(){c.enableKeyboardControl(),$(document).keyup(P)},this.disableSwiperKeybordEvent=function(){c.disableKeyboardControl(),$(document).unbind("keyup",P)}}}),define("lib-build/tpl!storymaps/tpl/ui/mobile/FloatingSwiperSection",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="section swiper-slide">\r\n	<h1 class="title">'+((__t=title)==null?"":__t)+'</h1>\r\n	<div class="content">'+((__t=content)==null?"":__t)+'</div>\r\n	<p class="help">\r\n		<span class="btnIcon glyphicon glyphicon-fullscreen"></span>'+((__t=lblTapDetails)==null?"":__t)+'\r\n		<span class="swipe-invite"><span class="btnIcon glyphicon glyphicon-resize-horizontal"></span>'+((__t=lblSwipe)==null?"":__t)+'</span>\r\n	</p>\r\n	<p class="help-embed">\r\n		<span class="btnIcon glyphicon glyphicon-fullscreen"></span>'+((__t=lblClickDetails)==null?"":__t)+'\r\n	</p>\r\n	<p class="expanded-close">\r\n		<span class="btnIcon backmap"></span>'+((__t=lblTapMap)==null?"":__t)+'\r\n		<span class="swipe-invite"><span class="btnIcon glyphicon glyphicon-resize-horizontal"></span>'+((__t=lblSwipe)==null?"":__t)+'</span>\r\n	</p>\r\n	<p class="expanded-close-embed">\r\n		<span class="embed-btn2 embed-btn2-left"></span>\r\n		<button class="btn btn-primary backmap2">'+((__t=lblClickMap)==null?"":__t)+'</button>\r\n		<span class="embed-btn2 embed-btn2-right"></span>\r\n	</p>\r\n</div>';return __p}}),define("lib-build/css!storymaps/tpl/ui/mobile/FloatingSwiper",[],function(){}),define("storymaps/tpl/ui/mobile/FloatingSwiper",["lib-build/tpl!./FloatingSwiperSection","lib-build/css!./FloatingSwiper","../StoryText","storymaps/common/utils/HeaderHelper","dojo/has","lib-app/jquery","lib-app/swiper/idangerous.swiper","lib-build/css!lib-app/swiper/idangerous.swiper"],function(e,t,n,r,i){return function(s,o,u){function c(e){var t="";l=0,f=null,$.each(e,function(e,n){t+=h(n.status,n.title,n.content)}),s.find(".swiper-wrapper").html(n.prepareSectionPanelContent(t)),s.find(".section").eq(0).addClass("active"),s.find(".swiper-container, .header").show(),a=new Swiper(s.find(".swiper-container")[0],{mode:"horizontal",loop:!1,keyboardControl:!1,onSlideChangeEnd:function(e){f!=e.activeIndex&&(d(s.find(".swiper-slide").eq(f)),u(e.activeIndex)),p(),a.resizeFix()},onSlideClick:function(e){if(s.hasClass("hasDesktopBtn")&&s.hasClass("expanded")&&$(e.clickedTarget).hasClass("embed-btn2"))return;g()}}),p(),(i("ie")||i("trident"))&&s.find(".title, .help-embed").css("padding-right",0)}function h(t,n,r){return l++,e({title:$("<div>"+n+"</div>").text(),content:r,lblTapDetails:i18n.viewer.mobileView.tapForDetails,lblClickDetails:i18n.viewer.mobileView.clickForDetails.toUpperCase(),lblSwipe:i18n.viewer.mobileView.swipeToExplore,lblTapMap:i18n.viewer.mobileView.tapForMap,lblClickMap:i18n.viewer.mobileView.clickForMap})}function p(){s.find(".embed-btn-left, .embed-btn2-left").toggleClass("disabled",a.activeIndex===0),s.find(".embed-btn-right, .embed-btn2-right").toggleClass("disabled",a.activeIndex===a.slides.length-1)}function d(e){var t=e.find(".content iframe[data-unload=true]");t.length&&setTimeout(function(){t.each(function(e,t){var n=$(t);n.attr("src","")})},150)}function v(e){r.setSocial(s,e),r.setLink(s,e),s.find(".header").toggle(!!(e.linkText||e.linkURL||e.socialBtn.bitly||e.socialBtn.facebook||e.socialBtn.twitter))}function m(e){s.find(".backdrop").css("background-color",e.panel),s.find(".linkContainer").css("color",e.text),s.css("color",e.text)}function g(){location.hash=s.hasClass("expanded")?"map":"detail"}function y(){r.initEvents(s,"top"),s.find(".embed-btn, .embed-btn2").click(function(){var e=$(this).parent();e.hasClass("disabled")||(e.hasClass("embed-btn-left")||$(this).hasClass("embed-btn2-left")?a.swipePrev():a.swipeNext())})}var a=null,f=null,l=-1;this.init=function(e,t,n,r){m(r),v(n),$("body").hasClass("hasTouch")||s.addClass("hasDesktopBtn"),c(e),y(),!o&&e.length==1&&s.find(".swipe-invite").hide()},this.update=function(e,t){m(t),v(e)},this.resize=function(){a&&a.resizeFix()},this.showSectionNumber=function(e){if(!a)return;if(!s.is(":visible"))return;f!=e&&(n.loadSectionIframe(s.find(".section").eq(e)),a.swipeTo(e),f=e)},this.getSectionNumber=function(){return a?a.activeIndex:null},this.setView=function(e){s.toggleClass("expanded",e=="detail"),$("body").toggleClass("mobile-view-expanded",e=="detail"),a&&a.resizeFix()}}}),define("lib-build/css!storymaps/common/mapcontrols/command/MapCommand",[],function(){}),define("storymaps/common/mapcontrols/command/MapCommand",["lib-build/css!./MapCommand","dojo/has","esri/geometry/Point","dojo/on","esri/symbols/PictureMarkerSymbol","esri/layers/GraphicsLayer","esri/graphic","esri/config"],function(e,t,n,r,i,s,o,u){return function(a,f,l,c){function m(e){if(e)$(a.container).find(".mapCommandHomeBtn").addClass("loading"),h=Date.now();else{var t=Date.now()-h,n=0;t<450&&(n=450-t),setTimeout(function(){$(a.container).find(".mapCommandHomeBtn").removeClass("loading"),h=0},n)}}function g(){navigator.geolocation.getCurrentPosition(function(e){var t=new n(e.coords.longitude,e.coords.latitude);l&&typeof l=="function"&&l(!0,t,e);if(a.spatialReference.wkid!=102100&&a.spatialReference.wkid!=4326){u.defaults.geometryService.project([t],a.spatialReference,function(e){if(!e||!e[0])return;y(e[0])});return}y(t)},b,{timeout:2e3})}function y(e){v.clear(),v.add(new o(e,d)),setTimeout(function(){$("#locateLayer_layer image").fadeOut({duration:800})},1e4)}function b(e){l(!1,e)}var h=0,p=$('<div class="esriSimpleSliderIncrementButton"><div class="mapCommandHomeBtn"></div></div>'),d=new i("resources/common/icons/mapcommand-location-marker.png",21,21),v=new s({id:"locateLayer"});p.click(function(){if(h!==0&&$("body").hasClass("mobile-view"))return;f&&typeof f=="function"?f(a._params.extent):a.setExtent(a._params.extent)}),$(a.container).find(".esriSimpleSlider div:nth-child(1)").after(p),r(a,"update-start",function(){h===0&&m(!0)}),r(a,"update-end",function(){m(!1)}),this.setMobile=function(e){$(".esriSimpleSlider, .mapCommandHomeBtn",a.container).toggleClass("touch",e)},this.destroy=function(){$(a.container).find(".esriSimpleSliderIncrementButton").remove(),$(a.container).find(".mapCommandLocation").remove()},this.startLoading=function(){m(!0)},this.stopLoading=function(){m(!1)},this.enableLocationButton=function(e){$(".mapCommandLocation",a.container).toggleClass("hidden",!e)},navigator&&navigator.geolocation&&($(".esriSimpleSlider",a.container).after('<div class="esriSimpleSlider esriSimpleSliderVertical mapCommandLocation"></div>'),$(".mapCommandLocation",a.container).click(g),this.enableLocationButton(c),a.addLayer(v)),this.setMobile(t("touch"))}}),define("lib-build/tpl!storymaps/common/mapcontrols/legend/Legend",[],function(){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="legendContainer mapControls">\r\n	<div class="titleBtn">\r\n		<span class="collapseBtn">\r\n			<div class="glyphicon glyphicon-chevron-down"></div>\r\n			<div class="glyphicon glyphicon-chevron-up"></div>\r\n		</span>\r\n		'+((__t=title)==null?"":__t)+'\r\n	</div>\r\n	\r\n	<div class="content">\r\n		<div class="legendDijitContainer"></div>\r\n		',isInBuilder&&(__p+='\r\n			<div class="settingsGear glyphicon glyphicon-wrench"></div>\r\n			<div class="settingsOverlay">\r\n				<div class="settings-title">'+((__t=settings)==null?"":__t)+'</div>\r\n				<div class="settings-content">\r\n					<!-- Open by default -->\r\n					<div class="checkbox">\r\n						<label>\r\n							<input type="checkbox" class="expandStartup" />\r\n							'+((__t=openDefault)==null?"":__t)+"\r\n						</label>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		"),__p+="\r\n	</div>\r\n</div>";return __p}}),define("lib-build/css!storymaps/common/mapcontrols/legend/Legend",[],function(){}),define("lib-build/css!storymaps/common/mapcontrols/Common",[],function(){}),define("storymaps/common/mapcontrols/legend/Legend",["lib-build/tpl!./Legend","lib-build/css!./Legend","lib-build/css!../Common","esri/dijit/Legend","esri/arcgis/utils","dojo/topic"],function(e,t,n,r,i,s){return function(n,o,u){function c(){o.find(".legendDijitContainer").html('<div class="legendDijit"></div>'),a=new r({map:n.map,layerInfos:i.getLegendLayers(n)},o.find(".legendDijit")[0]),a.startup()}function h(){a&&a.destroy(),a=null}function p(){o.find(".legendContainer").toggleClass("collapsed"),o.find(".settingsOverlay").hide()}function d(){o.find(".titleBtn").click(p),o.find(".settingsGear").click(function(){o.find(".settingsOverlay").is(":visible")?o.off("mouseleave"):o.mouseleave(function(){o.find(".settingsOverlay").toggle(),o.off("mouseleave"),o.find(".content").removeClass("settingsOpen")}),o.find(".settingsOverlay").toggle(),o.find(".content").toggleClass("settingsOpen")}),o.find(".expandStartup").change(v)}function v(){f.openByDefault=o.find(".expandStartup").prop("checked"),s.publish("BUILDER_INCREMENT_COUNTER",1)}var a=null,f=null,l={isInBuilder:u,title:i18n.viewer.legendFromCommon.title};u&&(l.settings=i18n.commonMapControls.common.settings,l.openDefault=i18n.commonMapControls.common.openDefault),o.append(e(l)),this.toggle=function(e){o.toggle(!!e),e&&!a?c():e||h()},this.toggleExpanded=function(e){o.find(".legendContainer").toggleClass("collapsed",!e)},this.setColors=function(e){o.find(".legendContainer").css({backgroundColor:e.dotNav,color:e.text}),o.find(".titleBtn").css("color",e.softText),o.find(".settingsGear, .collapseBtn").css("color",e.softBtn)},this.setSettings=function(e){f=e,o.find(".expandStartup").prop("checked",f.openByDefault)},d()}}),define("lib-build/tpl!storymaps/common/mapcontrols/overview/Overview",[],function(){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="overviewContainer mapControls">\r\n	<div class="titleBtn">\r\n		<span class="collapseBtn">\r\n			<div class="glyphicon glyphicon-chevron-down"></div>\r\n			<div class="glyphicon glyphicon-chevron-up"></div>\r\n		</span>\r\n		'+((__t=title)==null?"":__t)+'\r\n	</div>\r\n	\r\n	<div class="content">\r\n		<div class="overviewMapContainer">\r\n			<!-- Map is injected here -->\r\n		</div>\r\n		',isInBuilder&&(__p+='\r\n			<div class="settingsGear glyphicon glyphicon-wrench"></div>\r\n			<div class="settingsOverlay">\r\n				<div class="settings-title">'+((__t=settings)==null?"":__t)+'</div>\r\n				<div class="settings-content">\r\n					<!-- Open by default -->\r\n					<div class="checkbox">\r\n						<label>\r\n							<input type="checkbox" class="expandStartup" />\r\n							'+((__t=openDefault)==null?"":__t)+'\r\n						</label>\r\n					</div>\r\n					\r\n					<!-- Basemap -->\r\n					<div class="btn-group dropup basemap-dropdown">\r\n						<button type="button" class="btn btn-default btn-sm dropdown-toggle basemapBtn" data-toggle="dropdown">\r\n							'+((__t=basemapGalleryBtnLabel)==null?"":__t)+' <span class="caret"></span>\r\n						</button>\r\n						<ul class="dropdown-menu basemaps dropdown-menu-form pull-right" role="menu"></ul>\r\n					</div>\r\n					<div id="basemapGallery"></div>\r\n			\r\n					<!-- Expand factor -->\r\n					<div class="spinnerLabel">\r\n						<label for="expandFactorSpinner">'+((__t=expandFactorLabel)==null?"":__t)+'</label>\r\n						<a class="locateBtnHelp" data-original-title="" title="">\r\n							<img src="resources/tpl/builder/icons/builder-help.png" style="vertical-align: -5px;">\r\n						</a>\r\n					</div>\r\n					\r\n					<div class="input-group expandFactorSpinner">\r\n						<input type="text" class="form-control input-small input-xs" id="expandFactorSpinner" value="2">\r\n						<div class="input-group-btn-vertical">\r\n							<button class="btn btn-default btn-xs"><i class="glyphicon glyphicon-chevron-up"></i></button>\r\n							<button class="btn btn-default btn-xs"><i class="glyphicon glyphicon-chevron-down"></i></button>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		'),__p+="\r\n	</div>\r\n</div>";return __p}}),define("lib-build/css!storymaps/common/mapcontrols/overview/Overview",[],function(){}),define("storymaps/common/mapcontrols/overview/Overview",["lib-build/tpl!./Overview","lib-build/css!./Overview","lib-build/css!../Common","esri/dijit/OverviewMap","esri/dijit/BasemapGallery","esri/layers/ArcGISTiledMapServiceLayer","esri/arcgis/utils","dojo/Deferred","dojo/dom","dojo/on","dojo/topic"],function(e,t,n,r,i,s,o,u,a,f,l){return function(n,i,s){function c(e){i.find(".overviewMapContainer").html('<div class="overviewMap"></div>'),o=new r({map:n,visible:!0,color:"transparent",opacity:1},i.find(".overviewMap")[0]),o.startup();var t=e?e.dotNav:a;t&&i.find(".ovwHighlight").css("border","3px solid "+t)}function h(){o&&o.destroy(),o=null}function p(){i.find(".overviewContainer").toggleClass("collapsed"),i.find(".settingsOverlay").hide()}function d(){i.find(".titleBtn").click(p),i.find(".settingsGear").click(function(){i.find(".settingsOverlay").is(":visible")?i.off("mouseleave"):i.mouseleave(function(){i.find(".settingsOverlay").toggle(),i.off("mouseleave")}),i.find(".settingsOverlay").toggle()}),i.find(".expandStartup").change(v)}function v(){u.openByDefault=i.find(".expandStartup").prop("checked"),l.publish("BUILDER_INCREMENT_COUNTER",1)}var o=null,u=null,a=null,f={isInBuilder:s,title:i18n.viewer.overviewFromCommon.title,overlayHeader:"",basemapGalleryBtnLabel:"",expandFactorLabel:""};s&&(f.settings=i18n.commonMapControls.common.settings,f.openDefault=i18n.commonMapControls.common.openDefault,f.basemapGalleryBtnLabel=i18n.commonMapControls.overview.basemapGalleryBtnLabel,f.expandFactorLabel=i18n.commonMapControls.overview.expandFactorLabel),i.append(e(f)),this.toggle=function(e,t){i.toggle(!!e),e&&!o?c(t):e||h()},this.toggleExpanded=function(e){i.find(".overviewContainer").toggleClass("collapsed",!e)},this.setColors=function(e){a=e.dotNav,i.find(".overviewContainer").css({backgroundColor:e.dotNav,color:e.text}),i.find(".titleBtn").css("color",e.softText),i.find(".settingsGear, .collapseBtn").css("color",e.softBtn),i.find(".ovwHighlight").css("border","3px solid "+e.dotNav)},this.setSettings=function(e){u=e,i.find(".expandStartup").prop("checked",u.openByDefault)},d()}}),define("lib-build/css!storymaps/common/ui/Modal",[],function(){}),define("lib-build/css!storymaps/common/utils/SocialSharing",[],function(){}),define("lib-build/css!storymaps/common/ui/loadingIndicator/loadingIndicator",[],function(){}),define("lib-build/css!storymaps/tpl/ui/Common",[],function(){}),define("lib-build/css!storymaps/tpl/ui/StoryText",[],function(){}),define("lib-build/css!storymaps/tpl/ui/mobile/Common",[],function(){}),define("lib-build/css!storymaps/tpl/ui/Responsive",[],function(){}),define("storymaps/tpl/core/MainView",["lib-build/css!./MainView","../ui/MainStage","./Config","./Data","./WebApplicationData","./Helper","../ui/desktop/SidePanel","../ui/desktop/FloatingPanel","../ui/mobile/FloatingSwiper","storymaps/common/mapcontrols/command/MapCommand","storymaps/common/mapcontrols/legend/Legend","storymaps/common/mapcontrols/overview/Overview","lib-build/css!storymaps/common/ui/Modal.css","lib-build/css!storymaps/common/utils/SocialSharing.css","lib-build/css!storymaps/common/ui/loadingIndicator/loadingIndicator.css","storymaps/common/utils/CommonHelper","dojo/has","dojo/topic","esri/arcgis/utils","esri/geometry/Extent","../ui/StoryText","lib-build/css!../ui/Common","lib-build/css!../ui/StoryText","lib-build/css!../ui/mobile/Common","lib-build/css!../ui/Responsive"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){return function(s){function p(){var e=app.data.getStoryLength(),t=0,n=parseInt(v.getUrlParams().section,10);n&&(t=n-1),t>=e&&(t=0),e&&app.data.setCurrentSectionIndex(t);if(e){x(),h.handleWindowResize();if(app.data.getCurrentSection().media.type!="webmap")d();else{var r,i;r=g.subscribe("story-loaded-section",function(){r.remove(),i.remove(),d()}),i=g.subscribe("story-section-map-timeout",function(){r.remove(),i.remove(),d()})}}else d()}function d(){i.isBlank()?app.isInBuilder?h.isProd()?s.showInitPopup():h.portalLogin().then(s.showInitPopup,function(){h.initError("noLayerNoHostedFS")}):v.getAppID(h.isProd())?app.data.userIsAppOwner()?v.switchToBuilder():h.initError("notConfiguredDesktop"):h.initError("noLayer"):h.appInitComplete(),s&&s.updateUI()}function E(){var e=i.getLayoutId(),t=i.getColors(),n=i.getLayoutOptions(),r=app.data.getStorySections();e=="side"?(n.layoutCfg.position=="left"?$("#sidePanel").parent().children().eq(0).is("#sidePanel")||$("#mainStagePanel").before($("#sidePanel")):$("#sidePanel").parent().children().eq(0).is("#mainStagePanel")||$("#sidePanel").before($("#mainStagePanel")),app.ui.sidePanel.init(r,app.data.getCurrentSectionIndex(),n,h.getHeaderUserCfg(),t)):e=="float"&&app.ui.floatingPanel.init(r,app.data.getCurrentSectionIndex(),n,h.getHeaderUserCfg(),t)}function S(){var e=i.getColors(),t=app.data.getStorySections();(m("ie")===undefined||m("ie")>8)&&app.ui.mobileView.init(t,app.data.getCurrentSectionIndex(),h.getHeaderUserCfg(),e)}function x(){app.data.getStoryByIndex(0)&&(document.title=$("<div>"+app.data.getStoryByIndex(0).title+"</div>").text()),app.ui.mainStage.updateMainMediaContainers(),E(),S(),C(),w.createMainMediaActionLink(),w.createMediaFullScreenButton(),w.styleSectionPanelContent(),k(app.data.getCurrentSectionIndex()),s&&s.updateUI()}function T(){x()}function N(){var e=i.getLayoutId(),t=i.getColors(),n=i.getLayoutOptions();e=="side"?app.ui.sidePanel.update(n,h.getHeaderUserCfg(),t):e=="float"&&app.ui.floatingPanel.update(n,h.getHeaderUserCfg(),t)}function C(){var e=i.getColors();v.addCSSRule(".section a { color: "+e.textLink+"; }")}function k(e){console.log("tpl.core.MainView - navigateStoryToIndex - ",e),app.data.setCurrentSectionIndex(e),app.ui.mainStage.updateMainMediaWithStoryMainMedia(e),app.ui.sidePanel.showSectionNumber(e),app.ui.floatingPanel.showSectionNumber(e),app.ui.mobileView.showSectionNumber(e),$(".mediaBackContainer").hide()}function L(){var e=app.data.getCurrentSection(),t=!!(e&&e.media&&e.media.type=="webmap"&&e.media.webmap),n=t?!!e.media.webmap.extent:!1,r=t?e.media.webmap.id:null;if(!t)return;n?g.publish("CORE_UPDATE_EXTENT",new b(e.media.webmap.extent)):g.publish("CORE_UPDATE_EXTENT",app.maps[r].response.map._params.extent)}var h=null;this.init=function(e){return h=e,app.isInBuilder&&m("ie")&&m("ie")<10?(i18n.viewer.errors.noBuilderIE=i18n.viewer.errors.noBuilderIE.replace("%VERSION%",10).replace("%UPGRADE%",i18n.viewer.errors.upgradeBrowser),h.initError("noBuilderIE"),!1):m("ie")&&m("ie")<=8?(i18n.viewer.errors.noViewerIE=i18n.viewer.errors.noViewerIE.replace("%VERSION%",9).replace("%UPGRADE%",i18n.viewer.errors.upgradeBrowser),h.initError("noViewerIE"),!1):($(document).bind("touchmove",function(e){$(e.target).parents("#sidePanel, #mobileView, .legendContainer").length||e.preventDefault()}),app.data=new r,app.ui={},app.ui.mainStage=new t($("#mainStagePanel"),app.isInBuilder,this),app.ui.sidePanel=new o($("#sidePanel"),app.isInBuilder,k),app.ui.floatingPanel=new u($("#floatingPanel"),app.isInBuilder,k),app.isAddEditInProgress=!1,app.ui.mobileView=new a($("#mobileView"),app.isInBuilder,k),g.subscribe("story-navigate-section",k),g.subscribe("story-update-sections",x),g.subscribe("story-update-section",T),g.subscribe("story-perform-action-media",app.ui.mainStage.updateMainMediaWithStoryAction),g.subscribe("ADDEDIT_LOAD_WEBMAP",app.ui.mainStage.loadTmpWebmap),g.subscribe("ADDEDIT_SHOW_WEBMAP",app.ui.mainStage.showWebmapById),!0)},this.webAppConfigLoaded=function(){app.data.setStoryStorage(i.getStoryStorage());var e=h.hasSwitchBuilderButton();app.ui.sidePanel.toggleSwitchBuilderButton(e),app.ui.floatingPanel.toggleSwitchBuilderButton(e),app.isGalleryCreation=!Object.keys(app.data.getWebAppData().getOriginalData().values).length},this.loadFirstWebmap=function(){},this.loadWebmapFromData=function(){app.data.getStoryStorage()=="WEBAPP"&&p()},this.loadWebmap=function(e,t,n){console.log("tpl.core.MainView - loadWebMap - webmapId:",e);var r=null;return y.createMap(e,t,{mapOptions:{slider:!0,autoResize:!1,showAttribution:!0,infoWindow:r,extent:n},usePopupManager:!0,ignorePopups:!1,bingMapsKey:commonConfig.bingMapsKey,editable:!1})},this.firstWebmapLoaded=function(){},this.startFromScratch=function(){d()},this.getMapConfig=function(e,t){return{response:e,mapCommand:new f(e.map,L,h.zoomToDeviceLocation,app.data.getWebAppData().getLocateBtn()),legend:new l(e,t.siblings(".legend"),app.isInBuilder),overview:new c(e.map,t.siblings(".overview"),app.isInBuilder)}},this.updateUI=function(){var e=app.data.getWebAppData().getColors(),t=app.data.getWebAppData().getLayoutId(),n=app.data.getWebAppData().getFonts();if($("body").hasClass("switchLayout")){var r=$.map($("body").attr("class").split(" "),function(e){return e.match(/layout-/)?e:null}).join(" ");$("body").removeClass("switchLayout").removeClass(r),app.ui.sidePanel.destroy(),app.ui.floatingPanel.destroy(),E(t),setTimeout(function(){k(app.data.getCurrentSectionIndex()),x()},50)}$("body").addClass("layout-"+t),$("body").attr("data-theme-major",e.themeMajor),$.each(Object.keys(app.maps),function(e,t){app.maps[t].mapCommand.enableLocationButton(i.getLocateBtn())}),C(),N(),app.ui.mainStage.updateMainStageWithLayoutSettings(),app.ui.mobileView.update(h.getHeaderUserCfg(),e),v.addCSSRule(".sectionPanel .title, .sectionPanel .appTitle, #mobileView .title, #AddEditTitleEditor { "+n.sectionTitle.value+" }","SectionTitleFont"),v.addCSSRule(".sectionPanel .content, #mobileView .content { "+n.sectionContent.value+" }","SectionContentFont"),v.addCSSRule(".sectionPanel .title strong, .sectionPanel .appTitle strong, #mobileView .title strong, #AddEditTitleEditor strong { "+(n.sectionTitle.id!="default"?n.sectionTitle.value+" font-weight: bold;":"font-family: 'open_sanssemibold', sans-serif; font-weight: normal;")+"}","SectionTitleStrongFont"),v.addCSSRule(".sectionPanel .content strong, #mobileView .content strong{ "+(n.sectionContent.id!="default"?n.sectionContent.value+" font-weight: bold;":"font-family: 'open_sanssemibold', sans-serif; font-weight: normal;")+"}","SectionContentStrongFont")},this.resize=function(e){var t=i.getLayoutId();$("#sidePanelInner, #mainStagePanelInner").height($("#contentPanel").height()),e.isMobileView?app.ui.mobileView.resize(e):t=="side"?app.ui.sidePanel.resize(e):t=="float"&&app.ui.floatingPanel.resize(e);var n=app.data.getCurrentSectionIndex();app.ui.sidePanel.showSectionNumber(n),app.ui.floatingPanel.showSectionNumber(n),app.ui.mobileView.showSectionNumber(n),w.styleSectionPanelContent(),app.ui.mainStage.updateMainStageWithLayoutSettings()},this.checkConfigFileIsOK=function(){return n.checkConfigFileIsOK()},this.appInitComplete=function(){this.updateUI(),h.cleanLoadingTimeout(),$(window).resize(),app.isDirectCreation||h.displayApp(),g.publish("tpl-ready")},this.onHashChange=function(){var e=location.hash?location.hash.substring(1):"";app.ui.mobileView.setView(e)},this.prepareMobileViewSwitch=function(){},this.initLocalization=function(){}}}),require(["storymaps/common/Core","storymaps/tpl/core/MainView"],function(){}),define("storymaps/tpl/BuildConfigViewer",function(){});